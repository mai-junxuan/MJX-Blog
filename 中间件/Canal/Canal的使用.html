<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.7" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.23" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://maijunxuan.cn/%E4%B8%AD%E9%97%B4%E4%BB%B6/Canal/Canal%E7%9A%84%E4%BD%BF%E7%94%A8.html"><meta property="og:site_name" content="éº¦ä¿Šè½©çš„åšå®¢"><meta property="og:title" content="ä¸€ã€èƒŒæ™¯"><meta property="og:description" content="ä¸€ã€èƒŒæ™¯ å·¥ä½œä¸­æœ‰ä¸ªéœ€æ±‚ï¼Œå½“æ•°æ®åº“çš„æ•°æ®å˜æ›´æ—¶ï¼Œå¦å¤–ä¸€ä¸ªç³»ç»Ÿä¸­çš„æ•°æ®è¦èƒ½åŠæ—¶æ„Ÿåº”åˆ°ï¼Œé€šè¿‡è°ƒç ”çŸ¥é“ï¼Œç›‘å¬æ•°æ®åº“çš„binlogå¯ä»¥åšåˆ°ä¸€ä¸ªå‡†å®æ—¶çš„é€šçŸ¥ï¼Œè€Œcanalä¸»è¦ç”¨é€”æ˜¯åŸºäº MySQL æ•°æ®åº“å¢é‡æ—¥å¿—è§£æï¼Œæä¾›å¢é‡æ•°æ®è®¢é˜…å’Œæ¶ˆè´¹ï¼Œæ­£å¥½æ»¡è¶³éœ€æ±‚ï¼Œæ­¤å¤„è®°å½•ä¸€ä¸‹canalçš„ç®€å•ä½¿ç”¨ã€‚ äºŒã€canalçš„å·¥ä½œåŸç† canalçš„å·¥ä½œåŸç† æ­¥éª¤ï¼š canalæ¨¡æ‹Ÿm..."><meta property="og:type" content="article"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202208080239150.webp"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-06-13T21:01:35.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="ä¸€ã€èƒŒæ™¯"><meta property="article:author" content="maijunxuan"><meta property="article:modified_time" content="2023-06-13T21:01:35.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"ä¸€ã€èƒŒæ™¯","image":["https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202208080239150.webp","https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202209022334753.webp"],"dateModified":"2023-06-13T21:01:35.000Z","author":[{"@type":"Person","name":"maijunxuan","email":"maijunxuan0309@gmail.com"}]}</script><meta name="robots" content="all"><meta name="author" content="maijunxuan"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta name="apple-mobile-web-app-capable" content="yes"><link rel="icon" href="/favicon.ico"><title>ä¸€ã€èƒŒæ™¯ | éº¦ä¿Šè½©çš„åšå®¢</title><meta name="description" content="ä¸€ã€èƒŒæ™¯ å·¥ä½œä¸­æœ‰ä¸ªéœ€æ±‚ï¼Œå½“æ•°æ®åº“çš„æ•°æ®å˜æ›´æ—¶ï¼Œå¦å¤–ä¸€ä¸ªç³»ç»Ÿä¸­çš„æ•°æ®è¦èƒ½åŠæ—¶æ„Ÿåº”åˆ°ï¼Œé€šè¿‡è°ƒç ”çŸ¥é“ï¼Œç›‘å¬æ•°æ®åº“çš„binlogå¯ä»¥åšåˆ°ä¸€ä¸ªå‡†å®æ—¶çš„é€šçŸ¥ï¼Œè€Œcanalä¸»è¦ç”¨é€”æ˜¯åŸºäº MySQL æ•°æ®åº“å¢é‡æ—¥å¿—è§£æï¼Œæä¾›å¢é‡æ•°æ®è®¢é˜…å’Œæ¶ˆè´¹ï¼Œæ­£å¥½æ»¡è¶³éœ€æ±‚ï¼Œæ­¤å¤„è®°å½•ä¸€ä¸‹canalçš„ç®€å•ä½¿ç”¨ã€‚ äºŒã€canalçš„å·¥ä½œåŸç† canalçš„å·¥ä½œåŸç† æ­¥éª¤ï¼š canalæ¨¡æ‹Ÿm...">
    <link rel="preload" href="/assets/style-BoXsG0LU.css" as="style"><link rel="stylesheet" href="/assets/style-BoXsG0LU.css">
    <link rel="modulepreload" href="/assets/app-2Nmlc3aW.js"><link rel="modulepreload" href="/assets/Canalçš„ä½¿ç”¨.html-C0d4TIg6.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container no-sidebar has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/"><!----><!----><span class="vp-site-name">éº¦ä¿Šè½©çš„åšå®¢</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="æ—¥å¸¸"><span class="title"><!---->æ—¥å¸¸</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%97%A5%E5%B8%B8/IDEA%E7%BF%BB%E8%AF%91%E6%8F%92%E4%BB%B6%E6%8A%A5%E9%94%99%E6%9B%B4%E6%96%B0TKK%E7%9A%84%E9%97%AE%E9%A2%98.html" aria-label="IDEAç¿»è¯‘æ’ä»¶æŠ¥é”™æ›´æ–°TKKçš„é—®é¢˜"><!---->IDEAç¿»è¯‘æ’ä»¶æŠ¥é”™æ›´æ–°TKKçš„é—®é¢˜<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%97%A5%E5%B8%B8/Vue3%E4%B8%AD%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E8%83%BD%E4%BD%BF%E7%94%A8this.html" aria-label="Vue3ä¸­ä¸ºä»€ä¹ˆä¸èƒ½ä½¿ç”¨this"><!---->Vue3ä¸­ä¸ºä»€ä¹ˆä¸èƒ½ä½¿ç”¨this<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%97%A5%E5%B8%B8/windows%E7%AB%AF%E5%8F%A3%E5%86%B2%E7%AA%81%E8%A7%A3%E5%86%B3.html" aria-label="windowsç«¯å£å†²çªè§£å†³"><!---->windowsç«¯å£å†²çªè§£å†³<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%97%A5%E5%B8%B8/%E8%A7%A3%E5%86%B3%E4%BE%9D%E8%B5%96%E5%86%B2%E7%AA%81.html" aria-label="è§£å†³ä¾èµ–å†²çª"><!---->è§£å†³ä¾èµ–å†²çª<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Java"><span class="title"><!---->Java</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/Java/Java%E5%9F%BA%E7%A1%80%E5%B0%8F%E7%BB%93.html" aria-label="JavaåŸºç¡€å°ç»“"><!---->JavaåŸºç¡€å°ç»“<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Java/Java%E6%B3%A8%E8%A7%A3%E5%B0%8F%E7%BB%93.html" aria-label="Javaæ³¨è§£å°ç»“"><!---->Javaæ³¨è§£å°ç»“<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Java/Java%E5%8F%8D%E5%B0%84%E5%B0%8F%E7%BB%93.html" aria-label="Javaåå°„å°ç»“"><!---->Javaåå°„å°ç»“<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Java/Java%E4%B8%AD%E7%9A%84%E6%B3%9B%E5%9E%8B.html" aria-label="Javaä¸­çš„æ³›å‹"><!---->Javaä¸­çš„æ³›å‹<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Java/è°ˆè°ˆJavaçš„å¼‚å¸¸.html" aria-label="è°ˆè°ˆJavaçš„å¼‚å¸¸"><!---->è°ˆè°ˆJavaçš„å¼‚å¸¸<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Java/Lambda%E5%AE%9E%E8%B7%B5.html" aria-label="Lambdaå®è·µ"><!---->Lambdaå®è·µ<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Java/Stream%E6%B5%81%E5%AE%9E%E8%B7%B5.html" aria-label="Streamæµå®è·µ"><!---->Streamæµå®è·µ<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Java/Java%E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2.html" aria-label="Javaä¸­çš„å­—ç¬¦ä¸²"><!---->Javaä¸­çš„å­—ç¬¦ä¸²<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="JUC"><span class="title"><!---->JUC</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/Java%E4%B8%AD%E7%9A%84%E7%BA%BF%E7%A8%8B%E6%B1%A0.html" aria-label="Javaä¸­çš„çº¿ç¨‹æ± "><!---->Javaä¸­çš„çº¿ç¨‹æ± <!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/Java%E4%B8%AD%E7%9A%84%E5%B9%B6%E5%8F%91%E5%AE%B9%E5%99%A8.html" aria-label="Javaä¸­çš„å¹¶å‘å®¹å™¨"><!---->Javaä¸­çš„å¹¶å‘å®¹å™¨<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/%E8%B0%88%E8%B0%88ThreadLocal.html" aria-label="è°ˆè°ˆThreadLocal"><!---->è°ˆè°ˆThreadLocal<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/synchronized%E7%9A%84%E4%BC%98%E5%8C%96.html" aria-label="synchronizedçš„ä¼˜åŒ–"><!---->synchronizedçš„ä¼˜åŒ–<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/CAS%E5%92%8C%E5%8E%9F%E5%AD%90%E7%B1%BB.html" aria-label="CASå’ŒåŸå­ç±»"><!---->CASå’ŒåŸå­ç±»<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/volatile%E5%92%8CCAS%E7%9A%84%E5%BC%8A%E7%AB%AF.html" aria-label="volatileå’ŒCASçš„å¼Šç«¯"><!---->volatileå’ŒCASçš„å¼Šç«¯<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/CompletableFuture%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8.html" aria-label="CompletableFutureç®€å•ä½¿ç”¨"><!---->CompletableFutureç®€å•ä½¿ç”¨<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/AQS%E7%AE%80%E8%BF%B0.html" aria-label="AQSç®€è¿°"><!---->AQSç®€è¿°<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/JUC%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB.html" aria-label="JUCå¸¸ç”¨å·¥å…·ç±»"><!---->JUCå¸¸ç”¨å·¥å…·ç±»<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="MySQL"><span class="title"><!---->MySQL</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/MySQL/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5.html" aria-label="MySQLå¸¸ç”¨è¯­å¥"><!---->MySQLå¸¸ç”¨è¯­å¥<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/MySQL/MySQL%E4%B8%AD%E7%9A%84%E4%BA%8B%E5%8A%A1.html" aria-label="MySQLä¸­çš„äº‹åŠ¡"><!---->MySQLä¸­çš„äº‹åŠ¡<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/MySQL/%E4%B8%80%E6%9D%A1SQL%E7%9A%84%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B.html" aria-label="ä¸€æ¡SQLçš„æ‰§è¡Œè¿‡ç¨‹"><!---->ä¸€æ¡SQLçš„æ‰§è¡Œè¿‡ç¨‹<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/MySQL/MySQL%E4%B8%ADdatetime%E5%92%8Ctimestamp%E7%9A%84%E5%8C%BA%E5%88%AB%E4%B8%8E%E9%80%89%E6%8B%A9.html" aria-label="MySQLä¸­datetimeå’Œtimestampçš„åŒºåˆ«ä¸é€‰æ‹©"><!---->MySQLä¸­datetimeå’Œtimestampçš„åŒºåˆ«ä¸é€‰æ‹©<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/MySQL/%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95%E5%92%8C%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%E7%9A%84%E5%8C%BA%E5%88%AB.html" aria-label="æ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•çš„åŒºåˆ«"><!---->æ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•çš„åŒºåˆ«<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/MySQL/Explain%E8%AF%AD%E5%8F%A5.html" aria-label="Explainè¯­å¥"><!---->Explainè¯­å¥<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/MySQL/MySQL%E7%9A%84%E6%89%A7%E8%A1%8C%E6%88%90%E6%9C%AC%E6%80%8E%E4%B9%88%E7%AE%97.html" aria-label="MySQLçš„æ‰§è¡Œæˆæœ¬æ€ä¹ˆç®—"><!---->MySQLçš„æ‰§è¡Œæˆæœ¬æ€ä¹ˆç®—<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/MySQL/MVCC%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86.html" aria-label="MVCCå®ç°åŸç†"><!---->MVCCå®ç°åŸç†<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Redis"><span class="title"><!---->Redis</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/Redis%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.html" aria-label="Redisçš„å®‰è£…ä¸åŸºæœ¬æ“ä½œ"><!---->Redisçš„å®‰è£…ä¸åŸºæœ¬æ“ä½œ<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/Redis%E7%9A%843%E7%A7%8D%E7%89%B9%E6%AE%8A%E7%B1%BB%E5%9E%8B.html" aria-label="Redisçš„3ç§ç‰¹æ®Šç±»å‹"><!---->Redisçš„3ç§ç‰¹æ®Šç±»å‹<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/Redis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D.html" aria-label="Redisé…ç½®æ–‡ä»¶ä»‹ç»"><!---->Redisé…ç½®æ–‡ä»¶ä»‹ç»<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/Redis%E7%9A%84Java%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%A4%BA%E4%BE%8B.html" aria-label="Redisçš„Javaå®¢æˆ·ç«¯ç¤ºä¾‹"><!---->Redisçš„Javaå®¢æˆ·ç«¯ç¤ºä¾‹<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/Redis%E4%BA%8B%E5%8A%A1.html" aria-label="Redisäº‹åŠ¡"><!---->Redisäº‹åŠ¡<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/RDB%E7%AE%80%E4%BB%8B.html" aria-label="RDBç®€ä»‹"><!---->RDBç®€ä»‹<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/AOF%E7%AE%80%E4%BB%8B.html" aria-label="AOFç®€ä»‹"><!---->AOFç®€ä»‹<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%8F%8A%E5%93%A8%E5%85%B5.html" aria-label="ä¸»ä»å¤åˆ¶åŠå“¨å…µ"><!---->ä¸»ä»å¤åˆ¶åŠå“¨å…µ<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/Redis%E9%9B%86%E7%BE%A4.html" aria-label="Redisé›†ç¾¤"><!---->Redisé›†ç¾¤<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/%E4%BD%BF%E7%94%A8%E7%BC%93%E5%AD%98%E4%BC%9A%E5%AD%98%E5%9C%A8%E5%93%AA%E4%BA%9B%E9%97%AE%E9%A2%98.html" aria-label="ä½¿ç”¨ç¼“å­˜ä¼šå­˜åœ¨å“ªäº›é—®é¢˜"><!---->ä½¿ç”¨ç¼“å­˜ä¼šå­˜åœ¨å“ªäº›é—®é¢˜<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="å·¥å…·"><span class="title"><!---->å·¥å…·</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Git</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Git/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" aria-label="Gitå¸¸ç”¨å‘½ä»¤"><!---->Gitå¸¸ç”¨å‘½ä»¤<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Git/Git%20%E6%8F%90%E4%BA%A4%E8%A7%84%E7%BA%A6.html" aria-label="Git æäº¤è§„çº¦"><!---->Git æäº¤è§„çº¦<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Linux</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Linux/Linux%E7%9A%84%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84.html" aria-label="Linuxçš„æ–‡ä»¶ç»“æ„"><!---->Linuxçš„æ–‡ä»¶ç»“æ„<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Linux/Linux%E7%9A%84%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86.html" aria-label="Linuxçš„è¿›ç¨‹ç®¡ç†"><!---->Linuxçš„è¿›ç¨‹ç®¡ç†<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Linux/Linux%E5%B8%B8%E7%94%A8%E7%BD%91%E7%BB%9C%E5%91%BD%E4%BB%A4.html" aria-label="Linuxå¸¸ç”¨ç½‘ç»œå‘½ä»¤"><!---->Linuxå¸¸ç”¨ç½‘ç»œå‘½ä»¤<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Docker</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Docker/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" aria-label="Dockerå¸¸ç”¨å‘½ä»¤"><!---->Dockerå¸¸ç”¨å‘½ä»¤<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Docker/DokcerCompose%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8.html" aria-label="DokcerComposeç®€å•ä½¿ç”¨"><!---->DokcerComposeç®€å•ä½¿ç”¨<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Nginx</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Nginx/Nginx%E7%9A%84%E5%AE%89%E8%A3%85.html" aria-label="Nginxçš„å®‰è£…"><!---->Nginxçš„å®‰è£…<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Nginx/Nginx%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8.html" aria-label="NginxåŸºç¡€å…¥é—¨"><!---->NginxåŸºç¡€å…¥é—¨<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>å…¶ä»–</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/%E5%85%B6%E4%BB%96/Arthas%E4%BD%BF%E7%94%A8%E5%B0%8F%E7%BB%93.html" aria-label="Arthasä½¿ç”¨å°ç»“"><!---->Arthasä½¿ç”¨å°ç»“<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/å·¥å…·/å…¶ä»–/åŸºäºGiteeå®ç°Jenkinsè‡ªåŠ¨åŒ–éƒ¨ç½²SpringBooté¡¹ç›®/" aria-label="åŸºäºGiteeå®ç°Jenkinsè‡ªåŠ¨åŒ–éƒ¨ç½²SpringBooté¡¹ç›®"><!---->åŸºäºGiteeå®ç°Jenkinsè‡ªåŠ¨åŒ–éƒ¨ç½²SpringBooté¡¹ç›®<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/%E5%85%B6%E4%BB%96/%E5%9F%BA%E4%BA%8Ejmeter%E5%AE%8C%E6%88%90%E5%8E%8B%E6%B5%8B.html" aria-label="åŸºäºjmeterå®Œæˆå‹æµ‹"><!---->åŸºäºjmeterå®Œæˆå‹æµ‹<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="åˆ†å¸ƒå¼"><span class="title"><!---->åˆ†å¸ƒå¼</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E5%88%86%E5%B8%83%E5%BC%8F/CAP%E5%92%8CBASE%E7%90%86%E8%AE%BA.html" aria-label="CAPå’ŒBASEç†è®º"><!---->CAPå’ŒBASEç†è®º<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html" aria-label="åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆ"><!---->åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆ<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84%E5%87%A0%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F.html" aria-label="åˆ†å¸ƒå¼é”çš„å‡ ç§å®ç°æ–¹å¼"><!---->åˆ†å¸ƒå¼é”çš„å‡ ç§å®ç°æ–¹å¼<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E5%88%86%E5%B8%83%E5%BC%8F/%E4%BB%80%E4%B9%88%E6%98%AFxxl-job%EF%BC%8C%E5%AE%83%E8%A7%A3%E5%86%B3%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98.html" aria-label="ä»€ä¹ˆæ˜¯xxl-jobï¼Œå®ƒè§£å†³ä»€ä¹ˆé—®é¢˜"><!---->ä»€ä¹ˆæ˜¯xxl-jobï¼Œå®ƒè§£å†³ä»€ä¹ˆé—®é¢˜<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="æ¡†æ¶"><span class="title"><!---->æ¡†æ¶</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Spring</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E6%A1%86%E6%9E%B6/Spring/Spring%E7%9A%84%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3.html" aria-label="Springçš„å¸¸ç”¨æ³¨è§£"><!---->Springçš„å¸¸ç”¨æ³¨è§£<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E6%A1%86%E6%9E%B6/Spring/@Autowired%E6%B3%A8%E8%A7%A3%E8%AF%A6%E8%A7%A3.html" aria-label="@Autowiredæ³¨è§£è¯¦è§£"><!---->@Autowiredæ³¨è§£è¯¦è§£<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/æ¡†æ¶/Spring/SpringBeançš„ä½œç”¨åŸŸ.html" aria-label="SpringBeançš„ä½œç”¨åŸŸ"><!---->SpringBeançš„ä½œç”¨åŸŸ<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E6%A1%86%E6%9E%B6/Spring/Spring%E4%B8%89%E7%BA%A7%E7%BC%93%E5%AD%98%E4%B8%8E%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96.html" aria-label="Springä¸‰çº§ç¼“å­˜ä¸å¾ªç¯ä¾èµ–"><!---->Springä¸‰çº§ç¼“å­˜ä¸å¾ªç¯ä¾èµ–<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E6%A1%86%E6%9E%B6/Spring/JDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E5%92%8CCGlib%E4%BB%A3%E7%90%86.html" aria-label="JDKåŠ¨æ€ä»£ç†å’ŒCGlibä»£ç†"><!---->JDKåŠ¨æ€ä»£ç†å’ŒCGlibä»£ç†<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Netty</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E6%A1%86%E6%9E%B6/Netty/Netty%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5%E5%85%A5%E9%97%A8%E5%B0%8F%E7%BB%93.html" aria-label="NettyåŸºç¡€æ¦‚å¿µå…¥é—¨å°ç»“"><!---->NettyåŸºç¡€æ¦‚å¿µå…¥é—¨å°ç»“<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ä¸­é—´ä»¶"><span class="title"><!---->ä¸­é—´ä»¶</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æ¶ˆæ¯é˜Ÿåˆ—</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ/RabbitMQ%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8.html" aria-label="RabbitMQç®€å•ä½¿ç”¨"><!---->RabbitMQç®€å•ä½¿ç”¨<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Canal</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link active" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/Canal/Canal%E7%9A%84%E4%BD%BF%E7%94%A8.html" aria-label="Canalçš„ä½¿ç”¨"><!---->Canalçš„ä½¿ç”¨<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Sharding-JDBC</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/ä¸­é—´ä»¶/Canal/Canalçš„ä½¿ç”¨/Sharding-JDBCçš„ç®€å•ä½¿ç”¨.html" aria-label="Sharding-JDBCçš„ç®€å•ä½¿ç”¨"><!---->Sharding-JDBCçš„ç®€å•ä½¿ç”¨<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ä¸šåŠ¡ç†è§£"><span class="title"><!---->ä¸šåŠ¡ç†è§£</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%9A%E5%8A%A1%E7%90%86%E8%A7%A3/%E5%AF%B9%E6%94%AF%E4%BB%98%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%B8%AA%E4%BA%BA%E7%90%86%E8%A7%A3.html" aria-label="å¯¹æ”¯ä»˜ç³»ç»Ÿçš„ä¸ªäººç†è§£"><!---->å¯¹æ”¯ä»˜ç³»ç»Ÿçš„ä¸ªäººç†è§£<!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->ä¸€ã€èƒŒæ™¯</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">maijunxuan</span></span><span property="author" content="maijunxuan"></span></span><!----><!----><!----><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 2427 å­—</span><meta property="wordCount" content="2427"></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 8 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT8M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#_1ã€mysqlé…ç½®ç›¸å…³">1ã€mysqlé…ç½®ç›¸å…³</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_1ã€æ£€æµ‹binlogæ˜¯å¦å¼€å¯">1ã€æ£€æµ‹binlogæ˜¯å¦å¼€å¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_2ã€mysqlå¼€å¯binlog">2ã€mysqlå¼€å¯binlog</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_3ã€åˆ›å»ºcanalç”¨æˆ·">3ã€åˆ›å»ºcanalç”¨æˆ·</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#_2ã€canalé…ç½®ç›¸å…³">2ã€canalé…ç½®ç›¸å…³</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_1ã€ä¸‹è½½canal">1ã€ä¸‹è½½canal</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_2ã€é…ç½®ä¸€ä¸ªinstance">2ã€é…ç½®ä¸€ä¸ªinstance</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#_3ã€canal-propertiesé…ç½®ç›¸å…³">3ã€canal.propertiesé…ç½®ç›¸å…³</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_1ã€canal-destinationsé…ç½®">1ã€canal.destinationsé…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_2ã€canal-auto-scané…ç½®">2ã€canal.auto.scané…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_3ã€å¯åŠ¨canal">3ã€å¯åŠ¨canal</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#_1ã€å¼•å…¥ä¾èµ–">1ã€å¼•å…¥ä¾èµ–</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#_2ã€ç¼–å†™å®¢æˆ·ç«¯ä»£ç ">2ã€ç¼–å†™å®¢æˆ·ç«¯ä»£ç </a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#_3ã€æµ‹è¯•ç»“æœ">3ã€æµ‹è¯•ç»“æœ</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h1 id="ä¸€ã€èƒŒæ™¯" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€èƒŒæ™¯"><span>ä¸€ã€èƒŒæ™¯</span></a></h1><p>å·¥ä½œä¸­æœ‰ä¸ªéœ€æ±‚ï¼Œå½“æ•°æ®åº“çš„æ•°æ®å˜æ›´æ—¶ï¼Œå¦å¤–ä¸€ä¸ªç³»ç»Ÿä¸­çš„æ•°æ®è¦èƒ½åŠæ—¶æ„Ÿåº”åˆ°ï¼Œé€šè¿‡è°ƒç ”çŸ¥é“ï¼Œç›‘å¬æ•°æ®åº“çš„<code>binlog</code>å¯ä»¥åšåˆ°ä¸€ä¸ªå‡†å®æ—¶çš„é€šçŸ¥ï¼Œè€Œ<code>canal</code>ä¸»è¦ç”¨é€”æ˜¯åŸºäº MySQL æ•°æ®åº“å¢é‡æ—¥å¿—è§£æï¼Œæä¾›å¢é‡æ•°æ®è®¢é˜…å’Œæ¶ˆè´¹ï¼Œæ­£å¥½æ»¡è¶³éœ€æ±‚ï¼Œæ­¤å¤„è®°å½•ä¸€ä¸‹<code>canal</code>çš„ç®€å•ä½¿ç”¨ã€‚</p><h1 id="äºŒã€canalçš„å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#äºŒã€canalçš„å·¥ä½œåŸç†"><span>äºŒã€canalçš„å·¥ä½œåŸç†</span></a></h1><p><img src="https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202208080239150.webp" alt="canalçš„å·¥ä½œåŸç†"></p><p><strong>æ­¥éª¤ï¼š</strong></p><ol><li>canalæ¨¡æ‹Ÿmysql slaveçš„äº¤äº’åè®®ï¼Œä¼ªè£…è‡ªå·±ä¸ºmysql slaveï¼Œå‘mysql masterå‘é€dumpåè®®</li><li>mysql masteræ”¶åˆ°dumpè¯·æ±‚ï¼Œå¼€å§‹æ¨é€binary logç»™slave(ä¹Ÿå°±æ˜¯canal)</li><li>canalè§£æbinary logå¯¹è±¡(åŸå§‹ä¸ºbyteæµ)</li></ol><h1 id="ä¸‰ã€å®‰è£…canal" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€å®‰è£…canal"><span>ä¸‰ã€å®‰è£…canal</span></a></h1><h2 id="_1ã€mysqlé…ç½®ç›¸å…³" tabindex="-1"><a class="header-anchor" href="#_1ã€mysqlé…ç½®ç›¸å…³"><span>1ã€mysqlé…ç½®ç›¸å…³</span></a></h2><h3 id="_1ã€æ£€æµ‹binlogæ˜¯å¦å¼€å¯" tabindex="-1"><a class="header-anchor" href="#_1ã€æ£€æµ‹binlogæ˜¯å¦å¼€å¯"><span>1ã€æ£€æµ‹binlogæ˜¯å¦å¼€å¯</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">&#39;log_bin&#39;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------+-------+</span>
<span class="token operator">|</span> Variable_name <span class="token operator">|</span> <span class="token keyword">Value</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------+-------+</span>
<span class="token operator">|</span> log_bin       <span class="token operator">|</span> <span class="token keyword">ON</span>    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------+-------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>log_bin</code>çš„å€¼ä¸º<code>ON</code>è¯´æ˜æ‰“å¼€äº†ã€‚</p><h3 id="_2ã€mysqlå¼€å¯binlog" tabindex="-1"><a class="header-anchor" href="#_2ã€mysqlå¼€å¯binlog"><span>2ã€mysqlå¼€å¯binlog</span></a></h3><div class="language-ini line-numbers-mode" data-ext="ini" data-title="ini"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysqld</span><span class="token punctuation">]</span></span>
<span class="token comment">#binlogæ—¥å¿—çš„åŸºæœ¬æ–‡ä»¶åï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å¯åŠ¨mysqlçš„ç”¨æˆ·éœ€è¦å¯¹è¿™ä¸ªç›®å½•(/usr/local/var/mysql/binlog)æœ‰å†™å…¥çš„æƒé™</span>
<span class="token key attr-name">log_bin</span><span class="token punctuation">=</span><span class="token value attr-value">/usr/local/var/mysql/binlog/mysql-bin</span>
<span class="token comment"># é…ç½®binlogæ—¥å¿—çš„æ ¼å¼</span>
<span class="token key attr-name">binlog_format</span> <span class="token punctuation">=</span> <span class="token value attr-value">ROW</span>
<span class="token comment"># é…ç½® MySQL replaction éœ€è¦å®šä¹‰ï¼Œä¸èƒ½å’Œ canal çš„ slaveId é‡å¤</span>
<span class="token key attr-name">server-id</span><span class="token punctuation">=</span><span class="token value attr-value">1</span>
<span class="token comment"># è®¾ç½®ä¸­ç»§æ—¥å¿—çš„è·¯å¾„</span>
<span class="token key attr-name">relay_log</span><span class="token punctuation">=</span><span class="token value attr-value">/usr/local/var/mysql/relaylog/mysql-relay</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ã€åˆ›å»ºcanalç”¨æˆ·" tabindex="-1"><a class="header-anchor" href="#_3ã€åˆ›å»ºcanalç”¨æˆ·"><span>3ã€åˆ›å»ºcanalç”¨æˆ·</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> canal IDENTIFIED <span class="token keyword">BY</span> <span class="token string">&#39;canal&#39;</span><span class="token punctuation">;</span>  
<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">REPLICATION</span> SLAVE<span class="token punctuation">,</span> <span class="token keyword">REPLICATION</span> CLIENT <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">&#39;canal&#39;</span><span class="token variable">@&#39;%&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- GRANT ALL PRIVILEGES ON *.* TO &#39;canal&#39;@&#39;%&#39; ;</span>
FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2ã€canalé…ç½®ç›¸å…³" tabindex="-1"><a class="header-anchor" href="#_2ã€canalé…ç½®ç›¸å…³"><span>2ã€canalé…ç½®ç›¸å…³</span></a></h2><h3 id="_1ã€ä¸‹è½½canal" tabindex="-1"><a class="header-anchor" href="#_1ã€ä¸‹è½½canal"><span>1ã€ä¸‹è½½canal</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code> <span class="token comment"># 1.ä¸‹è½½ deployer</span>
 $ <span class="token function">wget</span> https://github.com/alibaba/canal/releases/download/canal-1.1.5/canal.deployer-1.1.5.tar.gz
 <span class="token comment"># ä¸‹è½½é€‚é…å™¨ï¼Œä¸æ˜¯å¿…é¡»çš„</span>
 $ <span class="token function">wget</span> https://github.com/alibaba/canal/releases/download/canal-1.1.5/canal.adapter-1.1.5.tar.gz 
 <span class="token comment"># ä¸‹è½½ç®¡ç†å°ï¼Œä¸æ˜¯å¿…é¡»çš„</span>
 $ <span class="token function">wget</span> https://github.com/alibaba/canal/releases/download/canal-1.1.5/canal.admin-1.1.5.tar.gz
 <span class="token comment"># ä¸‹è½½ç¤ºä¾‹ç¨‹åº</span>
 $ <span class="token function">wget</span> https://github.com/alibaba/canal/releases/download/canal-1.1.5/canal.example-1.1.5.tar.gz
 
 <span class="token comment"># 2.è§£å‹ deployer (è§£å‹åçš„ç›®å½•è¦å­˜åœ¨)</span>
 <span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> canal.deployer-1.1.5.tar.gz <span class="token parameter variable">-C</span> /Users/huan/soft/canal/deployer/
 
 <span class="token comment"># 3. æŸ¥çœ‹ conf ç›®å½•ç»“æ„</span>
 $ tree conf                  
 conf
 â”œâ”€â”€ canal.properties
 â”œâ”€â”€ canal_local.properties
 â”œâ”€â”€ example
 â”‚   â””â”€â”€ instance.properties
 â”œâ”€â”€ logback.xml
 â”œâ”€â”€ metrics
 â”‚   â””â”€â”€ Canal_instances_tmpl.json
 â””â”€â”€ spring
    â”œâ”€â”€ base-instance.xml
    â”œâ”€â”€ default-instance.xml
    â”œâ”€â”€ file-instance.xml
    â”œâ”€â”€ group-instance.xml
    â”œâ”€â”€ memory-instance.xml
    â””â”€â”€ tsdb
        â”œâ”€â”€ h2-tsdb.xml
        â”œâ”€â”€ mysql-tsdb.xml
        â”œâ”€â”€ sql
        â”‚   â””â”€â”€ create_table.sql
        â””â”€â”€ sql-map
            â”œâ”€â”€ sqlmap-config.xml
            â”œâ”€â”€ sqlmap_history.xml
            â””â”€â”€ sqlmap_snapshot.xml

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€é…ç½®ä¸€ä¸ªinstance" tabindex="-1"><a class="header-anchor" href="#_2ã€é…ç½®ä¸€ä¸ªinstance"><span>2ã€é…ç½®ä¸€ä¸ªinstance</span></a></h3><p><code>instance</code>ï¼šä¸€ä¸ª<code>instance</code>å°±æ˜¯ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¯ä¸ªinstanceé€šé“éƒ½æœ‰å„è‡ªçš„ä¸€ä»½é…ç½®ï¼Œå› ä¸ºæ¯ä¸ªmysqlçš„ipï¼Œå¸å·ï¼Œå¯†ç ç­‰ä¿¡æ¯å„ä¸ç›¸åŒã€‚</p><p>ä¸€ä¸ª<code>canal server</code>å¯ä»¥å­˜åœ¨å¤šä¸ª<code>instance</code>ã€‚</p><h4 id="_1ã€å¤åˆ¶conf-exampleæ–‡ä»¶å¤¹" tabindex="-1"><a class="header-anchor" href="#_1ã€å¤åˆ¶conf-exampleæ–‡ä»¶å¤¹"><span>1ã€å¤åˆ¶<code>conf/example</code>æ–‡ä»¶å¤¹</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">cp</span> <span class="token parameter variable">-r</span> conf/example conf/customer

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>customer</code>å¯ä»¥ç®€å•ç†è§£ä¸ºæ­¤å¤„æˆ‘éœ€è¦é“¾æ¥<code>customer</code>æ•°æ®åº“ï¼Œå› æ­¤å‘½åä¸ºè¿™ä¸ªã€‚</p><h4 id="_2ã€ä¿®æ”¹instanceçš„é…ç½®" tabindex="-1"><a class="header-anchor" href="#_2ã€ä¿®æ”¹instanceçš„é…ç½®"><span>2ã€ä¿®æ”¹instanceçš„é…ç½®</span></a></h4><p><strong>vim conf/customer/instance.properties</strong></p><div class="language-properties line-numbers-mode" data-ext="properties" data-title="properties"><pre class="language-properties"><code><span class="token comment"># mysqlé›†ç¾¤é…ç½®ä¸­çš„serverIdæ¦‚å¿µï¼Œéœ€è¦ä¿è¯å’Œå½“å‰mysqlé›†ç¾¤ä¸­idå”¯ä¸€ (v1.1.xç‰ˆæœ¬ä¹‹åcanalä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œä¸éœ€è¦æ‰‹å·¥æŒ‡å®š)</span>
<span class="token comment"># canal.instance.mysql.slaveId=0</span>
<span class="token comment"># mysqlä¸»åº“é“¾æ¥åœ°å€</span>
<span class="token key attr-name">canal.instance.master.address</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1:3306</span>
<span class="token comment"># mysqlä¸»åº“é“¾æ¥æ—¶èµ·å§‹çš„binlogæ–‡ä»¶</span>
<span class="token key attr-name">canal.instance.master.journal.name</span><span class="token punctuation">=</span>
<span class="token comment"># mysqlä¸»åº“é“¾æ¥æ—¶èµ·å§‹çš„binlogåç§»é‡</span>
<span class="token key attr-name">canal.instance.master.position</span><span class="token punctuation">=</span>
<span class="token comment"># mysqlä¸»åº“é“¾æ¥æ—¶èµ·å§‹çš„binlogçš„æ—¶é—´æˆ³</span>
<span class="token key attr-name">canal.instance.master.timestamp</span><span class="token punctuation">=</span>

<span class="token comment"># mysqlæ•°æ®åº“å¸å·(æ­¤å¤„çš„ç”¨æˆ·åå’Œå¯†ç ä¸º å®‰è£…canal#mysqlé…ç½®ç›¸å…³#åˆ›å»ºcanalç”¨æˆ· è¿™ä¸€æ­¥åˆ›å»ºçš„ç”¨æˆ·åå’Œå¯†ç )</span>
<span class="token key attr-name">canal.instance.dbUsername</span><span class="token punctuation">=</span><span class="token value attr-value">canal</span>
<span class="token comment"># mysqlæ•°æ®åº“å¯†ç </span>
<span class="token key attr-name">canal.instance.dbPassword</span><span class="token punctuation">=</span><span class="token value attr-value">canal</span>
<span class="token comment"># mysql æ•°æ®è§£æç¼–ç </span>
<span class="token key attr-name">canal.instance.connectionCharset</span> <span class="token punctuation">=</span> <span class="token value attr-value">UTF-8</span>

<span class="token comment"># mysql æ•°æ®è§£æå…³æ³¨çš„è¡¨ï¼ŒPerlæ­£åˆ™è¡¨è¾¾å¼ï¼Œå³æˆ‘ä»¬éœ€è¦å…³æ³¨é‚£äº›åº“å’Œé‚£äº›è¡¨çš„binlogæ•°æ®ï¼Œä¹Ÿå¯ä»¥åœ¨canal client apiä¸­æ‰‹åŠ¨è¦†ç›–</span>
<span class="token key attr-name">canal.instance.filter.regex</span><span class="token punctuation">=</span><span class="token value attr-value">.*\\..*</span>
<span class="token comment"># table black regex</span>
<span class="token comment"># mysql æ•°æ®è§£æè¡¨çš„é»‘åå•ï¼Œè¡¨è¾¾å¼è§„åˆ™è§ç™½åå•çš„è§„åˆ™</span>
<span class="token key attr-name">canal.instance.filter.black.regex</span><span class="token punctuation">=</span><span class="token value attr-value">mysql\\.slave_.*</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3ã€instanceæ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#_3ã€instanceæ³¨æ„äº‹é¡¹"><span>3ã€instanceæ³¨æ„äº‹é¡¹</span></a></h4><h5 id="_1ã€é…ç½®éœ€è¦å…³æ³¨é‚£ä¸ªåº“å’Œé‚£ä¸ªè¡¨çš„binlog" tabindex="-1"><a class="header-anchor" href="#_1ã€é…ç½®éœ€è¦å…³æ³¨é‚£ä¸ªåº“å’Œé‚£ä¸ªè¡¨çš„binlog"><span>1ã€é…ç½®éœ€è¦å…³æ³¨é‚£ä¸ªåº“å’Œé‚£ä¸ªè¡¨çš„binlog</span></a></h5><p>ä¿®æ”¹ <code>instance.properties</code>æ–‡ä»¶çš„è¿™ä¸ªå±æ€§<code>canal.instance.filter.regex</code>,è§„åˆ™å¦‚ä¸‹ï¼š</p><ol><li>æ‰€æœ‰è¡¨ï¼š.* or .<em>\..</em></li><li>canal schemaä¸‹æ‰€æœ‰è¡¨ï¼š canal\..*</li><li>canalä¸‹çš„ä»¥canalæ‰“å¤´çš„è¡¨ï¼šcanal\.canal.*</li><li>canal schemaä¸‹çš„ä¸€å¼ è¡¨ï¼šcanal\.test1</li><li>å¤šä¸ªè§„åˆ™ç»„åˆä½¿ç”¨ï¼šcanal\..*,mysql.test1,mysql.test2 (é€—å·åˆ†éš”)</li></ol><h5 id="_2ã€mysqlé“¾æ¥æ—¶çš„èµ·å§‹ä½ç½®" tabindex="-1"><a class="header-anchor" href="#_2ã€mysqlé“¾æ¥æ—¶çš„èµ·å§‹ä½ç½®"><span>2ã€mysqlé“¾æ¥æ—¶çš„èµ·å§‹ä½ç½®</span></a></h5><ul><li>canal.instance.master.journal.name + canal.instance.master.position : ç²¾ç¡®æŒ‡å®šä¸€ä¸ªbinlogä½ç‚¹ï¼Œè¿›è¡Œå¯åŠ¨</li><li>canal.instance.master.timestamp : æŒ‡å®šä¸€ä¸ªæ—¶é—´æˆ³ï¼Œcanalä¼šè‡ªåŠ¨éå†mysql binlogï¼Œæ‰¾åˆ°å¯¹åº”æ—¶é—´æˆ³çš„binlogä½ç‚¹åï¼Œè¿›è¡Œå¯åŠ¨</li><li>ä¸æŒ‡å®šä»»ä½•ä¿¡æ¯ï¼šé»˜è®¤ä»å½“å‰æ•°æ®åº“çš„ä½ç‚¹ï¼Œè¿›è¡Œå¯åŠ¨ã€‚(show master status)</li></ul><h5 id="_3ã€mysqlè§£æå…³æ³¨è¡¨å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#_3ã€mysqlè§£æå…³æ³¨è¡¨å®šä¹‰"><span>3ã€mysqlè§£æå…³æ³¨è¡¨å®šä¹‰</span></a></h5><ul><li>æ ‡å‡†çš„Perlæ­£åˆ™ï¼Œæ³¨æ„è½¬ä¹‰æ—¶éœ€è¦åŒæ–œæ ï¼š\</li></ul><h5 id="_4ã€mysqlé“¾æ¥çš„ç¼–ç " tabindex="-1"><a class="header-anchor" href="#_4ã€mysqlé“¾æ¥çš„ç¼–ç "><span>4ã€mysqlé“¾æ¥çš„ç¼–ç </span></a></h5><ul><li><code>ç›®å‰canalç‰ˆæœ¬ä»…æ”¯æŒä¸€ä¸ªæ•°æ®åº“åªæœ‰ä¸€ç§ç¼–ç </code>ï¼Œå¦‚æœä¸€ä¸ªåº“å­˜åœ¨å¤šä¸ªç¼–ç ï¼Œéœ€è¦é€šè¿‡filter.regexé…ç½®ï¼Œå°†å…¶æ‹†åˆ†ä¸ºå¤šä¸ªcanal instanceï¼Œ<code>ä¸ºæ¯ä¸ªinstanceæŒ‡å®šä¸åŒçš„ç¼–ç </code></li></ul><h2 id="_3ã€canal-propertiesé…ç½®ç›¸å…³" tabindex="-1"><a class="header-anchor" href="#_3ã€canal-propertiesé…ç½®ç›¸å…³"><span>3ã€canal.propertiesé…ç½®ç›¸å…³</span></a></h2><p><strong>vim conf/canal.properties</strong></p><div class="language-properties line-numbers-mode" data-ext="properties" data-title="properties"><pre class="language-properties"><code><span class="token comment"># canal serverç»‘å®šçš„æœ¬åœ°IPä¿¡æ¯ï¼Œå¦‚æœä¸é…ç½®ï¼Œé»˜è®¤é€‰æ‹©ä¸€ä¸ªæœ¬æœºIPè¿›è¡Œå¯åŠ¨æœåŠ¡</span>
<span class="token key attr-name">canal.ip</span> <span class="token punctuation">=</span> <span class="token value attr-value">127.0.0.1</span>
<span class="token comment"># canal serveræä¾›socketæœåŠ¡çš„ç«¯å£</span>
<span class="token key attr-name">canal.port</span> <span class="token punctuation">=</span> <span class="token value attr-value">1111</span>
<span class="token comment"># metrics ç«¯å£</span>
<span class="token key attr-name">canal.metrics.pull.port</span> <span class="token punctuation">=</span> <span class="token value attr-value">11112</span>
<span class="token comment"># canal æœåŠ¡çš„ç”¨æˆ·åï¼ˆå®¢æˆ·ç«¯è¿æ¥çš„æ—¶å€™éœ€è¦è¿™ä¸ªç”¨æˆ·åå’Œå¯†ç ï¼Œä¹Ÿå¯ä»¥ä¸é…ç½®ï¼‰</span>
<span class="token key attr-name">canal.user</span> <span class="token punctuation">=</span> <span class="token value attr-value">canal</span>
<span class="token comment"># canal æœåŠ¡çš„å¯†ç </span>
<span class="token key attr-name">canal.passwd</span> <span class="token punctuation">=</span> <span class="token value attr-value">123456</span>
<span class="token comment"># tcp, kafka, rocketMQ, rabbitMQï¼ˆå¦‚æœæˆ‘ä»¬è¦å°†æ•°æ®å‘é€åˆ°kafkaä¸­ï¼Œåˆ™æ­¤å¤„å†™kafkaï¼Œç„¶åé…ç½®kafkaçš„é…ç½®ï¼Œæ­¤å¤„ä»¥tcpæ¼”ç¤ºï¼‰</span>
<span class="token key attr-name">canal.serverMode</span> <span class="token punctuation">=</span> <span class="token value attr-value">tcp</span>
<span class="token comment"># å½“å‰serverä¸Šéƒ¨ç½²çš„instanceåˆ—è¡¨,æ­¤å¤„å†™ customer ,åˆ™å’Œ conf ç›®å½•åŒçº§ä¸‹å¿…é¡»è¦æœ‰ä¸€ä¸ª customer æ–‡ä»¶å¤¹ï¼Œå³ä¸Šä¸€æ­¥æˆ‘ä»¬åˆ›å»ºçš„ï¼Œå¦‚æœæœ‰å¤šä¸ªinstanceè¯´ï¼Œåˆ™ä»¥è‹±æ–‡çš„é€—å·éš”å¼€</span>
<span class="token key attr-name">canal.destinations</span> <span class="token punctuation">=</span> <span class="token value attr-value">customer</span>
<span class="token comment"># å¦‚æœç³»ç»Ÿæ˜¯1ä¸ªcpuï¼Œé‚£ä¹ˆéœ€è¦å°†è¿™ä¸ªå¹¶è¡Œè®¾ç½®æˆfalse</span>
<span class="token key attr-name">canal.instance.parser.parallel</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p><h3 id="_1ã€canal-destinationsé…ç½®" tabindex="-1"><a class="header-anchor" href="#_1ã€canal-destinationsé…ç½®"><span>1ã€canal.destinationsé…ç½®</span></a></h3><p>åœ¨canal.propertieså®šä¹‰äº†canal.destinationsåï¼Œéœ€è¦åœ¨canal.conf.dirå¯¹åº”çš„ç›®å½•ä¸‹å»ºç«‹åŒåçš„æ–‡ä»¶</p><p><strong>æ¯”å¦‚ï¼š</strong></p><div class="language-properties line-numbers-mode" data-ext="properties" data-title="properties"><pre class="language-properties"><code><span class="token key attr-name">canal.destinations</span> <span class="token punctuation">=</span> <span class="token value attr-value">example1,example2</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ—¶éœ€è¦åˆ›å»ºexample1å’Œexample2ä¸¤ä¸ªç›®å½•ï¼Œæ¯ä¸ªç›®å½•é‡Œå„è‡ªæœ‰ä¸€ä»½instance.properties.</p><p>ps. canalè‡ªå¸¦äº†ä¸€ä»½instance.properties demoï¼Œå¯ç›´æ¥å¤åˆ¶conf/exampleç›®å½•è¿›è¡Œé…ç½®ä¿®æ”¹</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">cp</span> <span class="token parameter variable">-R</span> example example1/
<span class="token function">cp</span> <span class="token parameter variable">-R</span> example example2/

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€canal-auto-scané…ç½®" tabindex="-1"><a class="header-anchor" href="#_2ã€canal-auto-scané…ç½®"><span>2ã€canal.auto.scané…ç½®</span></a></h3><p>å¦‚æœcanal.propertiesæœªå®šä¹‰instanceåˆ—è¡¨ï¼Œä½†å¼€å¯äº†canal.auto.scanæ—¶</p><ul><li>serverç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰«æconfç›®å½•ä¸‹ï¼Œå°†æ–‡ä»¶ååšä¸ºinstance nameï¼Œå¯åŠ¨å¯¹åº”çš„instance</li><li>serverè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šæ ¹æ®canal.auto.scan.intervalå®šä¹‰çš„é¢‘ç‡ï¼Œè¿›è¡Œæ‰«æ <ol><li>å‘ç°ç›®å½•æœ‰æ–°å¢ï¼Œå¯åŠ¨æ–°çš„instance</li><li>å‘ç°ç›®å½•æœ‰åˆ é™¤ï¼Œå…³é—­è€çš„instance</li><li>å‘ç°å¯¹åº”ç›®å½•çš„instance.propertiesæœ‰å˜åŒ–ï¼Œé‡å¯instance</li></ol></li></ul><h3 id="_3ã€å¯åŠ¨canal" tabindex="-1"><a class="header-anchor" href="#_3ã€å¯åŠ¨canal"><span>3ã€å¯åŠ¨canal</span></a></h3><p>1ã€å¯åŠ¨canal</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># å¯åŠ¨canal server</span>
<span class="token function">sh</span> bin/startup.sh

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ã€æŸ¥çœ‹æ—¥å¿—</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># canalæŸ¥çœ‹æ—¥å¿—</span>
<span class="token function">tail</span> <span class="token parameter variable">-f</span> <span class="token parameter variable">-n200</span> logs/canal/canal.log
<span class="token comment"># å¦‚æœcanalå¯åŠ¨å¤±è´¥åˆ™éœ€è¦æŸ¥çœ‹æ­¤æ—¥å¿—</span>
<span class="token function">tail</span> <span class="token parameter variable">-f</span> <span class="token parameter variable">-n200</span> logs/canal/canal_stdout.log

<span class="token comment"># æŸ¥çœ‹instanceæ—¥å¿—,ç”±ä¸Šé¢çš„é…ç½®å¯çŸ¥ï¼Œæˆ‘ä»¬çš„instanceçš„åå­—æ˜¯customer,æ‰€ä»¥çœ‹è¿™ä¸ªæ—¥å¿—. </span>
<span class="token function">tail</span> <span class="token parameter variable">-f</span> <span class="token parameter variable">-n200</span> logs/customer/customer.log

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ã€jdkç‰ˆæœ¬</p><p>å¯åŠ¨çš„æ—¶å€™éœ€è¦æ³¨æ„ä¸€ä¸‹æœ¬åœ°<code>JDK</code>çš„ç‰ˆæœ¬ï¼Œæµ‹è¯•æ—¶å‘ç°ä½¿ç”¨jdk11ä¸èƒ½å¯åŠ¨ï¼Œä½¿ç”¨jdk8å¯ä»¥å¯åŠ¨ã€‚</p><h1 id="å››ã€å®¢æˆ·ç«¯æ¶ˆè´¹canalæ•°æ®" tabindex="-1"><a class="header-anchor" href="#å››ã€å®¢æˆ·ç«¯æ¶ˆè´¹canalæ•°æ®"><span>å››ã€å®¢æˆ·ç«¯æ¶ˆè´¹canalæ•°æ®</span></a></h1><h2 id="_1ã€å¼•å…¥ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_1ã€å¼•å…¥ä¾èµ–"><span>1ã€å¼•å…¥ä¾èµ–</span></a></h2><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.otter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>canal.client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.otter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>canal.protocol<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.otter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>canal.common<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2ã€ç¼–å†™å®¢æˆ·ç«¯ä»£ç " tabindex="-1"><a class="header-anchor" href="#_2ã€ç¼–å†™å®¢æˆ·ç«¯ä»£ç "><span>2ã€ç¼–å†™å®¢æˆ·ç«¯ä»£ç </span></a></h2><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>otter<span class="token punctuation">.</span>canal<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">CanalConnector</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>otter<span class="token punctuation">.</span>canal<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">CanalConnectors</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>otter<span class="token punctuation">.</span>canal<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span></span><span class="token class-name">CanalEntry</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>otter<span class="token punctuation">.</span>canal<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span></span><span class="token class-name">Message</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">InetSocketAddress</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * canal client api çš„ä½¿ç”¨
 * https://github.com/alibaba/canal/wiki/ClientExample
 * æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°ï¼Œå¦‚æœä¿®æ”¹ä¸€ä¸ªsqlè¯­å¥ï¼Œä½†æ˜¯ä¿®æ”¹çš„å€¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œåˆ™æ­¤å¤„ä¸ä¼šç›‘æ§åˆ°ã€‚
 * åŒä¸€ä¸ªå®¢æˆ·ç«¯å¯åŠ¨å¤šæ¬¡ï¼Œåªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯å¯ä»¥è·å–åˆ°æ•°æ®
 *
 * <span class="token keyword">@author</span> huan.fu 2021/5/31 - ä¸Šåˆ10:31
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CanalClientApi</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">String</span> destination <span class="token operator">=</span> <span class="token string">&quot;customer&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ›å»ºä¸€ä¸ª canal é“¾æ¥</span>
        <span class="token class-name">CanalConnector</span> canalConnector <span class="token operator">=</span> <span class="token class-name">CanalConnectors</span><span class="token punctuation">.</span><span class="token function">newSingleConnector</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">11111</span><span class="token punctuation">)</span><span class="token punctuation">,</span> destination<span class="token punctuation">,</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// é“¾æ¥å¯¹åº”çš„canal server</span>
        canalConnector<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è®¢é˜…é‚£ä¸ªåº“çš„é‚£ä¸ªè¡¨ç­‰</span>
        <span class="token doc-comment comment">/**
         * è®¢é˜…è§„åˆ™
         * 1.  æ‰€æœ‰è¡¨ï¼š.*   or  .*\\..*
         * 2.  canal schemaä¸‹æ‰€æœ‰è¡¨ï¼š canal\\..*
         * 3.  canalä¸‹çš„ä»¥canalæ‰“å¤´çš„è¡¨ï¼šcanal\\.canal.*
         * 4.  canal schemaä¸‹çš„ä¸€å¼ è¡¨ï¼šcanal\\.test1
         * 5.  å¤šä¸ªè§„åˆ™ç»„åˆä½¿ç”¨ï¼šcanal\\..*,mysql.test1,mysql.test2 (é€—å·åˆ†éš”)
         */</span>
        canalConnector<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&quot;temp_work\\.customer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// å›æ»šåˆ°æœªè¿›è¡Œ #ack çš„åœ°æ–¹ï¼Œä¸‹æ¬¡fetchçš„æ—¶å€™ï¼Œå¯ä»¥ä»æœ€åä¸€ä¸ªæ²¡æœ‰ #ack çš„åœ°æ–¹å¼€å§‹æ‹¿</span>
        canalConnector<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> batchSize <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// è·å–ä¸€æ‰¹æ•°æ®ï¼Œä¸ä¸€å®šä¼šè·å–åˆ° batchSize æ¡</span>
            <span class="token class-name">Message</span> message <span class="token operator">=</span> canalConnector<span class="token punctuation">.</span><span class="token function">getWithoutAck</span><span class="token punctuation">(</span>batchSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// è·å–æ‰¹æ¬¡id</span>
            <span class="token keyword">long</span> batchId <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// è·å–æ•°æ®</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CanalEntry<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&gt;</span></span> entries <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>batchId <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> entries<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ²¡æœ‰è·å–åˆ°æ•°æ®&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">CanalEntry<span class="token punctuation">.</span>Entry</span> entry <span class="token operator">:</span> entries<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">getEntryType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">CanalEntry<span class="token punctuation">.</span>EntryType</span><span class="token punctuation">.</span><span class="token constant">TRANSACTIONBEGIN</span> <span class="token operator">||</span> entry<span class="token punctuation">.</span><span class="token function">getEntryType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">CanalEntry<span class="token punctuation">.</span>EntryType</span><span class="token punctuation">.</span><span class="token constant">TRANSACTIONEND</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">continue</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token class-name">CanalEntry<span class="token punctuation">.</span>RowChange</span> rowChange<span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    rowChange <span class="token operator">=</span> <span class="token class-name">CanalEntry<span class="token punctuation">.</span>RowChange</span><span class="token punctuation">.</span><span class="token function">parseFrom</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">getStoreValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;è§£æbinlogæ•°æ®å‡ºç°å¼‚å¸¸ , data:&quot;</span> <span class="token operator">+</span> entry<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token class-name">CanalEntry<span class="token punctuation">.</span>EventType</span> eventType <span class="token operator">=</span> rowChange<span class="token punctuation">.</span><span class="token function">getEventType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;================&gt; binlog[%s:%s] , name[%s,%s] , eventType : %s&quot;</span><span class="token punctuation">,</span>
                        entry<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLogfileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> entry<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLogfileOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        entry<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSchemaName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> entry<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTableName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        eventType<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span>eventType <span class="token operator">==</span> <span class="token class-name">CanalEntry<span class="token punctuation">.</span>EventType</span><span class="token punctuation">.</span><span class="token constant">QUERY</span> <span class="token operator">||</span> rowChange<span class="token punctuation">.</span><span class="token function">getIsDdl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;sql =&gt; &quot;</span> <span class="token operator">+</span> rowChange<span class="token punctuation">.</span><span class="token function">getSql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">CanalEntry<span class="token punctuation">.</span>RowData</span> rowData <span class="token operator">:</span> rowChange<span class="token punctuation">.</span><span class="token function">getRowDatasList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>eventType <span class="token operator">==</span> <span class="token class-name">CanalEntry<span class="token punctuation">.</span>EventType</span><span class="token punctuation">.</span><span class="token constant">DELETE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token function">printColumn</span><span class="token punctuation">(</span>rowData<span class="token punctuation">.</span><span class="token function">getBeforeColumnsList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>eventType <span class="token operator">==</span> <span class="token class-name">CanalEntry<span class="token punctuation">.</span>EventType</span><span class="token punctuation">.</span><span class="token constant">INSERT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token function">printColumn</span><span class="token punctuation">(</span>rowData<span class="token punctuation">.</span><span class="token function">getAfterColumnsList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-------&gt; before&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token function">printColumn</span><span class="token punctuation">(</span>rowData<span class="token punctuation">.</span><span class="token function">getBeforeColumnsList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-------&gt; after&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token function">printColumn</span><span class="token punctuation">(</span>rowData<span class="token punctuation">.</span><span class="token function">getAfterColumnsList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            canalConnector<span class="token punctuation">.</span><span class="token function">ack</span><span class="token punctuation">(</span>batchId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printColumn</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CanalEntry<span class="token punctuation">.</span>Column</span><span class="token punctuation">&gt;</span></span> columns<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">CanalEntry<span class="token punctuation">.</span>Column</span> column <span class="token operator">:</span> columns<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>column<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> column<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;    update=&quot;</span> <span class="token operator">+</span> column<span class="token punctuation">.</span><span class="token function">getUpdated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ³¨æ„âš ï¸ï¼š</strong></p><p>ç»æµ‹è¯•ï¼ŒåŒä¸€ä¸ªå®¢æˆ·ç«¯ä»£ç ï¼Œå¯åŠ¨å¤šä»½ï¼Œæ¨¡æ‹Ÿå¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶æ¶ˆè´¹ï¼Œåªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯å¯ä»¥æ¶ˆè´¹æ•°æ®ã€‚</p><h2 id="_3ã€æµ‹è¯•ç»“æœ" tabindex="-1"><a class="header-anchor" href="#_3ã€æµ‹è¯•ç»“æœ"><span>3ã€æµ‹è¯•ç»“æœ</span></a></h2><div class="language-ini line-numbers-mode" data-ext="ini" data-title="ini"><pre class="language-ini"><code>æ²¡æœ‰è·å–åˆ°æ•°æ®
æ²¡æœ‰è·å–åˆ°æ•°æ®
<span class="token punctuation">=</span><span class="token value attr-value">===============&gt; binlog[mysql-bin.000014:5771] , name[temp_work,customer] , eventType : UPDATE</span>
-------&gt; before
<span class="token key attr-name">id : 12    update</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token key attr-name">phone : 123    update</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token key attr-name">address : abcdefg    update</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token key attr-name">column_4 :     update</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
-------&gt; after
<span class="token key attr-name">id : 12    update</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token key attr-name">phone : 123    update</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token key attr-name">address : æ•°æ®æ”¹å˜    update</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">column_4 :     update</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
æ²¡æœ‰è·å–åˆ°æ•°æ®
æ²¡æœ‰è·å–åˆ°æ•°æ®

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°è·å–åˆ°äº†ï¼Œæ”¹å˜åçš„æ•°æ®ã€‚</p><h1 id="äº”ã€æ¶ˆè´¹çš„binlogä¸å­˜åœ¨" tabindex="-1"><a class="header-anchor" href="#äº”ã€æ¶ˆè´¹çš„binlogä¸å­˜åœ¨"><span>äº”ã€æ¶ˆè´¹çš„binlogä¸å­˜åœ¨</span></a></h1><p>1ã€æŸ¥çœ‹æ•°æ®åº“ä¸­binlogæ–‡ä»¶çš„ä½ç½®</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">&#39;log_bin_basename&#39;</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>2ã€æ‰¾åˆ°binlogæ–‡ä»¶å’Œä½ç½®</p><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token comment"># æŸ¥è¯¢ mysql-bin.000026 è¿™ä¸ªbinlogæ–‡ä»¶ï¼Œä»posç‚¹: 4 å¼€å§‹æŸ¥èµ·ï¼Œä¸€å…±æŸ¥è¯¢æŸ¥è¯¢5æ¡</span>
<span class="token keyword">show</span> binlog events <span class="token operator">in</span> <span class="token string">&#39;mysql-bin.000026&#39;</span> <span class="token keyword">from</span> <span class="token number">4</span> <span class="token keyword">limit</span> <span class="token number">5</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ã€åœæ­¢canal-server</p><p>4ã€ä¿®æ”¹<code>instance</code>ä¸‹çš„ <code>instance.properties</code>ä¸‹çš„å¦‚ä¸‹é…ç½®</p><p><img src="https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202209022334753.webp" alt="canal instanceé…ç½®æ–‡ä»¶ä¿®æ”¹"></p><div class="language-properties line-numbers-mode" data-ext="properties" data-title="properties"><pre class="language-properties"><code><span class="token comment"># mysqlä¸»åº“é“¾æ¥æ—¶èµ·å§‹çš„binlogæ–‡ä»¶</span>
<span class="token key attr-name">canal.instance.master.journal.name</span><span class="token punctuation">=</span><span class="token value attr-value">mysql-bin.000026</span>
<span class="token comment"># mysqlä¸»åº“é“¾æ¥æ—¶èµ·å§‹çš„binlogåç§»é‡</span>
<span class="token key attr-name">canal.instance.master.position</span><span class="token punctuation">=</span><span class="token value attr-value">4</span>
<span class="token comment"># mysqlä¸»åº“é“¾æ¥æ—¶èµ·å§‹çš„binlogçš„æ—¶é—´æˆ³</span>
<span class="token key attr-name">canal.instance.master.timestamp</span><span class="token punctuation">=</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5ã€åˆ é™¤<code>meta.data</code>æ–‡ä»¶ã€‚</p><p><strong>æ³¨æ„âš ï¸ï¼š</strong></p><p>å¯èƒ½ä¼šå‡ºç°çš„ä¸€ä¸ªé—®é¢˜: <code>column size is not match for table:temp_work.customer,4 vs 3</code>ï¼Œè¿™ä¸ªæ˜¯å› ä¸ºbinlogä¸­çš„è¡¨ç»“æ„å’Œæˆ‘ä»¬çœŸå®åº“ä¸­çš„è¡¨ç»“æ„å¯¹ä¸èµ·æ¥ã€‚</p></div><!--[--><!----><!--]--><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 1585225345@qq.com">MJX</span><!--]--><!--]--></div></div></footer><!----><!----><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright Â© 2024 maijunxuan </div></footer></div><!--]--><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-2Nmlc3aW.js" defer></script>
  </body>
</html>
