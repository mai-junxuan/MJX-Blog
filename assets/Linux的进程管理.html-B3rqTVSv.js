import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as n,o as l}from"./app-BRkwd1m1.js";const h={};function e(p,s){return l(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="linux的进程管理" tabindex="-1"><a class="header-anchor" href="#linux的进程管理"><span>Linux的进程管理</span></a></h1><h2 id="进程与程序" tabindex="-1"><a class="header-anchor" href="#进程与程序"><span>进程与程序</span></a></h2><h3 id="进程与pid的关系" tabindex="-1"><a class="header-anchor" href="#进程与pid的关系"><span>进程与pid的关系</span></a></h3><p>在程序被执行前，他们不过是硬盘或者其他存储介质中的一个文件。当这些文件被加载到内存中时，系统就会根据执行者的权限属性生成程序执行参数(如下图执行者为root所以程序到内存中时权限属性都是以root为准)，并生成一个唯一标识，即PID。之后基于该程序基于运行的子进程的权限属性也是一句当前这个进程的相关权限。</p><h3 id="子进程" tabindex="-1"><a class="header-anchor" href="#子进程"><span>子进程</span></a></h3><p>由上文我们知道，子进程即由父进程操作中儿诞生的进程，如下所示所示，我们在终端键入bash，再用ps -l查看，可以看到这样一个二维表格，其中pid代表进程唯一标识，而ppid即当前进程的父进程号，可以看到pid为5445的进程ppid为4844，即第一个进程的pid，说明第二个bash就是我们键入bash命令后所加载的新进程</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# ps -l</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">F</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   UID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   PPID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PRI</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  NI</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ADDR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SZ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> WCHAN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  TTY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          TIME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CMD</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   4844</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   4833</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 29192</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> do_wai</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   5445</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   4844</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 29213</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> do_wai</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> R</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   5480</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   5445</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 38331</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      pts/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ps</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="父进程是如何执行子进程的" tabindex="-1"><a class="header-anchor" href="#父进程是如何执行子进程的"><span>父进程是如何执行子进程的</span></a></h3><p>父进程会fork出一个进程，ppid为自己的pid，然后基于fork出来的进程执行exec命令从磁盘中将文件加载到内存中成为当前进程的子进程，而子进程的就是以暂存进程的ppid、pid作为自己的ppid、pid作为程序运行。</p><p><img src="https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202209052014841.png" alt="image-20220905201417116"></p><h3 id="后台进程" tabindex="-1"><a class="header-anchor" href="#后台进程"><span>后台进程</span></a></h3><p>crond每分钟都会区<code>/etc/crontab</code>扫描相关进程,而crond就是我们常说的后台进程，也是常年停留在内存中的进程，这种进程我们也可以称他们为damon(服务)</p><h2 id="linux的多人多任务环境" tabindex="-1"><a class="header-anchor" href="#linux的多人多任务环境"><span>Linux的多人多任务环境</span></a></h2><h3 id="多人环境" tabindex="-1"><a class="header-anchor" href="#多人环境"><span>多人环境</span></a></h3><p>Linux支持多人操作，即使不同用户使用root账号也能运行，原因很简单，每个用户使用即使使用相同用户账号登录，Linux也为为其分配PID来区分两者。</p><h3 id="多任务行为" tabindex="-1"><a class="header-anchor" href="#多任务行为"><span>多任务行为</span></a></h3><p>因为CPU的速度可达Ghz，即每秒钟都能执行<code>10^9</code>个指令，所以即使你在运行多个任务，也几乎不会感觉到阻塞，正是因为CPU的强大，Linux系统才能支持多人多任务</p><h3 id="后台进程-1" tabindex="-1"><a class="header-anchor" href="#后台进程-1"><span>后台进程</span></a></h3><p>我们希望某些指令可以在系统后台运行，然后我们在此期间能够做别的事情，Linux已经给我们提供了这样一个操作，做法也很简单，如下所示，我们希望复制命令可以在后台运行</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 创建一个文件</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# touch file1</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 加个&amp; 该指令就会在后台运行</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# cp file1 file2 &amp;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[1] </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">6006</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="工作管理" tabindex="-1"><a class="header-anchor" href="#工作管理"><span>工作管理</span></a></h2><h3 id="前台进程和后台进程" tabindex="-1"><a class="header-anchor" href="#前台进程和后台进程"><span>前台进程和后台进程</span></a></h3><p>前台进程：我们在终端与操作系统交互的命令就叫做前台进程 后台进程:那些无需和我们进行任何交互且不能使用ctrl+c停止的进程就是后台进程</p><h3 id="job-control的管理" tabindex="-1"><a class="header-anchor" href="#job-control的管理"><span>job control的管理</span></a></h3><h4 id="进程后台执行示例" tabindex="-1"><a class="header-anchor" href="#进程后台执行示例"><span>进程后台执行示例</span></a></h4><p>我们希望打包命令可以在后台运行，如下所示，我们使用tar命令进行压缩的时候加了个&amp;，可以看到在打包过程中我们还可以运行别的命令。而且系统还会为这个进程分配pid为6137，当进程运行结束就会自动弹出一个Done</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# tar -zpcf /tmp/etc.tar.gz /etc/ &amp;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[1] </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">6137</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# tar: Removing leading </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/&#39; from member names</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ls</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">etc.tar.gz  swap</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">[root@localhost tmp]# ll</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">total 143728</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-rw-r--r--. 1 root root  12958457 Jul  1 23:30 etc.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-rw-------. 1 root root 134217728 Jun 30 19:32 swap</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">[1]+  Done                    tar -zpcf /tmp/etc.tar.gz /etc/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">[root@localhost tmp]#</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>有时候我们的命令虽然可以在后台运行，但是会时不时的输出一堆字符串影响我们别的操作如下命令，tar命令的-v选项会将压缩过程中的文件名输出到控制台</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tar</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -zpcvf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /tmp/etc.tar.gz</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>所以我们可以使用数据流重定向将输出结果存到一个文本文件中</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 使用管道流将压缩过程存到日志文件中</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# tar -zpcvf /tmp/etc.tar.gz /etc/ &gt;/tmp/tar.log 2&gt;&amp;1 &amp;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[1] </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">6214</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# ls</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">etc.tar.gz</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  swap</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  tar.log</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[1]+  Done                    tar -zpcvf /tmp/etc.tar.gz /etc/ &gt; /tmp/tar.log 2&gt;&amp;1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]#</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="将进程暂停" tabindex="-1"><a class="header-anchor" href="#将进程暂停"><span>将进程暂停</span></a></h4><p>如下所示，笔者键入两条命令并且都用ctrl+z将其暂停</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# vim ~/.bashrc</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[1]+  Stopped                 vim ~/.bashrc</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# find / print</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[2]+  Stopped                 find / print</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后我们就可以使用jobs命令查看被暂停的进程，如下所示-表示倒二暂停的进程，+号表示倒一个被暂停的进程</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# jobs -l</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[1]-  6456 Stopped                 vim ~/.bashrc</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[2]+  6458 Stopped                 find / print</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更多指令查阅</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@study ~]#  jobs [- - lrs]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">选项与参数：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-l</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：除了列出</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> job</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> number</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 与指令串之外，同时列出</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的号码；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-r</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：仅列出正在背景</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的工作；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：仅列出正在背景当中暂停</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (stop) 的工作。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="将工作调回前台" tabindex="-1"><a class="header-anchor" href="#将工作调回前台"><span>将工作调回前台</span></a></h4><p>键入fg，即可将倒数第一个进程调入前台</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">fg</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>我们使用jobs命令查看当前暂停进程，看到1为vim命令，所以我们使用<code>fg %1</code>，即可回到vim操作</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# jobs -l</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[1]-  6456 Stopped                 vim ~/.bashrc</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[2]+  6458 Stopped                 find / print</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 此时就会回到vim操作</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# fg %1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~/.bashrc</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="让进程在后台运行" tabindex="-1"><a class="header-anchor" href="#让进程在后台运行"><span>让进程在后台运行</span></a></h4><p>如下所示，我们希望搜寻权限为7000的文件，我们按ctrl z使其暂停，又希望他能够继续在后台运行，我们就可以通过bg +暂停时控制台输出的id值，如下命令所示为4，所以我们使用<code>bg %4</code>使其在后台运行。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 键入查询命令并暂停</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# find / -perm /7000 &gt; /tmp/1.txt</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">^Z</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[4]+  Stopped                 find / -perm /7000 &gt; /tmp/1.txt</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 使其调入后台继续running</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# jobs;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">bg</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">jobs</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[2]-  Stopped                 find / print</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[3]   Running                 find / -perm /7000 &gt; /tmp/1.txt &amp;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[4]</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Stopped</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                 find</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -perm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /7000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/tmp/1.txt</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[4]+ find / -perm /7000 &gt; /tmp/1.txt &amp;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[2]</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Stopped</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                 find</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> print</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[3]   Running                 find / -perm /7000 &gt; /tmp/1.txt &amp;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[4]</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Running</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                 find</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -perm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /7000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/tmp/1.txt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="杀死进程" tabindex="-1"><a class="header-anchor" href="#杀死进程"><span>杀死进程</span></a></h4><p>我们希望将jobs中某些暂停的进程杀死，就可以使用kill命令，如下所示</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看jobs</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# jobs</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[2]+  Stopped                 find / print</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 上面显示id为2，我们就用 -9强制将2进程杀死</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# kill -9 %2;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">jobs</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[2]+  Stopped                 find / print</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看是否杀死</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# jobs;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[2]</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Killed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                  find</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> print</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# jobs;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]#</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>更多命令参阅</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@study ~]#  kill - - signal %jobnumber</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@study ~]#  kill - -l l</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">选项与参数：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-l</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：这个是</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的小写，列出目前</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kill</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 能够使用的讯号</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (signal) 有哪些？</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">signal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：代表给予后面接的那个工作什么样的指示啰！用</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> man</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> signal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 可知：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：重新读取一次参数的配置文件</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (类似 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">reload</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：代表与由键盘输入</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ctrl]-c 同样的动作；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-9</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：立刻强制删除一个工作；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-15：以正常的进程方式终止一项工作。与</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -9</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 是不一样的</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="脱机管理问题" tabindex="-1"><a class="header-anchor" href="#脱机管理问题"><span>脱机管理问题</span></a></h3><p>上文介绍的命令虽然可以在后台执行，但这些进程都是基于我们的bash父进程，一旦我们退出终端，这些命令都结束，所以我们可以使用nohup的脱机命令完成进程始终在后台执行</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 编写一个睡眠脚本内容为</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/bin/sleep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 500s</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/bin/echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;I have slept 500 seconds.&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# vim sleep.sh</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 赋权</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# chmod a+x sleep.sh</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# vim sleep.sh</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 使用nohup &amp;后台运行</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# nohup ./sleep.sh &amp;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[1] </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">7860</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# nohup: ignoring input and appending output to ‘nohup.out’</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用其他终端查看，发现仍然运行，说明我们的操作成功了</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# ps -ef|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sleep</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       7860</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   5445</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 00:11</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin/bash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./sleep.sh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       7861</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   7860</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 00:11</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin/sleep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 500s</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       7949</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    783</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 00:11</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sleep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 60</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       7993</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   7878</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 00:12</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> grep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --color=auto</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sleep</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="进程管理" tabindex="-1"><a class="header-anchor" href="#进程管理"><span>进程管理</span></a></h2><h3 id="进程的观察" tabindex="-1"><a class="header-anchor" href="#进程的观察"><span>进程的观察</span></a></h3><h4 id="ps指令" tabindex="-1"><a class="header-anchor" href="#ps指令"><span>ps指令</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">选项与参数：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：所有的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> process</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 均显示出来，与</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 具有同样的效用；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：不与</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> terminal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 有关的所有</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> process</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：有效使用者</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (effective </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) 相关的 process ；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">x</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：通常与</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 这个参数一起使用，可列出较完整信息。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">输出格式规划：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">l</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：较长、较详细的将该</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的的信息列出；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">j</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：工作的格式</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (jobs </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">format</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：做一个更为完整的输出。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>仅观察自己登录的账号所使用的进程</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost zhangshiyu]# ps -l</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 输出结果介绍</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># F 若为4则说明的以root权限开启的，若为1则说明是仅进行fork没有进行实际的exec</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># S 则是进程状态的描述 T说明进程停止 S说明进程在休眠 R说明进程在运行 D说明不可被唤醒 Z则是僵尸进程</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># UID    PID   PPID 分别是用户id 进程id 进程的父进程id</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># C 则是cpu的使用率的说明，单位是百分比</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># PRI  NI则是进程优先级的值 具体后文会展开描述</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># ADDR表示进程在系统内存的哪个位置，若为-则说明是running，sz表示用掉多少内存，WCHAN 表示进程是否在运作中，-则说明在运作中</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># TTY  用户使用的终端位置</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># TIME 表示此进程耗费CPU的时间</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># cmd 该进程是通过什么指令运行的</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">F</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   UID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   PPID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PRI</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  NI</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ADDR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SZ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> WCHAN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  TTY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          TIME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CMD</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> T</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  41946</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  41864</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 55370</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> do_sig</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> passwd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  42718</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  41864</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 58087</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> do_wai</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> su</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  42730</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  42718</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 29238</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> do_wai</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  42926</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  42730</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 57988</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> do_wai</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> su</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  43478</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  42927</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 58087</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> do_wai</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> su</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  43489</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  43478</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 29246</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> do_wai</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> R</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  62668</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  43489</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 38331</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      pts/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ps</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>列出当前在内存中运行的所有进程</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost zhangshiyu]# ps aux</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># USER 该进程属于哪个使用者  </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># PID 当前进程的唯一标识</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># %CPU 当前进程消耗CPU所占用的百分比</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># %MEM 当前进程所消耗内存的百分比</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># VSZ  使用掉的虚拟内存量 </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># RSS 进程固定占用内存的量</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># TTY  为0则说明是网络登录的连接者，1-6则是本机使用者</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># STAT 当前进程状态 标识与上描述的D T R Z S一致</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># START  进程被启动的时间</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># TIME 进程实际使用的CPU运作时间</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># COMMAND 该进程实际使用的命令是什么</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">USER</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %CPU</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %MEM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    VSZ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   RSS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TTY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      STAT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> START</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   TIME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> COMMAND</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">          1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 210328</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  4524</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        Ss</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:09</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/lib/systemd/systemd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --switched-root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --deserialize</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 22</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">          2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [kthreadd]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">          4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;   </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [kworker/0:0H]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">          6</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ksoftirqd/0]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">          7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [migration/0]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">          8</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [rcu_bh]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">          9</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        R</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [rcu_sched]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         10</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;   </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [lru-add-drain]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         11</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [watchdog/0]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         13</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [kdevtmpfs]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         14</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;   </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [netns]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         15</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [khungtaskd]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         16</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;   </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [writeback]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         17</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;   </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [kintegrityd]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         18</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;   </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [bioset]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         19</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;   </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [bioset]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;   </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [bioset]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         21</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;   </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [kblockd]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         22</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;   </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [md]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>列出系统运行的所有进程</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost zhangshiyu]# ps -lA</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">F</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   UID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   PPID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PRI</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  NI</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ADDR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SZ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> WCHAN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  TTY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          TIME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CMD</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 52582</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ep_pol</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        00:00:09</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kthrea</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kthreadd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  60</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -20</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> worker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kworker/0:0H</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      6</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> smpboo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ksoftirqd/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -40</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> smpboo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> migration/0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以进程树的格式 输出进程</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost zhangshiyu]# ps axjf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  PPID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   PGID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    SID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TTY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       TPGID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> STAT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   UID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   TIME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> COMMAND</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [kthreadd]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;       </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [kworker/0:0H]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      6</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ksoftirqd/0]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [migration/0]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      8</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [rcu_bh]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      9</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> R</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [rcu_sched]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     10</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;       </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [lru-add-drain]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     11</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [watchdog/0]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     13</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [kdevtmpfs]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     14</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;       </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [netns]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     15</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [khungtaskd]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     16</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;       </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [writeback]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     17</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;       </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [kintegrityd]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     18</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;       </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">  \\_</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [bioset]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>找出与 cron 与 rsyslog 这两个服务有关的 PID 号码</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost zhangshiyu]# ps aux | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">egrep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;(cron|rsyslogd)&#39;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       1324</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 214432</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  2860</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        Ssl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/sbin/rsyslogd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       1356</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 126388</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   496</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        Ss</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/sbin/crond</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="top指令-动态观察进程的变化" tabindex="-1"><a class="header-anchor" href="#top指令-动态观察进程的变化"><span>top指令(动态观察进程的变化)</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@study ~]#  top [- - d  数 字 ] | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">top</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [- </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bnp]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">选项与参数：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：后面可以接秒数，就是整个进程画面更新的秒数。预设是</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 秒；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：以批次的方式执行</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> top</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ，还有更多的参数可以使用喔！</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">通常会搭配数据流重导向来将批次的结果输出成为文件。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：与</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 搭配，意义是，需要进行几次</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> top</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的输出结果。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：指定某些个</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 来进行观察监测而已。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">在</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> top</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 执行过程当中可以使用的按键指令：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">? ：显示在 top 当中可以输入的按键指令；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">P</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：以</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CPU</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的使用资源排序显示；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：以</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Memory</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的使用资源排序显示；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">N</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：以</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 来排序喔！</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">T</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：由该</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Process</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 使用的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CPU</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 时间累积</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (TIME+) 排序。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">k</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：给予某个</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 一个讯号</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (signal)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">r</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：给予某个</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 重新制订一个</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nice</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 值。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">q</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：离开</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> top</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 软件的按键。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>每个2s输出一次系统资源使用情况</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost zhangshiyu]# top -d 2</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 第一行 代表系统开机时间为17:26:49，运行了20min，有两个用户在用，5 10 15分钟的负载，可以看到笔者的系统都是大于1，说明负载有点严重了</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 第2行 有220个任务，2个运行，2217个休眠，1个停止，0个僵尸进程</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 第三行之后就代表系统资源使用情况了，分别是cpu使用情况(us代表系统用户进程所占百分比，sy代表系统进程所占百分比，id空闲cpu所占的百分比。wa代表等待输入输出的进程所占百分比) 内存使用情况和 swap分区使用情况</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 后续的行输出结果和ps指令差不多不多赘述了 </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">top</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 17:26:49</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> up</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 20:01,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> users,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  load</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> average:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1.10,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1.08,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1.14</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Tasks:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 220</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> total,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> running,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 217</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sleeping,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stopped,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> zombie</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%Cpu(s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">): 71.0 us, 29.0 sy,  0.0 ni,  0.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">KiB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Mem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   995672</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> total,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   147376</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> free,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   594708</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> used,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   253588</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> buff/cache</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">KiB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Swap:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  2279412</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> total,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  1980604</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> free,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   298808</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> used.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   213080</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> avail</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Mem</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> USER</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      PR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  NI</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    VIRT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    RES</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    SHR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %CPU</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %MEM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     TIME+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> COMMAND</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  2526</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  608804</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   4068</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   1180</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> R</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 99.5</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   1115:11</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vmtoolsd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  210328</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   4524</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   2212</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:09.77</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.03</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kthreadd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kworker/0:0H</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.34</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ksoftirqd/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      rt</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> migration/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     8</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rcu_bh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     9</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.89</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rcu_sched</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lru-add-drain</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    11</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      rt</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.22</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> watchdog/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    13</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kdevtmpfs</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    14</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> netns</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    15</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.03</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> khungtaskd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    16</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> writeback</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    17</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kintegrityd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    18</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bioset</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bioset</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    20</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bioset</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    21</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kblockd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将 top 的信息进行 2 次，然后将结果输出到 /tmp/top.txt</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# top -n -b 2&gt;/tmp/top.log</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# ll</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">total</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 131076</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-rw-------.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 134217728</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Jun</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 30</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 19:32</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> swap</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-rw-r--r--.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        34</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Jul</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 17:32</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> top.log</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]#</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们自己的 bash PID 可由 $$ 变量取得，请使用 top 持续观察该 PID</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# top -d 2 -p 43489</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 注意 此时我们在输出界面下按r ，在输入一个数字会修改ni的值，这个值会决定进程的优先级，ni值越大优先级越低</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">top</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 17:34:24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> up</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 20:09,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> users,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  load</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> average:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1.14,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1.14,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1.14</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Tasks:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> total,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> running,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sleeping,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stopped,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> zombie</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">%Cpu(s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">): 69.7 us, 30.3 sy,  0.0 ni,  0.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">KiB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Mem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> :</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   995672</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> total,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   147228</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> free,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   594628</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> used,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   253816</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> buff/cache</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">KiB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Swap:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  2279412</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> total,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  1980604</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> free,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   298808</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> used.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   213144</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> avail</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Mem</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> USER</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      PR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  NI</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    VIRT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    RES</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    SHR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %CPU</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %MEM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     TIME+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> COMMAND</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 43489</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      20</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  116984</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   3044</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   1204</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:00.10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="pstree指令" tabindex="-1"><a class="header-anchor" href="#pstree指令"><span>pstree指令</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@study ~]#  pstree [- - A|U] [- - up]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">选项与参数：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-A</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：各进程树之间的连接以</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ASCII</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 字符来连接；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-U</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：各进程树之间的连接以万国码的字符来连接。在某些终端接口下可能会有错误；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：并同时列出每个</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> process</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PID；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：并同时列出每个</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> process</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的所属账号名称。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以ASCII字符输出当前进程树</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# pstree -A</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemd-+-ModemManager---2*[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{ModemManager}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-NetworkManager---2*[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{NetworkManager}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-VGAuthService</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-2*[abrt-watch-log]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-abrtd</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-accounts-daemon---2*[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{accounts-daemon}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-alsactl</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-at-spi-bus-laun-+-dbus-daemon---</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{dbus-daemon}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |                 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-3*[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{at-spi-bus-laun}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-at-spi2-registr---2*[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{at-spi2-registr}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-atd</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-auditd-+-audispd-+-sedispatch</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         \`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{audispd}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |        </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{auditd}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-avahi-daemon---avahi-daemon</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-bluetoothd</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-boltd---2*[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{boltd}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-chronyd</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-colord---2*[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{colord}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-crond</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-cupsd</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-2*[dbus-daemon---</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{dbus-daemon}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-dbus-launch</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-dconf-service---2*[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{dconf-service}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-dnsmasq---dnsmasq</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-escd---</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{escd}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-evolution-addre-+-evolution-addre---5*[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{evolution-addre}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                 \`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-4*[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{evolution-addre}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-evolution-calen-+-evolution-calen---9*[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{evolution-calen}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |                 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-4*[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{evolution-calen}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-evolution-sourc---3*[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{evolution-sourc}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以ASCII字符输出当前进程树，并显示user和pid，可以看到pstree可以帮我们看到某些进程的父进程，这样我们就可以顺着这棵树找到父进程，并将某些杀不死的进程连着父进程一起消灭</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# pstree -Aup</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemd(1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)-+-ModemManager(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">712</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)-+-{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ModemManager}(730</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |                   </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{ModemManager}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">(738</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-NetworkManager(854</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)-+-{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">NetworkManager}(858</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                     \`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{NetworkManager}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">(862</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-VGAuthService(744</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-abrt-watch-log(710</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-abrt-watch-log(720</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-abrtd(709</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-accounts-daemon(690</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)-+-{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">accounts-daemon}(696</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |                      </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{accounts-daemon}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">(707</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-alsactl(733</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-at-spi-bus-laun(2201</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)-+-dbus-daemon(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2206</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)---{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dbus-daemon}(2207</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                       |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{at-spi-bus-laun}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">(2202</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                       |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{at-spi-bus-laun}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">(2203</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                       \`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{at-spi-bus-laun}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">(2205</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-at-spi2-registr(2211</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)-+-{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">at-spi2-registr}(2214</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |                       </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{at-spi2-registr}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">(2215</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-atd(1357</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-auditd(661</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)-+-audispd(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">663</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)-+-sedispatch(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">665</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">           |</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">             |</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">              \`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{audispd}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">(666</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="进程的管理" tabindex="-1"><a class="header-anchor" href="#进程的管理"><span>进程的管理</span></a></h3><h4 id="kill" tabindex="-1"><a class="header-anchor" href="#kill"><span>kill</span></a></h4><p>格式</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">kill</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -数字</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 进程id</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SIGTRAP      6) SIGABRT      7) SIGBUS       8) SIGFPE</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 9</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SIGKILL     10) SIGUSR1     11) SIGSEGV     12) SIGUSR2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">13</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SIGPIPE     14) SIGALRM     15) SIGTERM     16) SIGSTKFLT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">17</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">21</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">25</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SIGXFSZ     26) SIGVTALRM   27) SIGPROF     28) SIGWINCH</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">29</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SIGIO       30) SIGPWR      31) SIGSYS      34) SIGRTMIN</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">35</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3  38) SIGRTMIN+4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">39</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">43</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">47</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SIGRTMIN+13 48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">51</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SIGRTMAX-13 52) SIGRTMAX-12 53) SIGRTMAX-11 54) SIGRTMAX-10</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">55</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7  58) SIGRTMAX-6</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">59</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">63</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) SIGRTMAX-1  64) SIGRTMAX</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 下面是常用的信号。</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 只有第9种信号(SIGKILL)才可以无条件终止进程，其他信号进程都有权利忽略。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">HUP</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    终端挂断</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">INT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    中断（同</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ctrl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> C）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">QUIT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    退出（同</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ctrl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">KILL</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    9</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    强制终止</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">TERM</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   15</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    终止</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">CONT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   18</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    继续（与STOP相反，fg/bg命令）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">STOP</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    暂停（同</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ctrl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Z）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以 ps 找出 rsyslogd 这个进程的 PID 后，再使用 kill 传送讯息，使得 rsyslogd 可以重新读取配置文件</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# ps aux |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;rsyslogd&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;grep&#39;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       1324</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0.2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 214432</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  2872</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        Ssl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Jul02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0:02</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/sbin/rsyslogd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# kill -1 1324</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]#</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="killall" tabindex="-1"><a class="header-anchor" href="#killall"><span>killall</span></a></h4><p>相比于kill，killall无需关注pid也能将某些进程关闭</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@study ~]#  killall [- - iIe] [command name]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">选项与参数：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：interactive</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的意思，交互式的，若需要删除时，会出现提示字符给用户；</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：exact</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 的意思，表示『后面接的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> command</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 要一致』，但整个完整的指令</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">不能超过</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 15</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 个字符。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-I</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：指令名称</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">可能含参数</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">忽略大小写。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>给予 rsyslogd 这个指令启动的 PID 一个 SIGHUP 的讯</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# killall -1 rsyslogd</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]#</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>范例二：强制终止所有以 httpd 启动的进程 (其实并没有此进程在系统内)</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">killall</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -9</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> httpd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>范例三：依次询问每个 bash 程序是否需要被终止运作！</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# killall -i bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Kill</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">41864</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (y/N)==&gt;按y则把当前命令终端关闭了，所以笔者不继续演示了</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="关于进程的执行顺序" tabindex="-1"><a class="header-anchor" href="#关于进程的执行顺序"><span>关于进程的执行顺序</span></a></h3><p>上文用ps -l命令看到两个进程属性pri和ni，这个就是决定进程优先级的值，这两个值越小优先级越高</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">PRI(new</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) = PRI(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">old</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) + nice</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>CPU在执行队列中不同的进程时会根据优先级确定进程在执行的频率，优先级越高执行次数越多</p><p>由于pri这个值是系统计算的，所以若需要改变进程优先级，我们只能修改ni这个值</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>    root用户nice可以将nice值 -20~19，普通用户只能0~19(避免抢占系统资源进程优先级)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="nice-修改一个新创建的进程的nice" tabindex="-1"><a class="header-anchor" href="#nice-修改一个新创建的进程的nice"><span>nice(修改一个新创建的进程的nice)</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@study ~]#  nice [- n  数 字 ] command</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">选项与参数：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ：后面接一个数值，数值的范围</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -20</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 19。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将后续vim的nice值-5</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# nice -n -5 vim &amp;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[2] </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">65834</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# ps -l -p 65834</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">F</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   UID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   PPID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PRI</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  NI</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ADDR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SZ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> WCHAN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  TTY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          TIME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CMD</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> T</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  65834</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  43489</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  85</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 36807</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> do_sig</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vim</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[2]+  Stopped                 nice -n -5 vim</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="renice-修改当前进程的nice值" tabindex="-1"><a class="header-anchor" href="#renice-修改当前进程的nice值"><span>renice(修改当前进程的nice值)</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# ps -l |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  42730</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  42718</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 29238</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> do_wai</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  43489</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  43478</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  90</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 29246</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> do_wai</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 如下所示将nice改为-10，pri最终变为80-10即70</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# renice -10   43489</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">43489</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (process </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ID</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) old priority 10, new priority -10</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost tmp]# ps -l |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  42730</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  42718</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 29238</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> do_wai</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  43489</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  43478</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  70</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 29246</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> do_wai</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="系统资源的观察" tabindex="-1"><a class="header-anchor" href="#系统资源的观察"><span>系统资源的观察</span></a></h3><h4 id="free-查看系统资源使用情况" tabindex="-1"><a class="header-anchor" href="#free-查看系统资源使用情况"><span>free(查看系统资源使用情况)</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@study ~]#  free [ [- - b|- - k|- - m|- - g|- - h] [- - t] [- - s N - - c N]</span></span>
<span class="line"><span>选项与参数：</span></span>
<span class="line"><span>-b ：直接输入 free 时，显示的单位是 Kbytes，我们可以使用 b(bytes), m(Mbytes)</span></span>
<span class="line"><span>k(Kbytes), 及 g(Gbytes) 来显示单位喔！也可以直接让系统自己指定单位 (-h)</span></span>
<span class="line"><span>-t ：在输出的最终结果，显示物理内存与 swap 的总量。</span></span>
<span class="line"><span>-s ：可以让系统每几秒钟输出一次，不间断的一直输出的意思！对于系统观察挺有效！</span></span>
<span class="line"><span>-c ：与 -s 同时处理～让 free 列出几次的意思～</span></span>
<span class="line"><span>[zhangshiyu@localhost ~]$ free -m</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 如下便是内存和交换分区的资源使用情况，需要了解的是swap分区使用量最好不要超过20%，一旦超过20%，你最好要考虑增加一张内存条了</span></span>
<span class="line"><span>              total        used        free      shared  buff/cache   available</span></span>
<span class="line"><span>Mem:            972         655         113          21         203         155</span></span>
<span class="line"><span>Swap:          2047         157        1890</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="uname查看系统核心相关" tabindex="-1"><a class="header-anchor" href="#uname查看系统核心相关"><span>uname查看系统核心相关</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@study ~]#  uname [- - asrmpi]</span></span>
<span class="line"><span>选项与参数：</span></span>
<span class="line"><span>-a ：所有系统相关的信息，包括底下的数据都会被列出来；</span></span>
<span class="line"><span>-s ：系统核心名称</span></span>
<span class="line"><span>-r ：核心的版本</span></span>
<span class="line"><span>-m ：本系统的硬件名称，例如 i686 或 x86_64 等；</span></span>
<span class="line"><span>-p ：CPU 的类型，与 -m 类似，只是显示的是 CPU 的类型！</span></span>
<span class="line"><span>-i ：硬件的平台 (ix86)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输出系统的基本信息</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[zhangshiyu@localhost ~]$ uname -a</span></span>
<span class="line"><span># 主机名 localhost.localdomain</span></span>
<span class="line"><span># 核心版本3.10.0-1160.el7.x86_64</span></span>
<span class="line"><span># 建立日期 2020 </span></span>
<span class="line"><span># 使用与x86系统</span></span>
<span class="line"><span>Linux localhost.localdomain 3.10.0-1160.el7.x86_64 #1 SMP Mon Oct 19 16:18:59 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux</span></span>
<span class="line"><span>[zhangshiyu@localhost ~]$</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="uptime查看系统运行时长" tabindex="-1"><a class="header-anchor" href="#uptime查看系统运行时长"><span>uptime查看系统运行时长</span></a></h4><p>输出的内容就是top命令的第一行，这里就不多做赘述了</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[zhangshiyu@localhost ~]$ uptime</span></span>
<span class="line"><span> 20:37:25 up  4:10,  3 users,  load average: 0.00, 0.04, 0.08</span></span>
<span class="line"><span>[zhangshiyu@localhost ~]$</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="netstat-网络监控命令" tabindex="-1"><a class="header-anchor" href="#netstat-网络监控命令"><span>netstat(网络监控命令)</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@study ~]#  netstat - - [atunlp]</span></span>
<span class="line"><span>选项与参数：</span></span>
<span class="line"><span>-a ：将目前系统上所有的联机、监听、Socket 数据都列出来</span></span>
<span class="line"><span>-t ：列出 tcp 网络封包的数据</span></span>
<span class="line"><span>-u ：列出 udp 网络封包的数据</span></span>
<span class="line"><span>-n ：不以进程的服务名称，以埠号 (port number) 来显示；</span></span>
<span class="line"><span>-l ：列出目前正在网络监听 (listen) 的服务；</span></span>
<span class="line"><span>-p ：列出该网络服务的进程 PID</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>基础使用</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[zhangshiyu@localhost ~]$ netstat</span></span>
<span class="line"><span># 输出结果</span></span>
<span class="line"><span>Active Internet connections (w/o servers)</span></span>
<span class="line"><span># Proto:使用协议</span></span>
<span class="line"><span># Recv-Q:用户未接受的socket总数，单位为bytes</span></span>
<span class="line"><span># Send-Q:远程主机未确认字节数</span></span>
<span class="line"><span># Local Address:本地主机地址</span></span>
<span class="line"><span># Foreign Address: 远程主机地址</span></span>
<span class="line"><span># State:连接状态</span></span>
<span class="line"><span>Proto Recv-Q Send-Q Local Address           Foreign Address         State</span></span>
<span class="line"><span>tcp        0      0 localhost.localdoma:ssh 192.168.0.107:60960     ESTABLISHED</span></span>
<span class="line"><span>tcp        0     48 localhost.localdoma:ssh 192.168.0.107:60959     ESTABLISHED</span></span>
<span class="line"><span>tcp        0      0 localhost.localdoma:ssh 192.168.0.107:57437     ESTABLISHED</span></span>
<span class="line"><span>tcp        0      0 localhost.localdoma:ssh 192.168.0.107:57436     ESTABLISHED</span></span>
<span class="line"><span>Active UNIX domain sockets (w/o servers)</span></span>
<span class="line"><span>#Proto :基本是unix</span></span>
<span class="line"><span># RefCnt 连接到此的socket进程总数</span></span>
<span class="line"><span>#Flags        联机的旗标</span></span>
<span class="line"><span>#  Type       :socket连接类型 ，STREAM     代表连接要进行确认，DGRAM    不需要确认联机</span></span>
<span class="line"><span># State         连接状态，CONNECTED     表示已连接</span></span>
<span class="line"><span># Path：连接到此程序的socket相关路径</span></span>
<span class="line"><span>Proto RefCnt Flags       Type       State         I-Node   Path</span></span>
<span class="line"><span>unix  2      [ ]         DGRAM                    20023    /var/run/chrony/chronyd.sock</span></span>
<span class="line"><span>unix  3      [ ]         DGRAM                    1416     /run/systemd/notify</span></span>
<span class="line"><span>unix  2      [ ]         DGRAM                    1418     /run/systemd/cgroups-agent</span></span>
<span class="line"><span>unix  5      [ ]         DGRAM                    1436     /run/systemd/journal/socket</span></span>
<span class="line"><span>unix  30     [ ]         DGRAM                    1438     /dev/log</span></span>
<span class="line"><span>unix  2      [ ]         DGRAM                    11980    /run/systemd/shutdownd</span></span>
<span class="line"><span>unix  3      [ ]         STREAM     CONNECTED     40063</span></span>
<span class="line"><span>unix  3      [ ]         STREAM     CONNECTED     32419</span></span>
<span class="line"><span>unix  3      [ ]         STREAM     CONNECTED     19668    /run/systemd/journal/stdout</span></span>
<span class="line"><span>unix  3      [ ]         STREAM     CONNECTED     39952</span></span>
<span class="line"><span>unix  3      [ ]         STREAM     CONNECTED     39946</span></span>
<span class="line"><span>unix  3      [ ]         STREAM     CONNECTED     28931</span></span>
<span class="line"><span>unix  3      [ ]         STREAM     CONNECTED     19614</span></span>
<span class="line"><span>unix  3      [ ]         STREAM     CONNECTED     41069    /run/dbus/system_bus_socket</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>找出当前连接的socket连接进程以及pid</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[zhangshiyu@localhost ~]$ netstat -tulp</span></span>
<span class="line"><span>(No info could be read for &quot;-p&quot;: geteuid()=1000 but you should be root.)</span></span>
<span class="line"><span>Active Internet connections (only servers)</span></span>
<span class="line"><span>Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span></span>
<span class="line"><span>tcp        0      0 0.0.0.0:sunrpc          0.0.0.0:*               LISTEN      -</span></span>
<span class="line"><span>tcp        0      0 0.0.0.0:ssh             0.0.0.0:*               LISTEN      -</span></span>
<span class="line"><span>tcp        0      0 localhost:ipp           0.0.0.0:*               LISTEN      -</span></span>
<span class="line"><span>tcp        0      0 localhost:smtp          0.0.0.0:*               LISTEN      -</span></span>
<span class="line"><span>tcp        0      0 localhos:x11-ssh-offset 0.0.0.0:*               LISTEN      -</span></span>
<span class="line"><span>tcp        0      0 localhost:6011          0.0.0.0:*               LISTEN      -</span></span>
<span class="line"><span>tcp6       0      0 [::]:sunrpc             [::]:*                  LISTEN      -</span></span>
<span class="line"><span>tcp6       0      0 [::]:ssh                [::]:*                  LISTEN      -</span></span>
<span class="line"><span>tcp6       0      0 localhost:ipp           [::]:*                  LISTEN      -</span></span>
<span class="line"><span>tcp6       0      0 localhost:smtp          [::]:*                  LISTEN      -</span></span>
<span class="line"><span>tcp6       0      0 localhos:x11-ssh-offset [::]:*                  LISTEN      -</span></span>
<span class="line"><span>tcp6       0      0 localhost:6011          [::]:*                  LISTEN      -</span></span>
<span class="line"><span>udp        0      0 0.0.0.0:55515           0.0.0.0:*                           -</span></span>
<span class="line"><span>udp        0      0 0.0.0.0:mdns            0.0.0.0:*                           -</span></span>
<span class="line"><span>udp        0      0 localhost:323           0.0.0.0:*                           -</span></span>
<span class="line"><span>udp        0      0 0.0.0.0:952             0.0.0.0:*                           -</span></span>
<span class="line"><span>udp        0      0 0.0.0.0:bootps          0.0.0.0:*                           -</span></span>
<span class="line"><span>udp        0      0 0.0.0.0:sunrpc          0.0.0.0:*                           -</span></span>
<span class="line"><span>udp6       0      0 localhost:323           [::]:*                              -</span></span>
<span class="line"><span>udp6       0      0 [::]:952                [::]:*                              -</span></span>
<span class="line"><span>udp6       0      0 [::]:sunrpc             [::]:*                              -</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="dmesg-分析核心产生的讯息" tabindex="-1"><a class="header-anchor" href="#dmesg-分析核心产生的讯息"><span>dmesg (分析核心产生的讯息)</span></a></h4><p>我们希望知道系统开机的时候某些硬件是否被系统加载到，但是系统开机过程中这些信息都是一闪而过，所以我们就可以使用dmesg 来查阅</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[zhangshiyu@localhost ~]$ dmesg |more</span></span>
<span class="line"><span>[    0.000000] Initializing cgroup subsys cpuset</span></span>
<span class="line"><span>[    0.000000] Initializing cgroup subsys cpu</span></span>
<span class="line"><span>[    0.000000] Initializing cgroup subsys cpuacct</span></span>
<span class="line"><span>[    0.000000] Linux version 3.10.0-1160.el7.x86_64 (mockbuild@kbuilder.bsys.centos.org) (gcc version 4.8.5 20150623 (Red Hat 4.8.5-44) (GCC) ) #1 SMP Mon Oct</span></span>
<span class="line"><span> 19 16:18:59 UTC 2020</span></span>
<span class="line"><span>[    0.000000] Command line: BOOT_IMAGE=/vmlinuz-3.10.0-1160.el7.x86_64 root=/dev/mapper/centos-root ro crashkernel=auto spectre_v2=retpoline rd.lvm.lv=centos</span></span>
<span class="line"><span>/root rd.lvm.lv=centos/swap rhgb quiet LANG=en_US.UTF-8</span></span>
<span class="line"><span>[    0.000000] Disabled fast string operations</span></span>
<span class="line"><span>[    0.000000] e820: BIOS-provided physical RAM map:</span></span>
<span class="line"><span>[    0.000000] BIOS-e820: [mem 0x0000000000000000-0x000000000009ebff] usable</span></span>
<span class="line"><span>[    0.000000] BIOS-e820: [mem 0x000000000009ec00-0x000000000009ffff] reserved</span></span>
<span class="line"><span>[    0.000000] BIOS-e820: [mem 0x00000000000dc000-0x00000000000fffff] reserved</span></span>
<span class="line"><span>[    0.000000] BIOS-e820: [mem 0x0000000000100000-0x000000003fedffff] usable</span></span>
<span class="line"><span>[    0.000000] BIOS-e820: [mem 0x000000003fee0000-0x000000003fefefff] ACPI data</span></span>
<span class="line"><span>[    0.000000] BIOS-e820: [mem 0x000000003feff000-0x000000003fefffff] ACPI NVS</span></span>
<span class="line"><span>[    0.000000] BIOS-e820: [mem 0x000000003ff00000-0x000000003fffffff] usable</span></span>
<span class="line"><span>[    0.000000] BIOS-e820: [mem 0x00000000f0000000-0x00000000f7ffffff] reserved</span></span>
<span class="line"><span>[    0.000000] BIOS-e820: [mem 0x00000000fec00000-0x00000000fec0ffff] reserved</span></span>
<span class="line"><span>[    0.000000] BIOS-e820: [mem 0x00000000fee00000-0x00000000fee00fff] reserved</span></span>
<span class="line"><span>[    0.000000] BIOS-e820: [mem 0x00000000fffe0000-0x00000000ffffffff] reserved</span></span>
<span class="line"><span>[    0.000000] NX (Execute Disable) protection: active</span></span>
<span class="line"><span>[    0.000000] SMBIOS 2.7 present.</span></span>
<span class="line"><span>[    0.000000] DMI: VMware, Inc. VMware Virtual Platform/440BX Desktop Reference Platform, BIOS 6.00 11/12/2020</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>同样的我们也可以使用这条命令查看我们磁盘是否成功加载，以及磁盘对应的文件系统格式</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># 查询系统加载的sda磁盘的情况，匹配sda时忽略大小写</span></span>
<span class="line"><span>[zhangshiyu@localhost ~]$ dmesg |grep -i sda</span></span>
<span class="line"><span>[    3.199217] sd 0:0:0:0: [sda] 44040192 512-byte logical blocks: (22.5 GB/21.0 GiB)</span></span>
<span class="line"><span>[    3.199384] sd 0:0:0:0: [sda] Write Protect is off</span></span>
<span class="line"><span>[    3.199386] sd 0:0:0:0: [sda] Mode Sense: 61 00 00 00</span></span>
<span class="line"><span>[    3.199568] sd 0:0:0:0: [sda] Cache data unavailable</span></span>
<span class="line"><span>[    3.199570] sd 0:0:0:0: [sda] Assuming drive cache: write through</span></span>
<span class="line"><span>[    3.201243]  sda: sda1 sda2</span></span>
<span class="line"><span>[    3.203114] sd 0:0:0:0: [sda] Attached SCSI disk</span></span>
<span class="line"><span>[    6.552787] XFS (sda1): Mounting V5 Filesystem</span></span>
<span class="line"><span>[    6.691573] XFS (sda1): Ending clean mount</span></span>
<span class="line"><span>[11355.991889] EXT4-fs (sda3): mounted filesystem with ordered data mode. Opts: (null)</span></span>
<span class="line"><span>[11356.366564] sda3: WRITE SAME failed. Manually zeroing.</span></span>
<span class="line"><span>[13245.141400] XFS (sda5): Mounting V5 Filesystem</span></span>
<span class="line"><span>[13245.153175] XFS (sda5): Ending clean mount</span></span>
<span class="line"><span>[14089.872450] XFS (sda5): Unmounting Filesystem</span></span>
<span class="line"><span>[14174.239242] XFS (sda5): Mounting V5 Filesystem</span></span>
<span class="line"><span>[14174.253655] XFS (sda5): Ending clean mount</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="vmstat-侦测系统资源变化" tabindex="-1"><a class="header-anchor" href="#vmstat-侦测系统资源变化"><span>vmstat (侦测系统资源变化)</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@study ~]#  vmstat [ - a] [ 延 迟 [ [ 总计侦测 次 数 ]] &lt;==CPU/内存等信息</span></span>
<span class="line"><span>[root@study ~]#  vmstat [ - fs] &lt;==内存相关</span></span>
<span class="line"><span>[root@study ~]#  vmstat [ - S  单 位 ] &lt;==设定显示数据的单位</span></span>
<span class="line"><span>[root@study ~]#  vmstat [- d] &lt;==与磁盘有关</span></span>
<span class="line"><span>[root@study ~]#  vmstat [- p  分区 槽 ] &lt;==与磁盘有关</span></span>
<span class="line"><span>选项与参数：</span></span>
<span class="line"><span>-a ：使用 inactive/active(活跃与否) 取代 buffer/cache 的内存输出信息；</span></span>
<span class="line"><span>-f ：开机到目前为止，系统复制 (fork) 的进程数；</span></span>
<span class="line"><span>-s ：将一些事件 (开机至目前为止) 导致的内存变化情况列表说明；</span></span>
<span class="line"><span>-S ：后面可以接单位，让显示的数据有单位。例如 K/M 取代 bytes 的容量；</span></span>
<span class="line"><span>-d ：列出磁盘的读写总量统计表</span></span>
<span class="line"><span>-p ：后面列出分区槽，可显示该分区槽的读写总量统计表</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>基础使用</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[zhangshiyu@localhost ~]$ vmstat</span></span>
<span class="line"><span># r 等待运行的进程数量，不可被唤醒的进程数量，这两者越多就说明系统越忙碌</span></span>
<span class="line"><span># memory:swpd   代表虚拟内存未被使用的数量，free表示内存未被使用的数量，buff用于缓冲区的内存数量，cache是用于缓存的内存总量</span></span>
<span class="line"><span># swap:si由磁盘将进程读取的数量，so由于内存不足由swap分区写入磁盘的总量，若这两个值过大就说明数据经常在磁盘和内存来回切换，系统性能很差</span></span>
<span class="line"><span># io bi 由磁盘读入的区块数量，bo将区块写入磁盘的数量，这两个值高则说明io频繁</span></span>
<span class="line"><span># system:in被中断的进程数量 cs  每分钟进程切换的数量</span></span>
<span class="line"><span># cpu  us 用户进程消耗cpu时间百分比 sy:系统进程消耗系统时间百分比  id 空闲时间占百分比 wa：等待io时间所占百分比 st:被虚拟机所占用的时间的百分比</span></span>
<span class="line"><span>procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</span></span>
<span class="line"><span> r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st</span></span>
<span class="line"><span> 1  0 162048  63024    360 222168    0    1    57     3   18   24  0  0 100  0  0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="特殊文件与进程" tabindex="-1"><a class="header-anchor" href="#特殊文件与进程"><span>特殊文件与进程</span></a></h2><h3 id="具有suid-sgid权限的指令执行状态" tabindex="-1"><a class="header-anchor" href="#具有suid-sgid权限的指令执行状态"><span>具有SUID/SGID权限的指令执行状态</span></a></h3><p>非root用户拥有passwd的执行权(即拥有suid权限)，当非root用户执行passwd时，在这期间就会拥有passwd的root权限</p><p>如下我们使用非root用户键入passwd后按ctrl z +entrer</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[zhangshiyu@localhost ~]$ passwd</span></span>
<span class="line"><span>Changing password for user zhangshiyu.</span></span>
<span class="line"><span>Changing password for zhangshiyu.</span></span>
<span class="line"><span>(current) UNIX password:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[1]+  Stopped                 passwd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用进程树命令，就可以印证上述所说</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[zhangshiyu@localhost ~]$ pstree -uA</span></span>
<span class="line"><span># 输出 可以看到sshd非root用户键入passwd之后短暂拥有root权限</span></span>
<span class="line"><span>-sshd---sshd(zhangshiyu)---bash-+-passwd(root)</span></span>
<span class="line"><span>        |                                       \`-pstree</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查询已开启文件或者一致性进程开启的文件" tabindex="-1"><a class="header-anchor" href="#查询已开启文件或者一致性进程开启的文件"><span>查询已开启文件或者一致性进程开启的文件</span></a></h3><h4 id="fuser-查看某目录下正在使用该目录的进程" tabindex="-1"><a class="header-anchor" href="#fuser-查看某目录下正在使用该目录的进程"><span>fuser (查看某目录下正在使用该目录的进程)</span></a></h4><p>如果我们想查看当前目录下，我们开启了多少个文件，就可以使用这条命令</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@study ~]#  fuser [- umv] [- k [i] [- signal]] file/dir</span></span>
<span class="line"><span>选项与参数：</span></span>
<span class="line"><span>-u ：除了进程的 PID 之外，同时列出该进程的拥有者；</span></span>
<span class="line"><span>-m ：后面接的那个档名会主动的上提到该文件系统的最顶层，对 umount 不成功很有效！</span></span>
<span class="line"><span>-v ：可以列出每个文件与进程还有指令的完整相关性！</span></span>
<span class="line"><span>-k ：找出使用该文件/目录的 PID ，并试图以 SIGKILL 这个讯号给予该 PID；</span></span>
<span class="line"><span>-i ：必须与 -k 配合，在删除 PID 之前会先询问使用者意愿！</span></span>
<span class="line"><span>-signal：例如 -1 -15 等等，若不加的话，预设是 SIGKILL (-9) 啰！</span></span>
<span class="line"><span>[root@localhost zhangshiyu]# fuser -uv .</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 这里重点介绍一下ACCESS </span></span>
<span class="line"><span>#  c ：此进程在当前的目录下(非次目录)；</span></span>
<span class="line"><span>#   e ：可被触发为执行状态；</span></span>
<span class="line"><span>#    f ：是一个被开启的文件；</span></span>
<span class="line"><span>#  r ：代表顶层目录 (root directory)；</span></span>
<span class="line"><span>#   F ：该文件被开启了，不过在等待回应中；</span></span>
<span class="line"><span>#   m ：可能为分享的动态函式库；</span></span>
<span class="line"><span>#</span></span>
<span class="line"><span>                     USER        PID ACCESS COMMAND</span></span>
<span class="line"><span>/home/zhangshiyu:    zhangshiyu   7112 ..c.. (zhangshiyu)bash</span></span>
<span class="line"><span>                     zhangshiyu   7143 ..c.. (zhangshiyu)sftp-server</span></span>
<span class="line"><span>                     root       8447 ..c.. (root)passwd</span></span>
<span class="line"><span>                     root       8515 ..c.. (root)bash</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>看看proc文件夹下运行的文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@localhost zhangshiyu]# fuser -uv /proc/</span></span>
<span class="line"><span>                     USER        PID ACCESS COMMAND</span></span>
<span class="line"><span>/proc:               root     kernel mount (root)/proc</span></span>
<span class="line"><span>                     rtkit       783 .rc.. (rtkit)rtkit-daemon</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>[root@localhost zhangshiyu]# fuser -muv /proc/</span></span>
<span class="line"><span>                     USER        PID ACCESS COMMAND</span></span>
<span class="line"><span>/proc:               root     kernel mount (root)/proc</span></span>
<span class="line"><span>                     root          1 f.... (root)systemd</span></span>
<span class="line"><span>                     root        537 f.... (root)systemd-journal</span></span>
<span class="line"><span>                     rtkit       783 .rc.. (rtkit)rtkit-daemon</span></span>
<span class="line"><span>                     root        786 f.... (root)udisksd</span></span>
<span class="line"><span>                     root        944 f.... (root)NetworkManager</span></span>
<span class="line"><span>                     root       1219 F.... (root)libvirtd</span></span>
<span class="line"><span>                     root       1618 F.... (root)X</span></span>
<span class="line"><span>                     root       1790 f.... (root)packagekitd</span></span>
<span class="line"><span>                     root       2267 f.... (root)gvfs-udisks2-vo</span></span>
<span class="line"><span>                     root       2368 f.... (root)gsd-housekeepin</span></span>
<span class="line"><span>                     root       2442 f.... (root)gvfsd-trash</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 输出使用到home这个进程的pid</span></span>
<span class="line"><span>[root@localhost zhangshiyu]# echo $$</span></span>
<span class="line"><span>8515</span></span>
<span class="line"><span># 进入home目录查看，果然有一个8515的进程在使用这个文件夹</span></span>
<span class="line"><span>[root@localhost zhangshiyu]# cd /home/</span></span>
<span class="line"><span>[root@localhost home]# fuser -uv .</span></span>
<span class="line"><span>                     USER        PID ACCESS COMMAND</span></span>
<span class="line"><span>/home:               root       8515 ..c.. (root)bash</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这时候我们就可以使用fuser进程尝试卸载，这也说明fuser这条指令常用于卸载那些挂载且正在使用中的文件系统</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@localhost home]# umount /home/</span></span>
<span class="line"><span>umount: /home/: not mounted</span></span>
<span class="line"><span>[root@localhost home]# fuser -mki /home/</span></span>
<span class="line"><span>/home:                   1rce     2rc     4rc     6rc     7rc     8rc     9rc    10rc    11rc    12rc    13rc    14rc    16rc    17rc    18rc    19rc    21rc    22rc    23rc    24rc    26rc    27rc    28rc    29rc    31rc    32rc    33rc    34rc    36rc    39rc    40rc    41rc    42rc    43rc    44rc    45rc    46rc    47rc    48rc    49rc    55rc    56rc    57rc    58rc    66rc    68rc    69rc    71rc    73rc    86rc   123rc   318rc   319rc   322rc   326rc   329rc   330rc   332rc   333rc   334rc   335rc   338rc   339rc   416rc   417rc   428rc   429rc   442rc   443rc   444rc   445rc   446rc   447rc   448rc   449rc   450rc   451rc   452rc   453rc   537rce   568rce   579rce   699rc   700rc   701rc   702rc   703rc   704rc   705rc   706rc   714rc   748rce   750rce   752rce   754rc   755rc   777rce   778rce   779rce   781rce   782rce   783e   784rce   786rce   787rce   792rce   793rce   795rce   797rce   798rce   804rce   810rce   812rce   815rce   846rce   849rce   853rce   856rce   861rce   883rce   891rce   905rc   944rce  1205rce  1208rce  1209rce  1210rce  1219rce  1222rc  1225rce  1226rce  1228rce  1434rce  1444rce  1545rce  1546rce  1616rc  1618rce  1703rce  1780rce  1785rce  1790rce  1871rce  1937rc  1974rce  1988rce  2005rce  2014rce  2015rce  2048rce  2052rce  2057rce  2138rce  2152rce  2157rce  2160rce  2189rce  2218rce  2222rce  2224rce  2227rce  2239rce  2244rce  2249rce  2255rce  2256rce  2265rce  2267rce  2280rce  2288rce  2294rce  2300rce  2305rce  2309rce  2310rce  2312rce  2313rce  2324rce  2327rce  2332rce  2335rce  2336rce  2339rce  2354rce  2361rce  2362rce  2364rce  2365rce  2368rce  2375rce  2377rce  2378rce  2400rce  2418rc  2423rce  2435rce  2442rce  2447rce  2459rce  2464rce  2465rce  2466rce  2475rce  2490rce  2493rce  2499rce  2502rce  2516rce  2524rce  2536rce  2541rce  2606rce  2612rce  2638rce  3411rc  3973rc  4876rc  5370rc  5371rc  5400rc  6036rc  6726rc  6767rc  6768rc  6769rc  6770rc  6771rc  6772rc  6773rc  6774rc  6863rc  6914rc  6915rc  6916rc  6918rc  6951rc  7026rc  7040rce  7103rce  7107rce  7110rce  7112rce  7136rce  7143rce  7382rc  7759rc  7828rc  8239rce  8447rce  8505rc  8506rce  8515rce  8556rc  8653rc  8715rc  8730rce</span></span>
<span class="line"><span>Kill process 1 ? (y/N) n</span></span>
<span class="line"><span>Kill process 2 ? (y/N) ^C</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当然这条指令也同样适合用于文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@localhost home]# find /run/ -type p</span></span>
<span class="line"><span>/run/dmeventd-client</span></span>
<span class="line"><span>/run/dmeventd-server</span></span>
<span class="line"><span>/run/systemd/inhibit/12.ref</span></span>
<span class="line"><span>/run/systemd/inhibit/11.ref</span></span>
<span class="line"><span>/run/systemd/inhibit/10.ref</span></span>
<span class="line"><span>/run/systemd/inhibit/8.ref</span></span>
<span class="line"><span>/run/systemd/inhibit/4.ref</span></span>
<span class="line"><span>/run/systemd/inhibit/2.ref</span></span>
<span class="line"><span>/run/systemd/inhibit/1.ref</span></span>
<span class="line"><span>/run/systemd/sessions/39.ref</span></span>
<span class="line"><span>/run/systemd/sessions/38.ref</span></span>
<span class="line"><span>/run/systemd/sessions/1.ref</span></span>
<span class="line"><span>/run/systemd/initctl/fifo</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[root@localhost home]# fuser -uv /run/systemd/inhibit/1.ref</span></span>
<span class="line"><span>                     USER        PID ACCESS COMMAND</span></span>
<span class="line"><span>/run/systemd/inhibit/1.ref:</span></span>
<span class="line"><span>                     root        804 F.... (root)ModemManager</span></span>
<span class="line"><span>                     root        856 f.... (root)systemd-logind</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="lsof-查看进程使用了那些文件" tabindex="-1"><a class="header-anchor" href="#lsof-查看进程使用了那些文件"><span>lsof (查看进程使用了那些文件)</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@study ~]#  lsof [- - aUu] [+d]</span></span>
<span class="line"><span>选项与参数：</span></span>
<span class="line"><span>-a ：多项数据需要『同时成立』才显示出结果时！</span></span>
<span class="line"><span>-U ：仅列出 Unix like 系统的 socket 文件类型；</span></span>
<span class="line"><span>-u ：后面接 username，列出该使用者相关进程所开启的文件；</span></span>
<span class="line"><span>+d ：后面接目录，亦即找出某个目录底下已经被开启的文件！</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>基础示例</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@localhost home]# lsof</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 可以看到systemd这个命令用到了根目录</span></span>
<span class="line"><span></span></span>
<span class="line"><span>COMMAND    PID  TID           USER   FD      TYPE             DEVICE  SIZE/OFF       NODE NAME</span></span>
<span class="line"><span>systemd      1                root  cwd       DIR              253,0       251         64 /</span></span>
<span class="line"><span>systemd      1                root  rtd       DIR              253,0       251         64 /</span></span>
<span class="line"><span>systemd      1                root  txt       REG              253,0   1632776   17448437 /usr/lib/systemd/systemd</span></span>
<span class="line"><span>systemd      1                root  mem       REG              253,0     20064     153193 /usr/lib64/libuuid.so.1.3.0</span></span>
<span class="line"><span>systemd      1                root  mem       REG              253,0    265576     900547 /usr/lib64/libblkid.so.1.1.0</span></span>
<span class="line"><span>systemd      1                root  mem       REG              253,0     90248     153189 /usr/lib64/libz.so.1.2.7</span></span>
<span class="line"><span>systemd      1                root  mem       REG              253,0    157424     154974 /usr/lib64/liblzma.so.5.2.2</span></span>
<span class="line"><span>systemd      1                root  mem       REG              253,0     23968     154955 /usr/lib64/libcap-ng.so.0.0.0</span></span>
<span class="line"><span>systemd      1                root  mem       REG              253,0     19896     155185 /usr/lib64/libattr.so.1.1.0</span></span>
<span class="line"><span>systemd      1                root  mem       REG              253,0     19248     360823 /usr/lib64/libdl-2.17.so</span></span>
<span class="line"><span>systemd      1                root  mem       REG              253,0    402384     377014 /usr/lib64/libpcre.so.1.2.0</span></span>
<span class="line"><span>systemd      1                root  mem       REG              253,0   2156272     360817 /usr/lib64/libc-2.17.so</span></span>
<span class="line"><span>systemd      1                root  mem       REG              253,0    142144     360843 /usr/lib64/libpthread-2.17.so</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看root用户所开启的socket进程所用到的文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@localhost home]# lsof -u root -a -U</span></span>
<span class="line"><span>COMMAND    PID USER   FD   TYPE             DEVICE SIZE/OFF  NODE NAME</span></span>
<span class="line"><span>systemd      1 root   12u  unix 0xffff9f5f79d7bb80      0t0 10584 /run/systemd/private</span></span>
<span class="line"><span>systemd      1 root   13u  unix 0xffff9f5f61628440      0t0 37290 /run/systemd/journal/stdout</span></span>
<span class="line"><span>systemd      1 root   15u  unix 0xffff9f5f6162ea40      0t0 37291 /run/systemd/journal/stdout</span></span>
<span class="line"><span>systemd      1 root   16u  unix 0xffff9f5f4c405d80      0t0 37294 /run/systemd/journal/stdout</span></span>
<span class="line"><span>systemd      1 root   17u  unix 0xffff9f5f4c400440      0t0 37295 /run/systemd/journal/stdout</span></span>
<span class="line"><span>systemd      1 root   18u  unix 0xffff9f5f4c404400      0t0 36160 /run/systemd/journal/stdout</span></span>
<span class="line"><span>systemd      1 root   21u  unix 0xffff9f5f7553b740      0t0 11980 /run/systemd/shutdownd</span></span>
<span class="line"><span>systemd      1 root   22u  unix 0xffff9f5f7553c840      0t0 11982 /run/lvm/lvmpolld.socket</span></span>
<span class="line"><span>systemd      1 root   23u  unix 0xffff9f5f758c8000      0t0  1416 /run/systemd/notify</span></span>
<span class="line"><span>systemd      1 root   25u  unix 0xffff9f5f758c8440      0t0  1418 /run/systemd/cgroups-agent</span></span>
<span class="line"><span>systemd      1 root   26u  unix 0xffff9f5f7553cc80      0t0 11988 /run/lvm/lvmetad.socket</span></span>
<span class="line"><span>systemd      1 root   28u  unix 0xffff9f5f758c8cc0      0t0  1433 /run/systemd/journal/stdout</span></span>
<span class="line"><span>systemd      1 root   29u  unix 0xffff9f5f758c9100      0t0  1436 /run/systemd/journal/socket</span></span>
<span class="line"><span>systemd      1 root   30u  unix 0xffff9f5f758c9540      0t0  1438 /dev/log</span></span>
<span class="line"><span>systemd      1 root   35u  unix 0xffff9f5f7553d0c0      0t0 12259 /run/udev/control</span></span>
<span class="line"><span>systemd      1 root   36u  unix 0xffff9f5f7553ee80      0t0 17498 socket</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看系统目前开启的硬件装置</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@localhost home]# lsof +d /dev/</span></span>
<span class="line"><span>COMMAND    PID           USER   FD   TYPE             DEVICE SIZE/OFF  NODE NAME</span></span>
<span class="line"><span>systemd      1           root    0u   CHR                1,3      0t0  1028 /dev/null</span></span>
<span class="line"><span>systemd      1           root    1u   CHR                1,3      0t0  1028 /dev/null</span></span>
<span class="line"><span>systemd      1           root    2u   CHR                1,3      0t0  1028 /dev/null</span></span>
<span class="line"><span>systemd      1           root   30u  unix 0xffff9f5f758c9540      0t0  1438 /dev/log</span></span>
<span class="line"><span>systemd      1           root   31r   CHR             10,235      0t0  1126 /dev/autofs</span></span>
<span class="line"><span>kdevtmpfs   38           root  cwd    DIR                0,5     3380  1025 /dev</span></span>
<span class="line"><span>kdevtmpfs   38           root  rtd    DIR                0,5     3380  1025 /dev</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看root用户使用bash时所用到的文件</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@localhost home]# lsof -u root |grep bash</span></span>
<span class="line"><span>ksmtuned   891 root  txt       REG              253,0    964536   50414404 /usr/bin/bash</span></span>
<span class="line"><span>bash      8515 root  cwd       DIR              253,0        24   50331764 /home</span></span>
<span class="line"><span>bash      8515 root  rtd       DIR              253,0       251         64 /</span></span>
<span class="line"><span>bash      8515 root  txt       REG              253,0    964536   50414404 /usr/bin/bash</span></span>
<span class="line"><span>bash      8515 root  mem       REG              253,0     61560     360835 /usr/lib64/libnss_files-2.17.so</span></span>
<span class="line"><span>bash      8515 root  mem       REG              253,0 106172832     376961 /usr/lib/locale/locale-archive</span></span>
<span class="line"><span>bash      8515 root  mem       REG              253,0   2156272     360817 /usr/lib64/libc-2.17.so</span></span>
<span class="line"><span>bash      8515 root  mem       REG              253,0     19248     360823 /usr/lib64/libdl-2.17.so</span></span>
<span class="line"><span>bash      8515 root  mem       REG              253,0    174576     376997 /usr/lib64/libtinfo.so.5.9</span></span>
<span class="line"><span>bash      8515 root  mem       REG              253,0    163312     360810 /usr/lib64/ld-2.17.so</span></span>
<span class="line"><span>bash      8515 root  mem       REG              253,0     26970   16888728 /usr/lib64/gconv/gconv-modules.cache</span></span>
<span class="line"><span>bash      8515 root    0u      CHR              136,1       0t0          4 /dev/pts/1</span></span>
<span class="line"><span>bash      8515 root    1u      CHR              136,1       0t0          4 /dev/pts/1</span></span>
<span class="line"><span>bash      8515 root    2u      CHR              136,1       0t0          4 /dev/pts/1</span></span>
<span class="line"><span>bash      8515 root  255u      CHR              136,1       0t0          4 /dev/pts/1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="pidof-找出某支正在执行的程序的-pid" tabindex="-1"><a class="header-anchor" href="#pidof-找出某支正在执行的程序的-pid"><span>pidof (找出某支正在执行的程序的 PID)</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@study ~]#  pidof [- - sx] program_name</span></span>
<span class="line"><span>选项与参数：</span></span>
<span class="line"><span>-s ：仅列出一个 PID 而不列出所有的 PID</span></span>
<span class="line"><span>-x ：同时列出该 program name 可能的 PPID 那个进程的 PID</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用示例</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@localhost home]# pidof systemd rsyslogd</span></span>
<span class="line"><span># 可以看到pid分别是1 和1208</span></span>
<span class="line"><span>1 1208</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,167)])])}const d=i(h,[["render",e]]),r=JSON.parse('{"path":"/%E5%B7%A5%E5%85%B7/Linux/Linux%E7%9A%84%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86.html","title":"Linux的进程管理","lang":"zh-CN","frontmatter":{"description":"Linux的进程管理 进程与程序 进程与pid的关系 在程序被执行前，他们不过是硬盘或者其他存储介质中的一个文件。当这些文件被加载到内存中时，系统就会根据执行者的权限属性生成程序执行参数(如下图执行者为root所以程序到内存中时权限属性都是以root为准)，并生成一个唯一标识，即PID。之后基于该程序基于运行的子进程的权限属性也是一句当前这个进程的相关...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Linux的进程管理\\",\\"image\\":[\\"https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202209052014841.png\\"],\\"dateModified\\":\\"2023-06-13T21:01:35.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"maijunxuan\\",\\"email\\":\\"maijunxuan0309@gmail.com\\"}]}"],["meta",{"property":"og:url","content":"https://maijunxuan.cn/%E5%B7%A5%E5%85%B7/Linux/Linux%E7%9A%84%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86.html"}],["meta",{"property":"og:site_name","content":"麦俊轩的博客"}],["meta",{"property":"og:title","content":"Linux的进程管理"}],["meta",{"property":"og:description","content":"Linux的进程管理 进程与程序 进程与pid的关系 在程序被执行前，他们不过是硬盘或者其他存储介质中的一个文件。当这些文件被加载到内存中时，系统就会根据执行者的权限属性生成程序执行参数(如下图执行者为root所以程序到内存中时权限属性都是以root为准)，并生成一个唯一标识，即PID。之后基于该程序基于运行的子进程的权限属性也是一句当前这个进程的相关..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202209052014841.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-06-13T21:01:35.000Z"}],["meta",{"property":"article:modified_time","content":"2023-06-13T21:01:35.000Z"}]]},"git":{"createdTime":1662395905000,"updatedTime":1686690095000,"contributors":[{"name":"MJX","username":"MJX","email":"1585225345@qq.com","commits":3,"url":"https://github.com/MJX"}]},"readingTime":{"minutes":30.89,"words":9266},"filePathRelative":"工具/Linux/Linux的进程管理.md","excerpt":"\\n<h2>进程与程序</h2>\\n<h3>进程与pid的关系</h3>\\n<p>在程序被执行前，他们不过是硬盘或者其他存储介质中的一个文件。当这些文件被加载到内存中时，系统就会根据执行者的权限属性生成程序执行参数(如下图执行者为root所以程序到内存中时权限属性都是以root为准)，并生成一个唯一标识，即PID。之后基于该程序基于运行的子进程的权限属性也是一句当前这个进程的相关权限。</p>\\n<h3>子进程</h3>\\n<p>由上文我们知道，子进程即由父进程操作中儿诞生的进程，如下所示所示，我们在终端键入bash，再用ps -l查看，可以看到这样一个二维表格，其中pid代表进程唯一标识，而ppid即当前进程的父进程号，可以看到pid为5445的进程ppid为4844，即第一个进程的pid，说明第二个bash就是我们键入bash命令后所加载的新进程</p>","autoDesc":true}');export{d as comp,r as data};
