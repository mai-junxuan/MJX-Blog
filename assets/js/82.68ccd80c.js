(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{354:function(a,t,s){"use strict";s.r(t);var n=s(10),e=Object(n.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[a._v("#")]),a._v(" 问题")]),a._v(" "),t("p",[a._v("笔者最近创建一个模块引入"),t("code",[a._v("mongoDB")]),a._v("相关依赖，启动时出现下面这个问题，很明显是项目中某些依赖的"),t("code",[a._v("log4j")]),a._v("和"),t("code",[a._v("slf4j")]),a._v("依赖冲突了，所以我们必须定位到导致冲突的依赖并将这些依赖排除。")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("SLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("jar:file:/E:/repository/org/apache/logging/log4j/log4j-slf4j-impl/2.11.2/log4j-slf4j-impl-2.11.2.jar"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("/org/slf4j/impl/StaticLoggerBinder.class"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nSLF4J: Found binding "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("jar:file:/E:/repository/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("/org/slf4j/impl/StaticLoggerBinder.class"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nSLF4J: See http://www.slf4j.org/codes.html"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#multiple_bindings for an explanation.")]),a._v("\nSLF4J: Actual binding is of "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("type")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("org.apache.logging.slf4j.Log4jLoggerFactory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\nException "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" thread "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"main"')]),a._v(" java.lang.StackOverflowError\n\tat org.apache.logging.log4j.util.StackLocator.getCallerClass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("StackLocator.java:108"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat org.apache.logging.log4j.util.StackLocator.getCallerClass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("StackLocator.java:121"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat org.apache.logging.log4j.util.StackLocatorUtil.getCallerClass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("StackLocatorUtil.java:55"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat org.apache.logging.slf4j.Log4jLoggerFactory.getContext"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Log4jLoggerFactory.java:42"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat org.apache.logging.log4j.spi.AbstractLoggerAdapter.getLogger"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("AbstractLoggerAdapter.java:46"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat org.apache.logging.slf4j.Log4jLoggerFactory.getLogger"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Log4jLoggerFactory.java:29"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\tat org.slf4j.LoggerFactory.getLogger"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("LoggerFactory.java:358"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br")])]),t("h2",{attrs:{id:"解决思路"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决思路"}},[a._v("#")]),a._v(" 解决思路")]),a._v(" "),t("h3",{attrs:{id:"下载安装maven-helper"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载安装maven-helper"}},[a._v("#")]),a._v(" 下载安装Maven Helper")]),a._v(" "),t("p",[a._v("查阅网上资料大部分答案都推荐下载"),t("code",[a._v("Maven Helper")]),a._v("，所以笔者也下载了这个插件，通过这个插件定位到冲突的日志依赖。")]),a._v(" "),t("p",[a._v("如下图所示，完成下载后重启一下"),t("code",[a._v("IDEA")]),a._v("，就可以使用了。")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202304021053501.png",alt:"Maven Helper"}})]),a._v(" "),t("h3",{attrs:{id:"查找冲突依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查找冲突依赖"}},[a._v("#")]),a._v(" 查找冲突依赖")]),a._v(" "),t("p",[a._v("打开"),t("code",[a._v("pom")]),a._v("文件就会"),t("code",[a._v("text")]),a._v("右边多了一个依赖分析的tab栏。我们点入查看详情")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202304021053740.png",alt:"在这里插入图片描述"}})]),a._v(" "),t("p",[a._v("如下图，考虑到是存在不同的日志依赖导致冲突，所以笔者在搜索栏搜索"),t("code",[a._v("log")]),a._v("，可以看到一大块蓝绿的部分，他们分别是"),t("code",[a._v("mongoDB")]),a._v("自带的日志依赖和我们自己引入了"),t("code",[a._v("log4j")]),a._v("依赖都存在系统的"),t("code",[a._v("log4j-api")]),a._v("，所以我们必须手动的将"),t("code",[a._v("mongoDB")]),a._v("中蓝绿部分的依赖移除。")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202304021053536.png",alt:"在这里插入图片描述"}})]),a._v(" "),t("h3",{attrs:{id:"排除冲突的依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#排除冲突的依赖"}},[a._v("#")]),a._v(" 排除冲突的依赖")]),a._v(" "),t("p",[a._v("如下所示，根据上文蓝绿色定位到的冲突的依赖，选择一个将其移除即可")]),a._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[a._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!--mongodb依赖--\x3e")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n            "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("org.springframework.boot"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n            "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("spring-boot-starter-data-mongodb-reactive"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n            "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("exclusions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("exclusion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("org.springframework.boot"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("spring-boot-starter-logging"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n                "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("exclusion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n            "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("exclusions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br")])]),t("h3",{attrs:{id:"启动查看是否解决问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动查看是否解决问题"}},[a._v("#")]),a._v(" 启动查看是否解决问题")]),a._v(" "),t("p",[a._v("可以看到项目正常启动，我们的依赖移除步骤是正确的。")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202304021053568.png",alt:"在这里插入图片描述"}})]),a._v(" "),t("h2",{attrs:{id:"小结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[a._v("#")]),a._v(" 小结")]),a._v(" "),t("p",[a._v("本次问题解决过程中一开始是基于网上答案，通过"),t("code",[a._v("Maven Helper")]),a._v("搜索"),t("code",[a._v("logback")]),a._v("并移除其中一个"),t("code",[a._v("logback")]),a._v("，移除后发现还是没有解决问题，猜测可能是项目中还存在冲突的日志依赖，所以笔者索性直接搜索"),t("code",[a._v("log")]),a._v("，果然定位到更加根源的问题"),t("code",[a._v("(log4j冲突)")]),a._v("。 所以我们日常排错过程中，找到思路时尝试解决问题却没有完全解决时，建议根据现象进一步推测是否我们定位到的问题并没有完全解决。就以本次冲突解决为例，我们根据网上答案排除的依赖却还是报错，原因大概率是依赖冲突还是存在，我们不妨增加搜索面去定位问题。")])])}),[],!1,null,null,null);t.default=e.exports}}]);