(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{357:function(e,s,a){"use strict";a.r(s);var n=a(10),t=Object(n.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h3",{attrs:{id:"spring-bean的作用域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring-bean的作用域"}},[e._v("#")]),e._v(" Spring bean的作用域")]),e._v(" "),s("p",[e._v("阅读了一下"),s("code",[e._v("Spring")]),e._v("官方文档中，关于"),s("code",[e._v("bean")]),e._v("的作用域这一块的内容。"),s("code",[e._v("Spring5")]),e._v("官方文档中，共介绍了六种"),s("code",[e._v("bean")]),e._v("作用域，这篇文章来简单介绍一下这六种作用域的含义。")]),e._v(" "),s("h4",{attrs:{id:"_1-bean作用域的种类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-bean作用域的种类"}},[e._v("#")]),e._v(" 1.Bean作用域的种类")]),e._v(" "),s("p",[e._v("在"),s("code",[e._v("Spring")]),e._v("官方文档中，共提到了"),s("code",[e._v("6")]),e._v("种不同的"),s("code",[e._v("Bean")]),e._v("作用域，分别是：")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202207151759375.png",alt:"image-20220715175906301"}})]),e._v(" "),s("p",[e._v("需要注意的是，前两种是"),s("code",[e._v("Spring")]),e._v("中"),s("code",[e._v("bean")]),e._v("的基本作用域，而后四种，算是扩展的作用域，只能在"),s("code",[e._v("web")]),e._v("应用中使用。下面我就来分别介绍一下这"),s("code",[e._v("6")]),e._v("种不同的作用域。")]),e._v(" "),s("h5",{attrs:{id:"_1-1-singleton作用域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-singleton作用域"}},[e._v("#")]),e._v(" 1.1 singleton作用域")]),e._v(" "),s("p",[s("strong",[e._v("singleton（单例）是Spring中，bean默认的作用域")]),e._v("。若一个"),s("code",[e._v("bean")]),e._v("的作用域是单例的，那么每个"),s("code",[e._v("IoC")]),e._v("容器只会创建这个"),s("code",[e._v("bean")]),e._v("的一个实例对象。所有对这个"),s("code",[e._v("bean")]),e._v("的依赖，以及获取这个"),s("code",[e._v("bean")]),e._v("的代码，拿到的都是同一个"),s("code",[e._v("bean")]),e._v("实例。"),s("code",[e._v("Spring")]),e._v("容器在创建这个"),s("code",[e._v("bean")]),e._v("后，会将它缓存在容器中（实际上是放在一个"),s("code",[e._v("ConcurrentHashMap")]),e._v("中）。"),s("strong",[e._v("Spring中的bean不是线程安全的，所以只有在我们只关注bean能够提供的功能，而不在意它的状态（属性）时，才应该使用这个作用域")]),e._v("。")]),e._v(" "),s("p",[e._v("需要注意的一点是，这里所说的单例，和设计模式中所提到的单例模式不同。设计模式中的单例，是强制一个类有且只有一个对象，我们如果不通过特殊的手段，将无法为这个单例类创建多个对象。而"),s("code",[e._v("Spring")]),e._v("中的单例作用域不同，这里的单例指的是在一个"),s("code",[e._v("Spring")]),e._v("容器中，只会缓存"),s("code",[e._v("bean")]),e._v("的唯一对象，所有通过容器获取这个"),s("code",[e._v("bean")]),e._v("的方式，最终拿到的都是同一个对象。但是在不同的"),s("code",[e._v("Spring")]),e._v("容器中，每一个"),s("code",[e._v("Spring")]),e._v("容器都可以拥有单例"),s("code",[e._v("bean")]),e._v("的一个实例对象，也就是说，这里的单例限定在一个"),s("code",[e._v("Spring")]),e._v("容器中，而不是整个应用程序。并且我们依然可以通过"),s("code",[e._v("new")]),e._v("的方式去自己创建"),s("code",[e._v("bean")]),e._v("。")]),e._v(" "),s("h5",{attrs:{id:"_1-2-prototype作用域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-prototype作用域"}},[e._v("#")]),e._v(" 1.2 prototype作用域")]),e._v(" "),s("p",[s("code",[e._v("prototype")]),e._v("可以理解为多例。若一个"),s("code",[e._v("bean")]),e._v("的作用域是"),s("code",[e._v("prototype")]),e._v("，那么"),s("code",[e._v("Spring")]),e._v("容器并不会缓存创建的"),s("code",[e._v("bean")]),e._v("，程序中对这个"),s("code",[e._v("bean")]),e._v("的每一次获取，容器都会重新实例化一个"),s("code",[e._v("bean")]),e._v("对象。"),s("strong",[e._v("通常，如果我们需要使用bean的状态（属性），且这个状态是会改变的，那么我们就可以将它配置为这个作用域，以解决线程安全的问题")]),e._v("。因为对于单例"),s("code",[e._v("bean")]),e._v("来说，多个线程共享它的可变属性，会存在线程安全问题。")]),e._v(" "),s("p",[e._v("前面也提过，如果"),s("code",[e._v("bean")]),e._v("的作用域是"),s("code",[e._v("prototype")]),e._v("的，那么容器在创建完这个"),s("code",[e._v("bean")]),e._v("后，并不会将它保存在容器中，这也就意味着，"),s("code",[e._v("Spring")]),e._v("容器并不能为我们做这个对象的销毁工作（比如资源释放）。此时我们可以通过"),s("code",[e._v("Spring")]),e._v("提供的接口，自定义一个后处理器，然后将这些"),s("code",[e._v("bean")]),e._v("的引用存储在这个后处理器中，当容器回调这个后处理器的方法时，我们可以在方法中通过提前存储的"),s("code",[e._v("bean")]),e._v("的引用，将它们销毁。")]),e._v(" "),s("h5",{attrs:{id:"_1-3-request作用域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-request作用域"}},[e._v("#")]),e._v(" 1.3 request作用域")]),e._v(" "),s("p",[s("code",[e._v("request")]),e._v("作用域将"),s("code",[e._v("bean")]),e._v("的使用范围限定在一个"),s("code",[e._v("http")]),e._v("请求中，对于每一个请求，都会单独创建一个"),s("code",[e._v("bean")]),e._v("，若请求结束，"),s("code",[e._v("bean")]),e._v("也会随之销毁。使用"),s("code",[e._v("request")]),e._v("作用域一般不会存在线程安全问题，因为在"),s("code",[e._v("Web")]),e._v("应用中，每个请求都是由一个单独的线程进行处理，所有线程之间并不会共享"),s("code",[e._v("bean")]),e._v("，从而不会存在线程安全的问题。")]),e._v(" "),s("p",[e._v("这个作用域只能使用在"),s("code",[e._v("Web")]),e._v("应用中。如果使用的是注解扫描配置"),s("code",[e._v("bean")]),e._v("，那么在"),s("code",[e._v("bean")]),e._v("所属的类上使用"),s("code",[e._v("@RequestScope")]),e._v("注解即可使用此作用域，若是基于"),s("code",[e._v("xml")]),e._v("文件，则通过"),s("code",[e._v("bean")]),e._v("的"),s("code",[e._v("scope")]),e._v("配置项：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<bean id="userPreferences" class="com.foo.UserPreferences" scope="request"/>\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h5",{attrs:{id:"_1-4-session作用域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-session作用域"}},[e._v("#")]),e._v(" 1.4 session作用域")]),e._v(" "),s("p",[s("code",[e._v("session")]),e._v("作用域将"),s("code",[e._v("bean")]),e._v("的使用范围一次在一次"),s("code",[e._v("http会话")]),e._v("中，对于每一个会话，"),s("code",[e._v("Spring")]),e._v("容器都会创建一个单独的"),s("code",[e._v("bean")]),e._v("，若"),s("code",[e._v("session")]),e._v("被销毁，则"),s("code",[e._v("bean")]),e._v("也随之销毁。我们可以修改"),s("code",[e._v("bean")]),e._v("的状态，这个修改只对当前会话可见，但是是否线程安全呢？"),s("code",[e._v("Spring")]),e._v("文档中并未提及，但我认为不是线程安全的，因为每一个"),s("code",[e._v("session")]),e._v("可以对应于多个"),s("code",[e._v("request")]),e._v("，这些请求不一定就是串行执行的，比如说用户打开多个界面，同时进行多次操作，那后台将同时处理同一个"),s("code",[e._v("session")]),e._v("的多个"),s("code",[e._v("request")]),e._v("，此时并不能保证"),s("code",[e._v("bean")]),e._v("的线程安全。")]),e._v(" "),s("p",[e._v("与"),s("code",[e._v("request")]),e._v("作用域一样，"),s("code",[e._v("session")]),e._v("作用域只能使用在"),s("code",[e._v("Web")]),e._v("应用中。我们可以使用"),s("code",[e._v("@SessionScope")]),e._v("将"),s("code",[e._v("bean")]),e._v("指定为"),s("code",[e._v("session")]),e._v("作用域，也可以使用"),s("code",[e._v("xml")]),e._v("配置方式：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<bean id="userPreferences" class="com.foo.UserPreferences" scope="session"/>\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h5",{attrs:{id:"_1-5-application作用域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-application作用域"}},[e._v("#")]),e._v(" 1.5 application作用域")]),e._v(" "),s("p",[e._v("学过"),s("code",[e._v("Servlet")]),e._v("的应该对"),s("code",[e._v("application")]),e._v("作用域有所了解，在"),s("code",[e._v("Servlet")]),e._v("程序中，有一个全局的"),s("code",[e._v("ServletContext")]),e._v("对象，这个对象被整个"),s("code",[e._v("web")]),e._v("应用所共享，我们可以通过"),s("code",[e._v("setAttribute")]),e._v("方法向其中添加全局共享的数据。而"),s("code",[e._v("Spring")]),e._v("中，"),s("code",[e._v("application")]),e._v("作用域就是这么实现的，作用域为"),s("code",[e._v("application")]),e._v("的"),s("code",[e._v("bean")]),e._v("，将会被作为"),s("code",[e._v("ServletContext")]),e._v("的属性，存储在其中，然后可以被全局访问，而且一个"),s("code",[e._v("ServletContext")]),e._v("只会存储这个"),s("code",[e._v("bean")]),e._v("的一个实例对象。"),s("code",[e._v("ServletContext")]),e._v("被销毁，这个"),s("code",[e._v("bean")]),e._v("自然也跟着被销毁。我们发现，这好像有点类似于"),s("code",[e._v("singleton")]),e._v("这个作用域，确实非常类似，但是也有一些区别。单例"),s("code",[e._v("bean")]),e._v("是一个"),s("code",[e._v("Spring")]),e._v("只会创建一个，而这里的却是每个"),s("code",[e._v("ServletContext")]),e._v("包含一个，不论有多少"),s("code",[e._v("Spring")]),e._v("容器，"),s("code",[e._v("bean")]),e._v("的数量只取决于"),s("code",[e._v("ServletContext")]),e._v("，而且单例"),s("code",[e._v("bean")]),e._v("只能通过容器去获取，是隐式的，而这种作用域的"),s("code",[e._v("bean")]),e._v("却是公开的，存储在"),s("code",[e._v("ServletContext")]),e._v("中，可直接通过"),s("code",[e._v("ServletContext")]),e._v("获取。")]),e._v(" "),s("p",[s("code",[e._v("application")]),e._v("作用域也只能用于"),s("code",[e._v("web")]),e._v("应用中。使用方式和之前几种类似，可以通过"),s("code",[e._v("@ApplicationScope")]),e._v("注解，也可以使用"),s("code",[e._v("xml")]),e._v("配置文件：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<bean id="appPreferences" class="com.foo.AppPreferences" scope="application"/>\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h5",{attrs:{id:"_1-5-websocket作用域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-websocket作用域"}},[e._v("#")]),e._v(" 1.5 websocket作用域")]),e._v(" "),s("p",[s("code",[e._v("websocket")]),e._v("是一种应用层的通信协议，它提供应用层的全双工通信，而"),s("code",[e._v("Spring")]),e._v("提供对"),s("code",[e._v("websocket")]),e._v("协议的支持，于是就有了这么一个作用域。在我看的这个"),s("code",[e._v("Spring")]),e._v("官方文档中。若一个"),s("code",[e._v("bean")]),e._v("的作用域为"),s("code",[e._v("websocket")]),e._v("，则只作用于一次"),s("code",[e._v("websocket")]),e._v("通信，若连接被释放，则"),s("code",[e._v("bean")]),e._v("自然也会被销毁。需要注意的一点是需要对 WebSocket 作用域的 Bean 使用作用域代理模式")]),e._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@Component")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@Scope")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("scopeName "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"websocket"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" proxyMode "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ScopedProxyMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[e._v("TARGET_CLASS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("MyBean")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@PostConstruct")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("init")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Invoked after dependencies injected")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ...")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@PreDestroy")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("destroy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Invoked when the WebSocket session ends")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@Controller")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("MyController")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("private")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("final")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("MyBean")]),e._v(" myBean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@Autowired")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("MyController")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("MyBean")]),e._v(" myBean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("myBean "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" myBean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@MessageMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/action"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("handle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// this.myBean from the current WebSocket session")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br"),s("span",{staticClass:"line-number"},[e._v("26")]),s("br"),s("span",{staticClass:"line-number"},[e._v("27")]),s("br"),s("span",{staticClass:"line-number"},[e._v("28")]),s("br"),s("span",{staticClass:"line-number"},[e._v("29")]),s("br"),s("span",{staticClass:"line-number"},[e._v("30")]),s("br"),s("span",{staticClass:"line-number"},[e._v("31")]),s("br"),s("span",{staticClass:"line-number"},[e._v("32")]),s("br")])]),s("h4",{attrs:{id:"_2-为什么global-session没有了"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-为什么global-session没有了"}},[e._v("#")]),e._v(" 2. 为什么global session没有了？")]),e._v(" "),s("p",[e._v("​\t在其他的文章中，我们常常可以看到会有global session这个作用域，但是为什么我们从刚刚的官方文档没有看到呢？")]),e._v(" "),s("h5",{attrs:{id:"global-session作用域是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#global-session作用域是什么"}},[e._v("#")]),e._v(" global session作用域是什么")]),e._v(" "),s("p",[e._v("这个作用域就比较特殊了，"),s("code",[e._v("globalSession")]),e._v("作用域的效果与"),s("code",[e._v("session")]),e._v("作用域类似，但是只适用于基于"),s("code",[e._v("portlet")]),e._v("的"),s("code",[e._v("web")]),e._v("应用程序中。"),s("code",[e._v("Portlet")]),e._v("规范定义了"),s("code",[e._v("globalSession")]),e._v("的概念，该概念在组成单个"),s("code",[e._v("Portlet Web")]),e._v("应用程序的所有"),s("code",[e._v("Portlet")]),e._v("之间共享（引用自"),s("code",[e._v("Spring")]),e._v("文档）。说实话，在看到这里之前，我从来没听说过"),s("code",[e._v("portlet")]),e._v("。我现在所学的，基本上都是基于"),s("code",[e._v("Servlet")]),e._v("的"),s("code",[e._v("web")]),e._v("应用程序，所有关于这个作用域，我也不理解。但是"),s("code",[e._v("Spring")]),e._v("文档中有提到一点，那就是"),s("strong",[e._v("如果我们在基于Servlet的web应用程序中使用globalSession作用域，实际上容器使用session作用域进行处理")]),e._v("。")]),e._v(" "),s("h5",{attrs:{id:"spring5-去掉了global-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring5-去掉了global-session"}},[e._v("#")]),e._v(" spring5 去掉了global session")]),e._v(" "),s("p",[e._v("​\t\t从StackOverFlow的一篇文章中找到了答案"),s("a",{attrs:{href:"http://stackoverflow.com/questions/54742157/were-globalsession-scoped-beans-removed-from-spring-5-why",target:"_blank",rel:"noopener noreferrer"}},[e._v("java - Were GlobalSession scoped beans removed from spring 5? Why? - Stack Overflow"),s("OutboundLink")],1),e._v("，其中说到从Spring5开始停止了对Portlet的支持，从而去除掉了global session")]),e._v(" "),s("p",[e._v("​")])])}),[],!1,null,null,null);s.default=t.exports}}]);