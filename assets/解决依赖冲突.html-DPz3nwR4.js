import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as n,c as s,a as t}from"./app-DITNE2eT.js";const e={},o=t(`<h2 id="问题" tabindex="-1"><a class="header-anchor" href="#问题"><span>问题</span></a></h2><p>笔者最近创建一个模块引入<code>mongoDB</code>相关依赖，启动时出现下面这个问题，很明显是项目中某些依赖的<code>log4j</code>和<code>slf4j</code>依赖冲突了，所以我们必须定位到导致冲突的依赖并将这些依赖排除。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding <span class="token keyword">in</span> <span class="token punctuation">[</span>jar:file:/E:/repository/org/apache/logging/log4j/log4j-slf4j-impl/2.11.2/log4j-slf4j-impl-2.11.2.jar<span class="token operator">!</span>/org/slf4j/impl/StaticLoggerBinder.class<span class="token punctuation">]</span>
SLF4J: Found binding <span class="token keyword">in</span> <span class="token punctuation">[</span>jar:file:/E:/repository/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar<span class="token operator">!</span>/org/slf4j/impl/StaticLoggerBinder.class<span class="token punctuation">]</span>
SLF4J: See http://www.slf4j.org/codes.html<span class="token comment">#multiple_bindings for an explanation.</span>
SLF4J: Actual binding is of <span class="token builtin class-name">type</span> <span class="token punctuation">[</span>org.apache.logging.slf4j.Log4jLoggerFactory<span class="token punctuation">]</span>
Exception <span class="token keyword">in</span> thread <span class="token string">&quot;main&quot;</span> java.lang.StackOverflowError
	at org.apache.logging.log4j.util.StackLocator.getCallerClass<span class="token punctuation">(</span>StackLocator.java:108<span class="token punctuation">)</span>
	at org.apache.logging.log4j.util.StackLocator.getCallerClass<span class="token punctuation">(</span>StackLocator.java:121<span class="token punctuation">)</span>
	at org.apache.logging.log4j.util.StackLocatorUtil.getCallerClass<span class="token punctuation">(</span>StackLocatorUtil.java:55<span class="token punctuation">)</span>
	at org.apache.logging.slf4j.Log4jLoggerFactory.getContext<span class="token punctuation">(</span>Log4jLoggerFactory.java:42<span class="token punctuation">)</span>
	at org.apache.logging.log4j.spi.AbstractLoggerAdapter.getLogger<span class="token punctuation">(</span>AbstractLoggerAdapter.java:46<span class="token punctuation">)</span>
	at org.apache.logging.slf4j.Log4jLoggerFactory.getLogger<span class="token punctuation">(</span>Log4jLoggerFactory.java:29<span class="token punctuation">)</span>
	at org.slf4j.LoggerFactory.getLogger<span class="token punctuation">(</span>LoggerFactory.java:358<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="解决思路" tabindex="-1"><a class="header-anchor" href="#解决思路"><span>解决思路</span></a></h2><h3 id="下载安装maven-helper" tabindex="-1"><a class="header-anchor" href="#下载安装maven-helper"><span>下载安装Maven Helper</span></a></h3><p>查阅网上资料大部分答案都推荐下载<code>Maven Helper</code>，所以笔者也下载了这个插件，通过这个插件定位到冲突的日志依赖。</p><p>如下图所示，完成下载后重启一下<code>IDEA</code>，就可以使用了。</p><p><img src="https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202304021053501.png" alt="Maven Helper"></p><h3 id="查找冲突依赖" tabindex="-1"><a class="header-anchor" href="#查找冲突依赖"><span>查找冲突依赖</span></a></h3><p>打开<code>pom</code>文件就会<code>text</code>右边多了一个依赖分析的tab栏。我们点入查看详情</p><p><img src="https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202304021053740.png" alt="在这里插入图片描述"></p><p>如下图，考虑到是存在不同的日志依赖导致冲突，所以笔者在搜索栏搜索<code>log</code>，可以看到一大块蓝绿的部分，他们分别是<code>mongoDB</code>自带的日志依赖和我们自己引入了<code>log4j</code>依赖都存在系统的<code>log4j-api</code>，所以我们必须手动的将<code>mongoDB</code>中蓝绿部分的依赖移除。</p><p><img src="https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202304021053536.png" alt="在这里插入图片描述"></p><h3 id="排除冲突的依赖" tabindex="-1"><a class="header-anchor" href="#排除冲突的依赖"><span>排除冲突的依赖</span></a></h3><p>如下所示，根据上文蓝绿色定位到的冲突的依赖，选择一个将其移除即可</p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code>     <span class="token comment">&lt;!--mongodb依赖--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-mongodb-reactive<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动查看是否解决问题" tabindex="-1"><a class="header-anchor" href="#启动查看是否解决问题"><span>启动查看是否解决问题</span></a></h3><p>可以看到项目正常启动，我们的依赖移除步骤是正确的。</p><p><img src="https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202304021053568.png" alt="在这里插入图片描述"></p><h2 id="小结" tabindex="-1"><a class="header-anchor" href="#小结"><span>小结</span></a></h2><p>本次问题解决过程中一开始是基于网上答案，通过<code>Maven Helper</code>搜索<code>logback</code>并移除其中一个<code>logback</code>，移除后发现还是没有解决问题，猜测可能是项目中还存在冲突的日志依赖，所以笔者索性直接搜索<code>log</code>，果然定位到更加根源的问题<code>(log4j冲突)</code>。 所以我们日常排错过程中，找到思路时尝试解决问题却没有完全解决时，建议根据现象进一步推测是否我们定位到的问题并没有完全解决。就以本次冲突解决为例，我们根据网上答案排除的依赖却还是报错，原因大概率是依赖冲突还是存在，我们不妨增加搜索面去定位问题。</p>`,21),p=[o];function l(c,i){return n(),s("div",null,p)}const u=a(e,[["render",l],["__file","解决依赖冲突.html.vue"]]),d=JSON.parse('{"path":"/%E6%97%A5%E5%B8%B8/%E8%A7%A3%E5%86%B3%E4%BE%9D%E8%B5%96%E5%86%B2%E7%AA%81.html","title":"","lang":"zh-CN","frontmatter":{"description":"问题 笔者最近创建一个模块引入mongoDB相关依赖，启动时出现下面这个问题，很明显是项目中某些依赖的log4j和slf4j依赖冲突了，所以我们必须定位到导致冲突的依赖并将这些依赖排除。 解决思路 下载安装Maven Helper 查阅网上资料大部分答案都推荐下载Maven Helper，所以笔者也下载了这个插件，通过这个插件定位到冲突的日志依赖。 如...","head":[["meta",{"property":"og:url","content":"https://maijunxuan.cn/%E6%97%A5%E5%B8%B8/%E8%A7%A3%E5%86%B3%E4%BE%9D%E8%B5%96%E5%86%B2%E7%AA%81.html"}],["meta",{"property":"og:site_name","content":"麦俊轩的博客"}],["meta",{"property":"og:description","content":"问题 笔者最近创建一个模块引入mongoDB相关依赖，启动时出现下面这个问题，很明显是项目中某些依赖的log4j和slf4j依赖冲突了，所以我们必须定位到导致冲突的依赖并将这些依赖排除。 解决思路 下载安装Maven Helper 查阅网上资料大部分答案都推荐下载Maven Helper，所以笔者也下载了这个插件，通过这个插件定位到冲突的日志依赖。 如..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202304021053501.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-08-28T00:49:57.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"property":"article:author","content":"maijunxuan"}],["meta",{"property":"article:modified_time","content":"2023-08-28T00:49:57.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"\\",\\"image\\":[\\"https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202304021053501.png\\",\\"https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202304021053740.png\\",\\"https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202304021053536.png\\",\\"https://cdn.jsdelivr.net/gh/mai-junxuan/Cloud-image/image/202304021053568.png\\"],\\"dateModified\\":\\"2023-08-28T00:49:57.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"maijunxuan\\"}]}"]]},"headers":[{"level":2,"title":"问题","slug":"问题","link":"#问题","children":[]},{"level":2,"title":"解决思路","slug":"解决思路","link":"#解决思路","children":[{"level":3,"title":"下载安装Maven Helper","slug":"下载安装maven-helper","link":"#下载安装maven-helper","children":[]},{"level":3,"title":"查找冲突依赖","slug":"查找冲突依赖","link":"#查找冲突依赖","children":[]},{"level":3,"title":"排除冲突的依赖","slug":"排除冲突的依赖","link":"#排除冲突的依赖","children":[]},{"level":3,"title":"启动查看是否解决问题","slug":"启动查看是否解决问题","link":"#启动查看是否解决问题","children":[]}]},{"level":2,"title":"小结","slug":"小结","link":"#小结","children":[]}],"git":{"createdTime":1693183797000,"updatedTime":1693183797000,"contributors":[{"name":"MJX","email":"1585225345@qq.com","commits":1}]},"readingTime":{"minutes":2.39,"words":716},"filePathRelative":"日常/解决依赖冲突.md","localizedDate":"2023年8月28日","excerpt":"<h2>问题</h2>\\n<p>笔者最近创建一个模块引入<code>mongoDB</code>相关依赖，启动时出现下面这个问题，很明显是项目中某些依赖的<code>log4j</code>和<code>slf4j</code>依赖冲突了，所以我们必须定位到导致冲突的依赖并将这些依赖排除。</p>\\n<div class=\\"language-bash\\" data-ext=\\"sh\\" data-title=\\"sh\\"><pre class=\\"language-bash\\"><code>SLF4J: Class path contains multiple SLF4J bindings.\\nSLF4J: Found binding <span class=\\"token keyword\\">in</span> <span class=\\"token punctuation\\">[</span>jar:file:/E:/repository/org/apache/logging/log4j/log4j-slf4j-impl/2.11.2/log4j-slf4j-impl-2.11.2.jar<span class=\\"token operator\\">!</span>/org/slf4j/impl/StaticLoggerBinder.class<span class=\\"token punctuation\\">]</span>\\nSLF4J: Found binding <span class=\\"token keyword\\">in</span> <span class=\\"token punctuation\\">[</span>jar:file:/E:/repository/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar<span class=\\"token operator\\">!</span>/org/slf4j/impl/StaticLoggerBinder.class<span class=\\"token punctuation\\">]</span>\\nSLF4J: See http://www.slf4j.org/codes.html<span class=\\"token comment\\">#multiple_bindings for an explanation.</span>\\nSLF4J: Actual binding is of <span class=\\"token builtin class-name\\">type</span> <span class=\\"token punctuation\\">[</span>org.apache.logging.slf4j.Log4jLoggerFactory<span class=\\"token punctuation\\">]</span>\\nException <span class=\\"token keyword\\">in</span> thread <span class=\\"token string\\">\\"main\\"</span> java.lang.StackOverflowError\\n\\tat org.apache.logging.log4j.util.StackLocator.getCallerClass<span class=\\"token punctuation\\">(</span>StackLocator.java:108<span class=\\"token punctuation\\">)</span>\\n\\tat org.apache.logging.log4j.util.StackLocator.getCallerClass<span class=\\"token punctuation\\">(</span>StackLocator.java:121<span class=\\"token punctuation\\">)</span>\\n\\tat org.apache.logging.log4j.util.StackLocatorUtil.getCallerClass<span class=\\"token punctuation\\">(</span>StackLocatorUtil.java:55<span class=\\"token punctuation\\">)</span>\\n\\tat org.apache.logging.slf4j.Log4jLoggerFactory.getContext<span class=\\"token punctuation\\">(</span>Log4jLoggerFactory.java:42<span class=\\"token punctuation\\">)</span>\\n\\tat org.apache.logging.log4j.spi.AbstractLoggerAdapter.getLogger<span class=\\"token punctuation\\">(</span>AbstractLoggerAdapter.java:46<span class=\\"token punctuation\\">)</span>\\n\\tat org.apache.logging.slf4j.Log4jLoggerFactory.getLogger<span class=\\"token punctuation\\">(</span>Log4jLoggerFactory.java:29<span class=\\"token punctuation\\">)</span>\\n\\tat org.slf4j.LoggerFactory.getLogger<span class=\\"token punctuation\\">(</span>LoggerFactory.java:358<span class=\\"token punctuation\\">)</span>\\n\\n</code></pre></div>","autoDesc":true}');export{u as comp,d as data};
