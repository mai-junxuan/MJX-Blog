<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.7" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.23" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://maijunxuan.cn/Redis/Redis%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.html"><meta property="og:site_name" content="麦俊轩的博客"><meta property="og:title" content="Redis的安装与基本操作"><meta property="og:description" content="Redis的安装与基本操作 什么是Redis 基于键值对的NoSql数据库，支持stirng、hash、list、set、zset、bitmaps、HyperLogLog、GEO等数据结构极其算法。 读写性能非常好。 有将数据存到快照或者日志上的机制，便于数据恢复。 提供键过期、发布订阅、事务、流水线、lua脚本等附加功能。 Redis特性 读写速度据..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2022-09-04T18:30:51.000Z"><meta property="article:author" content="maijunxuan"><meta property="article:modified_time" content="2022-09-04T18:30:51.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Redis的安装与基本操作","image":[""],"dateModified":"2022-09-04T18:30:51.000Z","author":[{"@type":"Person","name":"maijunxuan"}]}</script><meta name="robots" content="all"><meta name="author" content="maijunxuan"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta name="apple-mobile-web-app-capable" content="yes"><link rel="icon" href="/favicon.ico"><title>Redis的安装与基本操作 | 麦俊轩的博客</title><meta name="description" content="Redis的安装与基本操作 什么是Redis 基于键值对的NoSql数据库，支持stirng、hash、list、set、zset、bitmaps、HyperLogLog、GEO等数据结构极其算法。 读写性能非常好。 有将数据存到快照或者日志上的机制，便于数据恢复。 提供键过期、发布订阅、事务、流水线、lua脚本等附加功能。 Redis特性 读写速度据...">
    <link rel="preload" href="/assets/style-BoXsG0LU.css" as="style"><link rel="stylesheet" href="/assets/style-BoXsG0LU.css">
    <link rel="modulepreload" href="/assets/app-Digg1ELS.js"><link rel="modulepreload" href="/assets/Redis的安装与基本操作.html-BPSdqB7q.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container no-sidebar has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.png" alt><!----><span class="vp-site-name hide-in-pad">麦俊轩的博客</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="日常"><span class="title"><!---->日常</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%97%A5%E5%B8%B8/IDEA%E7%BF%BB%E8%AF%91%E6%8F%92%E4%BB%B6%E6%8A%A5%E9%94%99%E6%9B%B4%E6%96%B0TKK%E7%9A%84%E9%97%AE%E9%A2%98.html" aria-label="IDEA翻译插件报错更新TKK的问题"><!---->IDEA翻译插件报错更新TKK的问题<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%97%A5%E5%B8%B8/Vue3%E4%B8%AD%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E8%83%BD%E4%BD%BF%E7%94%A8this.html" aria-label="Vue3中为什么不能使用this"><!---->Vue3中为什么不能使用this<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%97%A5%E5%B8%B8/windows%E7%AB%AF%E5%8F%A3%E5%86%B2%E7%AA%81%E8%A7%A3%E5%86%B3.html" aria-label="windows端口冲突解决"><!---->windows端口冲突解决<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E6%97%A5%E5%B8%B8/%E8%A7%A3%E5%86%B3%E4%BE%9D%E8%B5%96%E5%86%B2%E7%AA%81.html" aria-label="解决依赖冲突"><!---->解决依赖冲突<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Java"><span class="title"><!---->Java</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/Java/Java%E5%9F%BA%E7%A1%80%E5%B0%8F%E7%BB%93.html" aria-label="Java基础小结"><!---->Java基础小结<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Java/Java%E6%B3%A8%E8%A7%A3%E5%B0%8F%E7%BB%93.html" aria-label="Java注解小结"><!---->Java注解小结<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Java/Java%E5%8F%8D%E5%B0%84%E5%B0%8F%E7%BB%93.html" aria-label="Java反射小结"><!---->Java反射小结<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Java/Java%E4%B8%AD%E7%9A%84%E6%B3%9B%E5%9E%8B.html" aria-label="Java中的泛型"><!---->Java中的泛型<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Java/谈谈Java的异常.html" aria-label="谈谈Java的异常"><!---->谈谈Java的异常<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Java/Lambda%E5%AE%9E%E8%B7%B5.html" aria-label="Lambda实践"><!---->Lambda实践<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Java/Stream%E6%B5%81%E5%AE%9E%E8%B7%B5.html" aria-label="Stream流实践"><!---->Stream流实践<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Java/Java%E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2.html" aria-label="Java中的字符串"><!---->Java中的字符串<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="JUC"><span class="title"><!---->JUC</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/Java%E4%B8%AD%E7%9A%84%E7%BA%BF%E7%A8%8B%E6%B1%A0.html" aria-label="Java中的线程池"><!---->Java中的线程池<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/Java%E4%B8%AD%E7%9A%84%E5%B9%B6%E5%8F%91%E5%AE%B9%E5%99%A8.html" aria-label="Java中的并发容器"><!---->Java中的并发容器<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/%E8%B0%88%E8%B0%88ThreadLocal.html" aria-label="谈谈ThreadLocal"><!---->谈谈ThreadLocal<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/synchronized%E7%9A%84%E4%BC%98%E5%8C%96.html" aria-label="synchronized的优化"><!---->synchronized的优化<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/CAS%E5%92%8C%E5%8E%9F%E5%AD%90%E7%B1%BB.html" aria-label="CAS和原子类"><!---->CAS和原子类<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/volatile%E5%92%8CCAS%E7%9A%84%E5%BC%8A%E7%AB%AF.html" aria-label="volatile和CAS的弊端"><!---->volatile和CAS的弊端<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/CompletableFuture%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8.html" aria-label="CompletableFuture简单使用"><!---->CompletableFuture简单使用<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/AQS%E7%AE%80%E8%BF%B0.html" aria-label="AQS简述"><!---->AQS简述<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/JUC/JUC%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB.html" aria-label="JUC常用工具类"><!---->JUC常用工具类<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="MySQL"><span class="title"><!---->MySQL</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/MySQL/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5.html" aria-label="MySQL常用语句"><!---->MySQL常用语句<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/MySQL/MySQL%E4%B8%AD%E7%9A%84%E4%BA%8B%E5%8A%A1.html" aria-label="MySQL中的事务"><!---->MySQL中的事务<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/MySQL/%E4%B8%80%E6%9D%A1SQL%E7%9A%84%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B.html" aria-label="一条SQL的执行过程"><!---->一条SQL的执行过程<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/MySQL/MySQL%E4%B8%ADdatetime%E5%92%8Ctimestamp%E7%9A%84%E5%8C%BA%E5%88%AB%E4%B8%8E%E9%80%89%E6%8B%A9.html" aria-label="MySQL中datetime和timestamp的区别与选择"><!---->MySQL中datetime和timestamp的区别与选择<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/MySQL/%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95%E5%92%8C%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%E7%9A%84%E5%8C%BA%E5%88%AB.html" aria-label="普通索引和唯一索引的区别"><!---->普通索引和唯一索引的区别<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/MySQL/Explain%E8%AF%AD%E5%8F%A5.html" aria-label="Explain语句"><!---->Explain语句<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/MySQL/MySQL%E7%9A%84%E6%89%A7%E8%A1%8C%E6%88%90%E6%9C%AC%E6%80%8E%E4%B9%88%E7%AE%97.html" aria-label="MySQL的执行成本怎么算"><!---->MySQL的执行成本怎么算<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/MySQL/MVCC%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86.html" aria-label="MVCC实现原理"><!---->MVCC实现原理<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Redis"><span class="title"><!---->Redis</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link active" href="/Redis/Redis%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.html" aria-label="Redis的安装与基本操作"><!---->Redis的安装与基本操作<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/Redis%E7%9A%843%E7%A7%8D%E7%89%B9%E6%AE%8A%E7%B1%BB%E5%9E%8B.html" aria-label="Redis的3种特殊类型"><!---->Redis的3种特殊类型<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/Redis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D.html" aria-label="Redis配置文件介绍"><!---->Redis配置文件介绍<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/Redis%E7%9A%84Java%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%A4%BA%E4%BE%8B.html" aria-label="Redis的Java客户端示例"><!---->Redis的Java客户端示例<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/Redis%E4%BA%8B%E5%8A%A1.html" aria-label="Redis事务"><!---->Redis事务<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/RDB%E7%AE%80%E4%BB%8B.html" aria-label="RDB简介"><!---->RDB简介<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/AOF%E7%AE%80%E4%BB%8B.html" aria-label="AOF简介"><!---->AOF简介<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%8F%8A%E5%93%A8%E5%85%B5.html" aria-label="主从复制及哨兵"><!---->主从复制及哨兵<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/Redis%E9%9B%86%E7%BE%A4.html" aria-label="Redis集群"><!---->Redis集群<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Redis/%E4%BD%BF%E7%94%A8%E7%BC%93%E5%AD%98%E4%BC%9A%E5%AD%98%E5%9C%A8%E5%93%AA%E4%BA%9B%E9%97%AE%E9%A2%98.html" aria-label="使用缓存会存在哪些问题"><!---->使用缓存会存在哪些问题<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="工具"><span class="title"><!---->工具</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Git</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Git/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" aria-label="Git常用命令"><!---->Git常用命令<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Git/Git%20%E6%8F%90%E4%BA%A4%E8%A7%84%E7%BA%A6.html" aria-label="Git 提交规约"><!---->Git 提交规约<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Linux</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Linux/Linux%E7%9A%84%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84.html" aria-label="Linux的文件结构"><!---->Linux的文件结构<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Linux/Linux%E7%9A%84%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86.html" aria-label="Linux的进程管理"><!---->Linux的进程管理<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Linux/Linux%E5%B8%B8%E7%94%A8%E7%BD%91%E7%BB%9C%E5%91%BD%E4%BB%A4.html" aria-label="Linux常用网络命令"><!---->Linux常用网络命令<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Docker</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Docker/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" aria-label="Docker常用命令"><!---->Docker常用命令<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Docker/DokcerCompose%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8.html" aria-label="DokcerCompose简单使用"><!---->DokcerCompose简单使用<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Nginx</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Nginx/Nginx%E7%9A%84%E5%AE%89%E8%A3%85.html" aria-label="Nginx的安装"><!---->Nginx的安装<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/Nginx/Nginx%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8.html" aria-label="Nginx基础入门"><!---->Nginx基础入门<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>其他</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/%E5%85%B6%E4%BB%96/Arthas%E4%BD%BF%E7%94%A8%E5%B0%8F%E7%BB%93.html" aria-label="Arthas使用小结"><!---->Arthas使用小结<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/工具/其他/基于Gitee实现Jenkins自动化部署SpringBoot项目/" aria-label="基于Gitee实现Jenkins自动化部署SpringBoot项目"><!---->基于Gitee实现Jenkins自动化部署SpringBoot项目<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E5%B7%A5%E5%85%B7/%E5%85%B6%E4%BB%96/%E5%9F%BA%E4%BA%8Ejmeter%E5%AE%8C%E6%88%90%E5%8E%8B%E6%B5%8B.html" aria-label="基于jmeter完成压测"><!---->基于jmeter完成压测<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="分布式"><span class="title"><!---->分布式</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E5%88%86%E5%B8%83%E5%BC%8F/CAP%E5%92%8CBASE%E7%90%86%E8%AE%BA.html" aria-label="CAP和BASE理论"><!---->CAP和BASE理论<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html" aria-label="分布式事务的解决方案"><!---->分布式事务的解决方案<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84%E5%87%A0%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F.html" aria-label="分布式锁的几种实现方式"><!---->分布式锁的几种实现方式<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/%E5%88%86%E5%B8%83%E5%BC%8F/%E4%BB%80%E4%B9%88%E6%98%AFxxl-job%EF%BC%8C%E5%AE%83%E8%A7%A3%E5%86%B3%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98.html" aria-label="什么是xxl-job，它解决什么问题"><!---->什么是xxl-job，它解决什么问题<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="框架"><span class="title"><!---->框架</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Spring</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E6%A1%86%E6%9E%B6/Spring/Spring%E7%9A%84%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3.html" aria-label="Spring的常用注解"><!---->Spring的常用注解<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E6%A1%86%E6%9E%B6/Spring/@Autowired%E6%B3%A8%E8%A7%A3%E8%AF%A6%E8%A7%A3.html" aria-label="@Autowired注解详解"><!---->@Autowired注解详解<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/框架/Spring/SpringBean的作用域.html" aria-label="SpringBean的作用域"><!---->SpringBean的作用域<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E6%A1%86%E6%9E%B6/Spring/Spring%E4%B8%89%E7%BA%A7%E7%BC%93%E5%AD%98%E4%B8%8E%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96.html" aria-label="Spring三级缓存与循环依赖"><!---->Spring三级缓存与循环依赖<!----></a></li><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E6%A1%86%E6%9E%B6/Spring/JDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E5%92%8CCGlib%E4%BB%A3%E7%90%86.html" aria-label="JDK动态代理和CGlib代理"><!---->JDK动态代理和CGlib代理<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Netty</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E6%A1%86%E6%9E%B6/Netty/Netty%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5%E5%85%A5%E9%97%A8%E5%B0%8F%E7%BB%93.html" aria-label="Netty基础概念入门小结"><!---->Netty基础概念入门小结<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="中间件"><span class="title"><!---->中间件</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>消息队列</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ/RabbitMQ%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8.html" aria-label="RabbitMQ简单使用"><!---->RabbitMQ简单使用<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Canal</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/Canal/Canal%E7%9A%84%E4%BD%BF%E7%94%A8.html" aria-label="Canal的使用"><!---->Canal的使用<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Sharding-JDBC</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a class="route-link nav-link" href="/中间件/Canal/Canal的使用/Sharding-JDBC的简单使用.html" aria-label="Sharding-JDBC的简单使用"><!---->Sharding-JDBC的简单使用<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="业务理解"><span class="title"><!---->业务理解</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/%E4%B8%9A%E5%8A%A1%E7%90%86%E8%A7%A3/%E5%AF%B9%E6%94%AF%E4%BB%98%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%B8%AA%E4%BA%BA%E7%90%86%E8%A7%A3.html" aria-label="对支付系统的个人理解"><!---->对支付系统的个人理解<!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Redis的安装与基本操作</h1><div class="page-info"><span class="page-author-info" aria-label="作者"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">maijunxuan</span></span><span property="author" content="maijunxuan"></span></span><!----><!----><!----><span class="page-word-info" aria-label="字数"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>约 4974 字</span><meta property="wordCount" content="4974"></span><span class="page-reading-time-info" aria-label="阅读时间"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 17 分钟</span><meta property="timeRequired" content="PT17M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#什么是redis">什么是Redis</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#redis特性">Redis特性</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#redis支持的场景">Redis支持的场景</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#不建议使用redis的场景">不建议使用Redis的场景</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#redis安装">redis安装</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#启动">启动</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#redis常用操作">Redis常用操作</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#字符串操作">字符串操作</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#哈希">哈希</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#列表">列表</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#集合">集合</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/#有序集合">有序集合</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h1 id="redis的安装与基本操作" tabindex="-1"><a class="header-anchor" href="#redis的安装与基本操作"><span>Redis的安装与基本操作</span></a></h1><h2 id="什么是redis" tabindex="-1"><a class="header-anchor" href="#什么是redis"><span>什么是Redis</span></a></h2><ol><li>基于键值对的NoSql数据库，支持stirng、hash、list、set、zset、bitmaps、HyperLogLog、GEO等数据结构极其算法。</li><li>读写性能非常好。</li><li>有将数据存到快照或者日志上的机制，便于数据恢复。</li><li>提供键过期、发布订阅、事务、流水线、lua脚本等附加功能。</li></ol><h2 id="redis特性" tabindex="-1"><a class="header-anchor" href="#redis特性"><span>Redis特性</span></a></h2><ol><li>读写速度据统计可达10w/s。</li><li>支持列表、哈希、集合、有序集合等数据结构的操作和算法。</li><li>功能丰富，支持键值过期、发布订阅、lua脚本创造新的Redis命令、客户端支持流水线操作，将一系列命令传给redis，避免多次网络io。</li><li>简单稳定</li><li>支持多种语言的客户端。</li><li>有RDB和AOF两种持久化策略。</li><li>支持主从复制。</li><li>支持高可用和分布式。</li></ol><h2 id="redis支持的场景" tabindex="-1"><a class="header-anchor" href="#redis支持的场景"><span>Redis支持的场景</span></a></h2><ol><li>缓存</li><li>排行榜系统</li><li>计数器应用</li><li>社交网络点赞等功能</li><li>消息队列(不常用)</li></ol><h2 id="不建议使用redis的场景" tabindex="-1"><a class="header-anchor" href="#不建议使用redis的场景"><span>不建议使用Redis的场景</span></a></h2><ol><li>几亿用户行为的数据不建议使用redis进行维护管理。</li><li>不经常被使用的冷数据不建议使用redis管理。</li></ol><h2 id="redis安装" tabindex="-1"><a class="header-anchor" href="#redis安装"><span>redis安装</span></a></h2><h4 id="安装c-语言的编译环境" tabindex="-1"><a class="header-anchor" href="#安装c-语言的编译环境"><span>安装C 语言的编译环境</span></a></h4><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code>yum install centos<span class="token operator">-</span>release<span class="token operator">-</span>scl scl<span class="token operator">-</span>utils<span class="token operator">-</span>build
yum install <span class="token operator">-</span>y devtoolset<span class="token operator">-</span><span class="token number">8</span><span class="token operator">-</span>toolchain
scl enable devtoolset<span class="token operator">-</span><span class="token number">8</span> bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="完成之后设置gcc版本" tabindex="-1"><a class="header-anchor" href="#完成之后设置gcc版本"><span>完成之后设置gcc版本</span></a></h4><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code>gcc <span class="token operator">--</span>version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="下载redis-6-2-1-tar-gz放-opt目录" tabindex="-1"><a class="header-anchor" href="#下载redis-6-2-1-tar-gz放-opt目录"><span>下载redis-6.2.1.tar.gz放/opt目录</span></a></h4><h4 id="解压redis" tabindex="-1"><a class="header-anchor" href="#解压redis"><span>解压redis</span></a></h4><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>tar -zxvf redis-6.2.1.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="解压完成后进入目录-cd-redis-6-2-1" tabindex="-1"><a class="header-anchor" href="#解压完成后进入目录-cd-redis-6-2-1"><span>解压完成后进入目录：cd redis-6.2.1</span></a></h4><h4 id="键入make" tabindex="-1"><a class="header-anchor" href="#键入make"><span>键入<code>make</code></span></a></h4><p>注意：2.2.2.6.如果没有准备好C语言编译环境，make 会报错—Jemalloc/jemalloc.h：没有那个文件，可以运行<code>make distclean</code>，再次运行<code>make</code>即可解决问题</p><h4 id="运行make-install" tabindex="-1"><a class="header-anchor" href="#运行make-install"><span>运行<code>make install</code></span></a></h4><h4 id="小结" tabindex="-1"><a class="header-anchor" href="#小结"><span>小结</span></a></h4><p>自此，redis安装已经全部完成，redis会被默认安装在<code>/usr/local/bin</code>目录，所以为了方便后续各种操作，我们可以运行如下命令，创建一个redis配置目录方便后续各种实验操作</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code>## 创建配置文件实验文件夹
mkdir myredis
进入redis解压目录
cd <span class="token operator">/</span>opt<span class="token operator">/</span>redis<span class="token operator">-</span><span class="token number">6.2</span><span class="token number">.1</span><span class="token operator">/</span>
复制配置文件到新文件夹
cp redis<span class="token punctuation">.</span>conf <span class="token operator">/</span>myredis<span class="token operator">/</span>
## 进入redis命令目录
cd <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>bin<span class="token operator">/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="启动" tabindex="-1"><a class="header-anchor" href="#启动"><span>启动</span></a></h2><h4 id="前台启动" tabindex="-1"><a class="header-anchor" href="#前台启动"><span>前台启动</span></a></h4><p>一旦按ctrl+c进程直接结束</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code>redis<span class="token operator">-</span>server <span class="token operator">/</span>myredis<span class="token operator">/</span>redis<span class="token punctuation">.</span>conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="后台启动-推荐" tabindex="-1"><a class="header-anchor" href="#后台启动-推荐"><span>后台启动(推荐)</span></a></h4><h6 id="运行一下命令配置文件" tabindex="-1"><a class="header-anchor" href="#运行一下命令配置文件"><span>运行一下命令配置文件</span></a></h6><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code>vim <span class="token operator">/</span>myredis<span class="token operator">/</span>redis<span class="token punctuation">.</span>conf

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>按<code>/daemonize</code>找到<code>daemonize</code>，将此参数设置为yes，如下图所示</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code>## 启动redis
<span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>bin<span class="token operator">/</span>redis<span class="token operator">-</span>server <span class="token operator">/</span>myredis<span class="token operator">/</span>redis<span class="token punctuation">.</span>conf
## 检查redis是否启动
 ps <span class="token operator">-</span>ef<span class="token operator">|</span>grep redis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="启动客户端" tabindex="-1"><a class="header-anchor" href="#启动客户端"><span>启动客户端</span></a></h4><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>bin<span class="token operator">/</span>redis<span class="token operator">-</span>cli
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="cli键入ping" tabindex="-1"><a class="header-anchor" href="#cli键入ping"><span>cli键入<code>ping</code></span></a></h4><p>若输出PONG，则说明redis客户端已经与服务端连通。</p><h4 id="关闭服务端" tabindex="-1"><a class="header-anchor" href="#关闭服务端"><span>关闭服务端</span></a></h4><ol><li>客户端运行<code>shutdown</code></li><li><code>/usr/local/bin/redis-cli -p 6379 shutdown</code></li></ol><h2 id="redis常用操作" tabindex="-1"><a class="header-anchor" href="#redis常用操作"><span>Redis常用操作</span></a></h2><h4 id="查看所有键值" tabindex="-1"><a class="header-anchor" href="#查看所有键值"><span>查看所有键值</span></a></h4><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; keys *
(empty list or set)

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="添加或者删除键值" tabindex="-1"><a class="header-anchor" href="#添加或者删除键值"><span>添加或者删除键值</span></a></h4><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 添加字符串
127.0.0.1:6379&gt; set hello world
OK
127.0.0.1:6379&gt; set java jedis
OK
127.0.0.1:6379&gt; set python redis-py
OK

## 添加一个key名为mylist的键,存储一堆元素a b c d e f g
127.0.0.1:6379&gt; RPUSH mylist a b c d e f g
(integer) 7

## 使用keys * ,查看我们刚刚添加的key
127.0.0.1:6379&gt; KEYS *
1) &quot;python&quot;
2) &quot;java&quot;
3) &quot;hello&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="查看当前键的数" tabindex="-1"><a class="header-anchor" href="#查看当前键的数"><span>查看当前键的数</span></a></h4><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; DBSIZE
(integer) 3

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="查看key是否存在" tabindex="-1"><a class="header-anchor" href="#查看key是否存在"><span>查看key是否存在</span></a></h4><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 存在返回1 不存在返回0
127.0.0.1:6379&gt; EXISTS java
(integer) 1

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="设置键过期" tabindex="-1"><a class="header-anchor" href="#设置键过期"><span>设置键过期</span></a></h4><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 添加一个键hello 设置10秒过期
127.0.0.1:6379&gt; set hello world
OK
## 查看是否存在
127.0.0.1:6379&gt; EXPIRE hello 10
(integer) 1
## 我们也可以用tts判断是否存在,若过期则返回-2
127.0.0.1:6379&gt; ttl  hello
(integer) -2


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="查看键值对的数据类型" tabindex="-1"><a class="header-anchor" href="#查看键值对的数据类型"><span>查看键值对的数据类型</span></a></h4><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; type mylist
list

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="字符串操作" tabindex="-1"><a class="header-anchor" href="#字符串操作"><span>字符串操作</span></a></h2><h4 id="操作指令" tabindex="-1"><a class="header-anchor" href="#操作指令"><span>操作指令</span></a></h4><h6 id="设置值" tabindex="-1"><a class="header-anchor" href="#设置值"><span>设置值</span></a></h6><p>赋值指令如下所示，<code>]</code>为可选项</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>set key value ex  value 秒级过期时间] px value 设置当前键值对的毫秒级过期时间]  nx 若键值存在才能赋值] xx 若键值存在才能赋值]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例 设置一个key为str，value为hello的字符串</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; set str hello
OK
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置一个10s过期的字符串str2，值为str2</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; set str2 str2 ex 10
OK
## 10s内值还在
127.0.0.1:6379&gt; get str2
&quot;str2&quot;

## 10s后键值对消失
127.0.0.1:6379&gt; get str2
(nil)
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="setnx、setxx、setex" tabindex="-1"><a class="header-anchor" href="#setnx、setxx、setex"><span>setnx、setxx、setex</span></a></h6><p>setnx和set的nx选项类似，值不存在时才能建立键值对</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>setnx key value
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 判断hello是否存在
127.0.0.1:6379&gt; EXISTS hello
(integer) 0
## 设置hello
127.0.0.1:6379&gt; set hello world
OK
## 如果hello不存在 则设置一个key为hello value为h的键值对
127.0.0.1:6379&gt; SETNX hello h
(integer) 0
## 发现值没变还是原本set指令的
127.0.0.1:6379&gt; get hello
&quot;world&quot;
## h不存在
127.0.0.1:6379&gt; EXISTS h
(integer) 0
## 使用setnx赋值，在使用get指令查看，发现存在
127.0.0.1:6379&gt; SETNX h hello
(integer) 1
127.0.0.1:6379&gt; get h
&quot;hello&quot;
127.0.0.1:6379&gt;


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>setxx相对set指令的xx选项，这里就不多赘述了</p><p>setex相当于set指令的ex选项</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 设置一个10s过期的键为key 值为value的键值对
127.0.0.1:6379&gt; SETEX key 10 value
OK
127.0.0.1:6379&gt; get key
&quot;value&quot;
## 10s后过期
127.0.0.1:6379&gt; get key
(nil)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="获取值" tabindex="-1"><a class="header-anchor" href="#获取值"><span>获取值</span></a></h6><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>get key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h6 id="批量设置值和获取值" tabindex="-1"><a class="header-anchor" href="#批量设置值和获取值"><span>批量设置值和获取值</span></a></h6><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 批量设置
mset key value key value] key value] key value]
## 批量获取
mget key1 key2 ....
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; MSET a 1 b 2 c 3
OK
127.0.0.1:6379&gt; MGET a b c
1) &quot;1&quot;
2) &quot;2&quot;
3) &quot;3&quot;


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意:如果我们某个业务需要获取redis中大量的key值，建议使用mget，原因：</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>使用set获取1000个key: 1000个网络io时间+1000个指令执行时间
使用mget获取1000个key:1个网络io时间+1000个指令执行时间
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>get指令请求模型</p><p>mget指令请求模型</p><h6 id="计数" tabindex="-1"><a class="header-anchor" href="#计数"><span>计数</span></a></h6><p>自增指令，若值不存在，则创建并初始值为1，若存在且为整数则自增，若存在且为字符文字则报错。 因为redis是单线程的，所以计数指令无需考虑线程安全问题，无需使用cas等手段来修改值而是顺序执行自增，所以性能相当优秀。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>incr key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; INCR k
(integer) 1
127.0.0.1:6379&gt; INCR k
(integer) 2
127.0.0.1:6379&gt; set str str
OK
127.0.0.1:6379&gt; incr str
(error) ERR value is not an integer or out of range
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其他计数指令</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 自减
decr key
## 自增自己指定的值
incrby key increment
## 自减指定的值
decrby key decrement
## 自增小数值
incrbyfloat key increment
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="不常用指令" tabindex="-1"><a class="header-anchor" href="#不常用指令"><span>不常用指令</span></a></h6><p>追加值</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>append key value
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 对key为hello的值增加一个world字符串
127.0.0.1:6379&gt; set hello hello
OK
127.0.0.1:6379&gt; APPEND hello world
(integer) 10
127.0.0.1:6379&gt; get hello
&quot;helloworld&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取字符串长度</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>strlen key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; strlen hello
(integer) 10
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置并返回原先的值</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>getset key value
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; set hello world
OK
127.0.0.1:6379&gt; GETSET hello redis
&quot;world&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取指定范围</p><p>语法</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code> GETRANGE key start  end
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; set str 0123456789
OK
127.0.0.1:6379&gt; GETRANGE str 0  2
&quot;012&quot;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="不同长度的字符串的内部编码" tabindex="-1"><a class="header-anchor" href="#不同长度的字符串的内部编码"><span>不同长度的字符串的内部编码</span></a></h4><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 8位数的长整型为int
127.0.0.1:6379&gt; set str 111
OK
127.0.0.1:6379&gt; object encoding str
&quot;int&quot;

## 小于39字节的字符串为embstr
127.0.0.1:6379&gt; set str helloworld
OK
127.0.0.1:6379&gt; object encoding str
&quot;embstr&quot;

## 大于39字节为raw
127.0.0.1:6379&gt; set str abcdefghijklmnopqrstudksajdlksadklsdaskdjlkasdjasdjajdlksadadjl
OK
127.0.0.1:6379&gt; object encoding str
&quot;raw&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="使用场景" tabindex="-1"><a class="header-anchor" href="#使用场景"><span>使用场景</span></a></h4><h6 id="用户信息缓存" tabindex="-1"><a class="header-anchor" href="#用户信息缓存"><span>用户信息缓存</span></a></h6><p>如下所示，可将常见的数据库数据存到redis中提高访问数据，建议使用的key为<code>表名:对象名:id</code>,例如<code>userInfo:user:1</code></p><p>伪代码示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>UserInfo getUserInfo(long id){
userRedisKey = &quot;user:info:&quot; + id
value = redis.get(userRedisKey);
UserInfo userInfo;
if (value != null) {
userInfo = deserialize(value);
} else {
userInfo = mysql.get(id);
if (userInfo != null)
redis.setex(userRedisKey, 3600, serialize(userInfo));
}
return userInfo;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="视频播放量计数" tabindex="-1"><a class="header-anchor" href="#视频播放量计数"><span>视频播放量计数</span></a></h6><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>long incrVideoCounter(long id) {
key = &quot;video:playCount:&quot; + id;
return redis.incr(key);
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="共享session" tabindex="-1"><a class="header-anchor" href="#共享session"><span>共享session</span></a></h6><p>为了保证用户在集群场景下能够公用一个会话session，我们会另起一台服务器搭建redis服务保存会话session，避免用户因为负载均衡在各个服务器之间时重复登录。</p><h6 id="短信限速" tabindex="-1"><a class="header-anchor" href="#短信限速"><span>短信限速</span></a></h6><p>避免单用户一分钟不能超过5次访问</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>phoneNum = &quot;138xxxxxxxx&quot;;
key = &quot;shortMsg:limit:&quot; + phoneNum;
// SET key value EX 60 NX
isExists = redis.set(key,1,&quot;EX 60&quot;,&quot;NX&quot;);
if(isExists != null || redis.incr(key) &lt;=5){
//  通过
}else{
//  限速
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="哈希" tabindex="-1"><a class="header-anchor" href="#哈希"><span>哈希</span></a></h2><h4 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h4><p>存储键值对的数据结构，也叫映射，字典</p><h4 id="操作" tabindex="-1"><a class="header-anchor" href="#操作"><span>操作</span></a></h4><h6 id="设置值和取值" tabindex="-1"><a class="header-anchor" href="#设置值和取值"><span>设置值和取值</span></a></h6><p>语法</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 设置值
HSET key field value
## 获取值
HGET key field
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; HSET hashmap key1 value1 key2 value2
(integer) 2
127.0.0.1:6379&gt; HGET hashmap key1
&quot;value1&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="删除哈希一个键" tabindex="-1"><a class="header-anchor" href="#删除哈希一个键"><span>删除哈希一个键</span></a></h6><p>语法</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>HDEL key field
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>格式</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 删除hashmap的key1
127.0.0.1:6379&gt; HDEL hashmap key1
(integer) 1
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="计算哈希的key的个数" tabindex="-1"><a class="header-anchor" href="#计算哈希的key的个数"><span>计算哈希的key的个数</span></a></h6><p>语法</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>HLEN key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; HLEN hashmap
(integer) 1
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="批量设置哈希的值和批量获取哈希的值" tabindex="-1"><a class="header-anchor" href="#批量设置哈希的值和批量获取哈希的值"><span>批量设置哈希的值和批量获取哈希的值</span></a></h6><p>语法</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code> HMSET key  field value field value] field value]
 HMGET key  field field] field] field]


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; HMSET user:1 name xiaoming age 18 city fujian
OK
127.0.0.1:6379&gt; HMGET user:1 name age city
1) &quot;xiaoming&quot;
2) &quot;18&quot;
3) &quot;fujian&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="判断键值对是否存在" tabindex="-1"><a class="header-anchor" href="#判断键值对是否存在"><span>判断键值对是否存在</span></a></h6><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; HEXISTS key field
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; HEXISTS user:1 name
(integer) 1
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="获取所有key、获取所有value、获取所有的key-value" tabindex="-1"><a class="header-anchor" href="#获取所有key、获取所有value、获取所有的key-value"><span>获取所有key、获取所有value、获取所有的key-value</span></a></h6><p>语法</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 获取所有key
HKEYS key

## 获取所有value
 HVALS  key

## 获取所有key-value
HGETALL key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; HKEYS user:1
1) &quot;name&quot;
2) &quot;age&quot;
3) &quot;city&quot;
127.0.0.1:6379&gt; HVALS user:1
1) &quot;xiaoming&quot;
2) &quot;18&quot;
3) &quot;fujian&quot;
127.0.0.1:6379&gt; HGETALL user:1
1) &quot;name&quot;
2) &quot;xiaoming&quot;
3) &quot;age&quot;
4) &quot;18&quot;
5) &quot;city&quot;
6) &quot;fujian&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>建议:若哈希中存在多个键值对且我们需要一次性获取，建议使用hscan而不是hmget，避免造成redis阻塞</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 使用hscan从0位置获取所有键值对
127.0.0.1:6379&gt; HSCAN user:1 0
1) &quot;0&quot;
2) 1) &quot;name&quot;
   2) &quot;xiaoming&quot;
   3) &quot;age&quot;
   4) &quot;18&quot;
   5) &quot;city&quot;
   6) &quot;fujian&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="hincrby-hincrbyfloat" tabindex="-1"><a class="header-anchor" href="#hincrby-hincrbyfloat"><span>hincrby hincrbyfloat</span></a></h6><p>和incr类似，只不过增长的是field的值</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>hincrby key field
hincrbyfloat key field
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="计算field的长度" tabindex="-1"><a class="header-anchor" href="#计算field的长度"><span>计算field的长度</span></a></h6><p>语法</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>hstrlen key field
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>获取user:1 的name的长度
127.0.0.1:6379&gt; HSTRLEN user:1 name
(integer) 8
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="内部编码" tabindex="-1"><a class="header-anchor" href="#内部编码"><span>内部编码</span></a></h6><p>在键值对个数小于512且所有值都小于64字节时，哈希的内部编码为ziplist，当超过这些限制时使用的就是hashtable(超过限制后使用这种数据结构时间复杂度更低,查询效率为O(1))。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 小于64字节为ziplist
127.0.0.1:6379&gt; hset user:1 name xiaoming
(integer) 0
127.0.0.1:6379&gt; object encoding user:1
&quot;ziplist&quot;
## 超过后为hashtable
127.0.0.1:6379&gt; hset user:1 name djdjkhdjhdhdhwhquehqhdjksdhqjhdjkojhdlksadsahdjsalkhdjlksahdjoaehduioqwajwksdhjaksdhjsahdsajkdhjslkadhjlksahdjksahdjksahdjk
(integer) 0
127.0.0.1:6379&gt; object encoding user:1
&quot;hashtable&quot;


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="使用场景-1" tabindex="-1"><a class="header-anchor" href="#使用场景-1"><span>使用场景</span></a></h4><p>如果我们要缓存某行用户信息，使用哈希非常合适不过</p><p>原因如下:</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code> 1. 相较于字符串(占用过多的键)，哈希内聚更好更易于维护大量的用户信息
 2. 如果使用字符串进行序列化存储，就会造成网络io时序列化和反序列化的开销
 3. 操作简单，修改用户字段更加方便
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>需要注意:哈希存储相对二维表更加稀疏，如上图，二维表中null的数据，在哈希表中key是完全不存在的用户使用时需要考虑到这一点。</p><h2 id="列表" tabindex="-1"><a class="header-anchor" href="#列表"><span>列表</span></a></h2><h4 id="简介-1" tabindex="-1"><a class="header-anchor" href="#简介-1"><span>简介</span></a></h4><p>线性结构，允许重复元素，可以充当队列和栈。</p><h4 id="操作-1" tabindex="-1"><a class="header-anchor" href="#操作-1"><span>操作</span></a></h4><h6 id="添加" tabindex="-1"><a class="header-anchor" href="#添加"><span>添加</span></a></h6><p>从右边插入，语法:</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>RPUSH key value value]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 右边一次插入a b c
127.0.0.1:6379&gt; RPUSH list a b c
(integer) 3
## 查看list的元素
127.0.0.1:6379&gt; LRANGE list 0 -1
1) &quot;a&quot;
2) &quot;b&quot;
3) &quot;c&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从左边插入元素 lpush</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>LPUSH key value value...]
## 从左边依次插入
127.0.0.1:6379&gt; LPUSH arr a b c
(integer) 3
## 查看最终的元素值
127.0.0.1:6379&gt; LRANGE arr 0 -1
1) &quot;c&quot;
2) &quot;b&quot;
3) &quot;a&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>向元素前或者后添加元素</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>linsert key before|after pivot value
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例：向a后面添加一个元素a+</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; LRANGE list 0 -1
1) &quot;a&quot;
2) &quot;b&quot;
3) &quot;c&quot;
127.0.0.1:6379&gt; LINSERT list after a a+
(integer) 4
127.0.0.1:6379&gt; LRANGE list 0 -1
1) &quot;a&quot;
2) &quot;a+&quot;
3) &quot;b&quot;
4) &quot;c&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="查询" tabindex="-1"><a class="header-anchor" href="#查询"><span>查询</span></a></h6><p>查找指定范围的元素</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>lrange key start end
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 查看list的所有元素
127.0.0.1:6379&gt; LRANGE list 0 -1
1) &quot;a&quot;
2) &quot;a+&quot;
3) &quot;b&quot;
4) &quot;c&quot;
##  查看一个不存在的key的元素
127.0.0.1:6379&gt; LRANGE key 1 2
(empty array)
## 查看list 2-3的元素
127.0.0.1:6379&gt; LRANGE list 1 2
1) &quot;a+&quot;
2) &quot;b&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取指定索引的元素</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>lindex key index
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例:查看key为list第0个元素</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; LRANGE list 0 -1
1) &quot;a&quot;
2) &quot;a+&quot;
3) &quot;b&quot;
4) &quot;c&quot;
127.0.0.1:6379&gt; LINDEX list 0
&quot;a&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取列表长度</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>llen key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; LRANGE list 0 -1
1) &quot;a&quot;
2) &quot;a+&quot;
3) &quot;b&quot;
4) &quot;c&quot;
127.0.0.1:6379&gt; LLEN list
(integer) 4
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="删除" tabindex="-1"><a class="header-anchor" href="#删除"><span>删除</span></a></h6><p>从列表左侧弹出元素</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>lpop key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; LRANGE list 0 -1
1) &quot;a&quot;
2) &quot;a+&quot;
3) &quot;b&quot;
4) &quot;c&quot;
127.0.0.1:6379&gt; LPOP list
&quot;a&quot;
127.0.0.1:6379&gt; LRANGE list 0 -1
1) &quot;a+&quot;
2) &quot;b&quot;
3) &quot;c&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>同理右侧为rpop，不多赘述</p><p>删除元素</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>lrem key count value
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>count的大小有以下几种情况</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>1. 大于0，从左到右删除count个元素
2. 小于0，从右到左删除count个元素
3. =0 删除所有元素
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例:从左到右删除一个为a的元素</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; LRANGE list 0 -1
1) &quot;a+&quot;
2) &quot;b&quot;
3) &quot;c&quot;
127.0.0.1:6379&gt; LREM list 1 b
(integer) 1
127.0.0.1:6379&gt; LRANGE list 0 -1
1) &quot;a+&quot;
2) &quot;c&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修剪列表至指定索引范围</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>ltrim key start end
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例，将列表修剪为只有2 15索引范围内的元素</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; LRANGE list 0 -1
 1) &quot;a+&quot;
 2) &quot;z&quot;
 3) &quot;a&quot;
 4) &quot;b&quot;
 5) &quot;c&quot;
 6) &quot;d&quot;
 7) &quot;e&quot;
 8) &quot;f&quot;
 9) &quot;g&quot;
10) &quot;h&quot;
11) &quot;i&quot;
12) &quot;j&quot;
13) &quot;k&quot;
14) &quot;l&quot;
15) &quot;m&quot;
16) &quot;n&quot;
127.0.0.1:6379&gt; LTRIM list 2 15
OK
127.0.0.1:6379&gt; LRANGE list 0 -1
 1) &quot;a&quot;
 2) &quot;b&quot;
 3) &quot;c&quot;
 4) &quot;d&quot;
 5) &quot;e&quot;
 6) &quot;f&quot;
 7) &quot;g&quot;
 8) &quot;h&quot;
 9) &quot;i&quot;
10) &quot;j&quot;
11) &quot;k&quot;
12) &quot;l&quot;
13) &quot;m&quot;
14) &quot;n&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="修改" tabindex="-1"><a class="header-anchor" href="#修改"><span>修改</span></a></h6><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>lset key index newValue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h6 id="阻塞操作" tabindex="-1"><a class="header-anchor" href="#阻塞操作"><span>阻塞操作</span></a></h6><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>blpop key key ...] timeout
brpop key key ...] timeout
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>brpop 示例，当timeout大于0时，若有元素立即返回，若没有则等到对应时间为止 若timeout设置为0，则无限等待，如下所示，笔者使用另一个客户端push一个元素进来，这个阻塞就会立刻将这个元素弹出。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; BRPOP arr 3
1) &quot;arr&quot;
2) &quot;a&quot;
127.0.0.1:6379&gt; BRPOP arr 3
1) &quot;arr&quot;
2) &quot;b&quot;
127.0.0.1:6379&gt; BRPOP arr 3
1) &quot;arr&quot;
2) &quot;c&quot;
127.0.0.1:6379&gt; BRPOP arr 3
(nil)
(3.04s)
127.0.0.1:6379&gt; BRPOP arr 3
(nil)
(3.07s)
127.0.0.1:6379&gt; BRPOP arr 0
1) &quot;arr&quot;
2) &quot;a&quot;
(43.69s)

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="内部编码-1" tabindex="-1"><a class="header-anchor" href="#内部编码-1"><span>内部编码</span></a></h6><p>当内部元素个数小于512，且每个元素小于64字节，列表默认使用ziplist，反之就会使用linklist</p><h6 id="使用场景-2" tabindex="-1"><a class="header-anchor" href="#使用场景-2"><span>使用场景</span></a></h6><p>Redis的lpush+brpop命令组合即可实现阻塞队列，如下图，每个消费者只需要关注自己感兴趣的专题即可，作为生产者只需不断使lpush添加专题即可。</p><p>关于列表更多用法可以参见以下口诀</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>1. lpush+lpop=Stack（栈）
2. lpush+rpop=Queue（队列）
3. lpsh+ltrim=Capped Collection（有限集合）
4. lpush+brpop=Message Queue（消息队列）
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="集合" tabindex="-1"><a class="header-anchor" href="#集合"><span>集合</span></a></h2><h4 id="特点" tabindex="-1"><a class="header-anchor" href="#特点"><span>特点</span></a></h4><ol><li>最多可存储2^32-1个元素</li><li>集合内部元素不重复</li></ol><h4 id="命令" tabindex="-1"><a class="header-anchor" href="#命令"><span>命令</span></a></h4><h6 id="添加元素" tabindex="-1"><a class="header-anchor" href="#添加元素"><span>添加元素</span></a></h6><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>sadd key element element ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例，可以看到第2次添加的元素并没有成功</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; SADD set a b c
(integer) 3
127.0.0.1:6379&gt; SADD set a b
(integer) 0
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="删除元素" tabindex="-1"><a class="header-anchor" href="#删除元素"><span>删除元素</span></a></h6><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>srem key element element ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h6 id="计算集合大小" tabindex="-1"><a class="header-anchor" href="#计算集合大小"><span>计算集合大小</span></a></h6><p>注意，这个计算的时间复杂度为O(1)，因为获得的这个集合的大小并不是计算来的，而是通过redis维护的一个内部变量得来的。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>scard key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h6 id="判断元素是否在集合中" tabindex="-1"><a class="header-anchor" href="#判断元素是否在集合中"><span>判断元素是否在集合中</span></a></h6><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>sismember key element
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; SISMEMBER set a
(integer) 1
127.0.0.1:6379&gt; SISMEMBER set ac
(integer) 0
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="随机获取集合内的元素" tabindex="-1"><a class="header-anchor" href="#随机获取集合内的元素"><span>随机获取集合内的元素</span></a></h6><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>srandmember key count]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; SRANDMEMBER set 1
1) &quot;a&quot;
127.0.0.1:6379&gt; SRANDMEMBER set 1
1) &quot;c&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="随机弹出一个元素" tabindex="-1"><a class="header-anchor" href="#随机弹出一个元素"><span>随机弹出一个元素</span></a></h6><p>与srandmember 差不多，只不过该操作会将元素输出并将集合中的这个元素删除</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>spop key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; SPOP set
&quot;c&quot;
127.0.0.1:6379&gt; SPOP set
&quot;a&quot;
127.0.0.1:6379&gt; SPOP set
&quot;b&quot;
127.0.0.1:6379&gt; SPOP set
(nil)
127.0.0.1:6379&gt; SPOP set
(nil)
127.0.0.1:6379&gt; SPOP set
(nil)
127.0.0.1:6379&gt; SPOP set
(nil)
127.0.0.1:6379&gt; SPOP set
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="获取所有元素" tabindex="-1"><a class="header-anchor" href="#获取所有元素"><span>获取所有元素</span></a></h6><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>smembers key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h6 id="获取两个集合之间的交集" tabindex="-1"><a class="header-anchor" href="#获取两个集合之间的交集"><span>获取两个集合之间的交集</span></a></h6><p>语法</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>sinter key key ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例，可以看出set1和set2的交集为a</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; SADD set1 a b c d
(integer) 4
127.0.0.1:6379&gt; SADD set2 a e f g h
(integer) 5
127.0.0.1:6379&gt; SINTER set1 set2
1) &quot;a&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="求并集" tabindex="-1"><a class="header-anchor" href="#求并集"><span>求并集</span></a></h6><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>suinon key key ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h6 id="求差集" tabindex="-1"><a class="header-anchor" href="#求差集"><span>求差集</span></a></h6><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>sdiff key key ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例，注意这个差集指的是第一个集合有，其他集合没有的元素</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; SDIFF set1 set2
1) &quot;b&quot;
2) &quot;d&quot;
3) &quot;c&quot;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="将交集、差集、并集结果保存" tabindex="-1"><a class="header-anchor" href="#将交集、差集、并集结果保存"><span>将交集、差集、并集结果保存</span></a></h6><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>sinterstore destination key key ...]
suionstore destination key key ...]
sdiffstore destination key key ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例:将并集的结果保存</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; SADD set1 a b c d
(integer) 4
127.0.0.1:6379&gt; SADD set2 a e f g h
(integer) 5
127.0.0.1:6379&gt; SINTERstore set3 set1 set2
(integer) 1
127.0.0.1:6379&gt; SMEMBERS set3
1) &quot;a&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="内部编码-2" tabindex="-1"><a class="header-anchor" href="#内部编码-2"><span>内部编码</span></a></h4><p>当元素为整数且大小小于512时会使用intset(节省内存)，反之就会转为hashtable提高效率。</p><h4 id="使用场景-3" tabindex="-1"><a class="header-anchor" href="#使用场景-3"><span>使用场景</span></a></h4><ol><li>sadd=Tagging（标签,例如交友网站个人标签）</li><li>spop/srandmember=Random item（生成随机数，比如抽奖）</li><li>sadd+sinter=Social Graph（社交需求，与附近的人爱好匹配）</li></ol><h2 id="有序集合" tabindex="-1"><a class="header-anchor" href="#有序集合"><span>有序集合</span></a></h2><h4 id="简介-2" tabindex="-1"><a class="header-anchor" href="#简介-2"><span>简介</span></a></h4><ol><li>相较于集合，增加一个score属性，使得整体有序。</li><li>集合元素不可重复，但是score可以重复。</li></ol><h4 id="指令" tabindex="-1"><a class="header-anchor" href="#指令"><span>指令</span></a></h4><h6 id="添加成员" tabindex="-1"><a class="header-anchor" href="#添加成员"><span>添加成员</span></a></h6><p>命令</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>zadd key score member score member ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; zadd zset 1 tom 2 jack 3 lucy
(integer) 3
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可选项</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>1. nx：member必须不存在，才可以设置成功，用于添加。
2. xx：member必须存在，才可以设置成功，用于更新。
3. ch：返回此次操作后，有序集合元素和分数发生变化的个数
4. incr：对score做增加，相当于后面介绍的zincrby。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例:如果tom存在，给tom自增。</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; zadd zset xx incr 1 tom
&quot;2&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>相比于集合，有序集合增加了排序的操作，添加成员的时间复杂度由原来的<code>O(1)</code>变为<code>O(logn)</code></p><h6 id="计算有序集合的大小" tabindex="-1"><a class="header-anchor" href="#计算有序集合的大小"><span>计算有序集合的大小</span></a></h6><p>于scard一样，时间复杂度也是<code>O(1)</code></p><p>指令</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>zcard key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; ZCARD zset
(integer) 3
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="查看成员分数" tabindex="-1"><a class="header-anchor" href="#查看成员分数"><span>查看成员分数</span></a></h6><p>指令</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>zscore key member
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; zscore zset tom
&quot;3&quot;
127.0.0.1:6379&gt; zscore zset jack
&quot;2&quot;
127.0.0.1:6379&gt; zscore zset xiaoming
(nil)
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="计算成员排名" tabindex="-1"><a class="header-anchor" href="#计算成员排名"><span>计算成员排名</span></a></h6><p>命令</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 升序排名
zrank key member
## 降序排名
zrevrank key member
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; ZRANK zset tom
(integer) 2
127.0.0.1:6379&gt; ZrevRANK zset tom
(integer) 0
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="删除成员" tabindex="-1"><a class="header-anchor" href="#删除成员"><span>删除成员</span></a></h6><p>命令</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>zrem key member member ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; ZREM zset tom jack
(integer) 2
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="给成员增加分数" tabindex="-1"><a class="header-anchor" href="#给成员增加分数"><span>给成员增加分数</span></a></h6><p>指令</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>zincrby key increment member
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; ZINCRBY zset 100 tom
&quot;100&quot;
127.0.0.1:6379&gt; ZINCRBY zset 100 tom
&quot;200&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="查看排名" tabindex="-1"><a class="header-anchor" href="#查看排名"><span>查看排名</span></a></h6><p>指令</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>zrange key start end withscores]
zrevrange key start end withscores]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; ZRANGE zset 0 -1 withscores
1) &quot;lucy&quot;
2) &quot;3&quot;
3) &quot;tom&quot;
4) &quot;200&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="返回指定分数范围的成员" tabindex="-1"><a class="header-anchor" href="#返回指定分数范围的成员"><span>返回指定分数范围的成员</span></a></h6><p>指令</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>zrangebyscore key min max withscores] limit offset count]
zrevrangebyscore key max min withscores] limit offset count]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; ZRANGEBYSCORE zset 0 300 withscores
1) &quot;lucy&quot;
2) &quot;3&quot;
3) &quot;tom&quot;
4) &quot;200&quot;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取10到无限大的成员</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; ZRANGEBYSCORE zset (10 +inf withscores
1) &quot;liu&quot;
2) &quot;11&quot;
3) &quot;tom&quot;
4) &quot;200&quot;
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="获取指定分数范围内的用户" tabindex="-1"><a class="header-anchor" href="#获取指定分数范围内的用户"><span>获取指定分数范围内的用户</span></a></h6><p>指令</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>zcount key min max
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; ZCOUNT zset 0 10
(integer) 2
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="删除指定排名内的用户" tabindex="-1"><a class="header-anchor" href="#删除指定排名内的用户"><span>删除指定排名内的用户</span></a></h6><p>指令</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>zremrangebyrank key start end
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例:删除前3名成员</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; ZREMRANGEBYRANK zset 0 2
(integer) 3
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="删除指定分数范围内的用户" tabindex="-1"><a class="header-anchor" href="#删除指定分数范围内的用户"><span>删除指定分数范围内的用户</span></a></h6><p>指令</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>zremrangebyscore key min max
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>127.0.0.1:6379&gt; ZREMRANGEBYSCORE zset (250 +inf
(integer) 1
127.0.0.1:6379&gt;

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="内部编码-3" tabindex="-1"><a class="header-anchor" href="#内部编码-3"><span>内部编码</span></a></h4><p>当集合size小于512且每个字符串大小不超过64字节时，有序集合使用的时ziplist，反之就是使用调表。从设计的角度来看，使用平衡树或者红黑树也能解决问题，但是跳表的实现相较于前者更加简单。查询也差不多。</p><h4 id="使用场景-4" tabindex="-1"><a class="header-anchor" href="#使用场景-4"><span>使用场景</span></a></h4><p>常用于点赞、播放量等排行榜</p><p>如下就模拟了点赞排行榜的操作</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>## 小明获得10个赞
127.0.0.1:6379&gt; zadd user:ranking:20220810 10 xiaoming
(integer) 1
## 小王获得11个赞
127.0.0.1:6379&gt; zadd user:ranking:20220810 11 xiaowang
(integer) 1
## 小刘获得8个赞
127.0.0.1:6379&gt; zadd user:ranking:20220810 8 xiaoliu
(integer) 1
## 小刘的赞+1
127.0.0.1:6379&gt; zincrby user:ranking:20220810  1  xiaoliu
&quot;9&quot;
## 查看排名前3
127.0.0.1:6379&gt; zrevrange user:ranking:20220810 0 2
1) &quot;xiaowang&quot;
2) &quot;xiaoming&quot;
3) &quot;xiaoliu&quot;
## 小刘被取消一个赞
127.0.0.1:6379&gt; zincrby user:ranking:20220810  -1  xiaoliu
&quot;8&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!----><!--]--><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 1585225345@qq.com">MJX</span><!--]--><!--]--></div></div></footer><!----><!----><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright © 2024 maijunxuan </div></footer></div><!--]--><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-Digg1ELS.js" defer></script>
  </body>
</html>
