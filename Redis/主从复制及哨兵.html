<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.94" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"ä¸»ä»å¤åˆ¶å’Œå“¨å…µæœºåˆ¶","image":["https://s2.loli.net/2023/06/14/Zsi4Ljf6Hho8mB7.png","https://s2.loli.net/2023/06/14/ZRTEuoHWa4gYGO8.png","https://s2.loli.net/2023/06/14/8z1ETMeRfVLh9l6.png","https://s2.loli.net/2023/06/14/GaXSYFCxBnqQNye.png","https://s2.loli.net/2023/06/14/4k7jFqvTzVcKU9x.png"],"dateModified":"2023-08-28T00:49:57.000Z","author":[{"@type":"Person","name":"maijunxuan","email":"maijunxuan0309@gmail.com"}]}</script><meta property="og:url" content="https://maijunxuan.cn/Redis/%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%8F%8A%E5%93%A8%E5%85%B5.html"><meta property="og:site_name" content="éº¦ä¿Šè½©çš„åšå®¢"><meta property="og:title" content="ä¸»ä»å¤åˆ¶å’Œå“¨å…µæœºåˆ¶"><meta property="og:description" content="ä¸»ä»å¤åˆ¶å’Œå“¨å…µæœºåˆ¶ ä¸»ä»å¤åˆ¶æ¦‚è¿° ä¸»ä»å¤åˆ¶å°±æ˜¯å°†ä¸»èŠ‚ç‚¹(master)çš„æ•°æ®å¤åˆ¶åˆ°ä»èŠ‚ç‚¹(slave)ï¼Œè®©å¤šä¸ªèŠ‚ç‚¹æ‰¿è½½ç”¨æˆ·çš„è¯·æ±‚ã€‚ ä¸»ä»å¤åˆ¶å…·å¤‡ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹: ä¸»ä»å¤åˆ¶é…ç½®ç¤ºä¾‹ ä¸€ä¸»äºŒä»†é…ç½® åˆ›å»º3ä¸ªredisé…ç½®æ–‡ä»¶ï¼Œä»¥ç¬”è€…ä¸ºä¾‹ï¼Œåå­—åˆ†åˆ«ä¸ºredis6379.confã€redis6380.confã€redis6381.conf ä¸»èŠ‚ç‚¹ä¸º6379ï¼Œé…ç½®..."><meta property="og:type" content="article"><meta property="og:image" content="https://s2.loli.net/2023/06/14/Zsi4Ljf6Hho8mB7.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-08-28T00:49:57.000Z"><meta property="article:modified_time" content="2023-08-28T00:49:57.000Z"><link rel="icon" href="/favicon.ico"><meta name="robots" content="all"><meta name="author" content="maijunxuan"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta name="apple-mobile-web-app-capable" content="yes"><link rel="alternate" type="application/atom+xml" href="https://maijunxuan.cn/atom.xml" title="éº¦ä¿Šè½©çš„åšå®¢ Atom Feed"><link rel="alternate" type="application/json" href="https://maijunxuan.cn/feed.json" title="éº¦ä¿Šè½©çš„åšå®¢ JSON Feed"><link rel="alternate" type="application/rss+xml" href="https://maijunxuan.cn/rss.xml" title="éº¦ä¿Šè½©çš„åšå®¢ RSS Feed"><title>ä¸»ä»å¤åˆ¶å’Œå“¨å…µæœºåˆ¶ | éº¦ä¿Šè½©çš„åšå®¢</title><meta name="description" content="ä¸»ä»å¤åˆ¶å’Œå“¨å…µæœºåˆ¶ ä¸»ä»å¤åˆ¶æ¦‚è¿° ä¸»ä»å¤åˆ¶å°±æ˜¯å°†ä¸»èŠ‚ç‚¹(master)çš„æ•°æ®å¤åˆ¶åˆ°ä»èŠ‚ç‚¹(slave)ï¼Œè®©å¤šä¸ªèŠ‚ç‚¹æ‰¿è½½ç”¨æˆ·çš„è¯·æ±‚ã€‚ ä¸»ä»å¤åˆ¶å…·å¤‡ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹: ä¸»ä»å¤åˆ¶é…ç½®ç¤ºä¾‹ ä¸€ä¸»äºŒä»†é…ç½® åˆ›å»º3ä¸ªredisé…ç½®æ–‡ä»¶ï¼Œä»¥ç¬”è€…ä¸ºä¾‹ï¼Œåå­—åˆ†åˆ«ä¸ºredis6379.confã€redis6380.confã€redis6381.conf ä¸»èŠ‚ç‚¹ä¸º6379ï¼Œé…ç½®...">
    <link rel="preload" href="/assets/style-DDpPNf-y.css" as="style"><link rel="stylesheet" href="/assets/style-DDpPNf-y.css">
    <link rel="modulepreload" href="/assets/app-DDXXRmhs.js"><link rel="modulepreload" href="/assets/ä¸»ä»å¤åˆ¶åŠå“¨å…µ.html-Ce-QL1Lc.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container no-sidebar external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="å¸¦æˆ‘å›å®¶"><!----><!----><span class="vp-site-name">éº¦ä¿Šè½©çš„åšå®¢</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æ—¥å¸¸"><!--[--><!---->æ—¥å¸¸<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E6%97%A5%E5%B8%B8/IDEA%E7%BF%BB%E8%AF%91%E6%8F%92%E4%BB%B6%E6%8A%A5%E9%94%99%E6%9B%B4%E6%96%B0TKK%E7%9A%84%E9%97%AE%E9%A2%98.html" aria-label="IDEAç¿»è¯‘æ’ä»¶æŠ¥é”™æ›´æ–°TKKçš„é—®é¢˜"><!---->IDEAç¿»è¯‘æ’ä»¶æŠ¥é”™æ›´æ–°TKKçš„é—®é¢˜<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E6%97%A5%E5%B8%B8/Vue3%E4%B8%AD%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E8%83%BD%E4%BD%BF%E7%94%A8this.html" aria-label="Vue3ä¸­ä¸ºä»€ä¹ˆä¸èƒ½ä½¿ç”¨this"><!---->Vue3ä¸­ä¸ºä»€ä¹ˆä¸èƒ½ä½¿ç”¨this<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E6%97%A5%E5%B8%B8/windows%E7%AB%AF%E5%8F%A3%E5%86%B2%E7%AA%81%E8%A7%A3%E5%86%B3.html" aria-label="windowsç«¯å£å†²çªè§£å†³"><!---->windowsç«¯å£å†²çªè§£å†³<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E6%97%A5%E5%B8%B8/%E8%A7%A3%E5%86%B3%E4%BE%9D%E8%B5%96%E5%86%B2%E7%AA%81.html" aria-label="è§£å†³ä¾èµ–å†²çª"><!---->è§£å†³ä¾èµ–å†²çª<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Java"><!--[--><!---->Java<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Java/Java%E5%9F%BA%E7%A1%80%E5%B0%8F%E7%BB%93.html" aria-label="JavaåŸºç¡€å°ç»“"><!---->JavaåŸºç¡€å°ç»“<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Java/Java%E6%B3%A8%E8%A7%A3%E5%B0%8F%E7%BB%93.html" aria-label="Javaæ³¨è§£å°ç»“"><!---->Javaæ³¨è§£å°ç»“<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Java/Java%E5%8F%8D%E5%B0%84%E5%B0%8F%E7%BB%93.html" aria-label="Javaåå°„å°ç»“"><!---->Javaåå°„å°ç»“<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Java/Java%E4%B8%AD%E7%9A%84%E6%B3%9B%E5%9E%8B.html" aria-label="Javaä¸­çš„æ³›å‹"><!---->Javaä¸­çš„æ³›å‹<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Java/è°ˆè°ˆJavaçš„å¼‚å¸¸.html" aria-label="è°ˆè°ˆJavaçš„å¼‚å¸¸"><!---->è°ˆè°ˆJavaçš„å¼‚å¸¸<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Java/Lambda%E5%AE%9E%E8%B7%B5.html" aria-label="Lambdaå®è·µ"><!---->Lambdaå®è·µ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Java/Stream%E6%B5%81%E5%AE%9E%E8%B7%B5.html" aria-label="Streamæµå®è·µ"><!---->Streamæµå®è·µ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Java/Java%E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2.html" aria-label="Javaä¸­çš„å­—ç¬¦ä¸²"><!---->Javaä¸­çš„å­—ç¬¦ä¸²<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="JUC"><!--[--><!---->JUC<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/JUC/Java%E4%B8%AD%E7%9A%84%E7%BA%BF%E7%A8%8B%E6%B1%A0.html" aria-label="Javaä¸­çš„çº¿ç¨‹æ± "><!---->Javaä¸­çš„çº¿ç¨‹æ± <!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/JUC/Java%E4%B8%AD%E7%9A%84%E5%B9%B6%E5%8F%91%E5%AE%B9%E5%99%A8.html" aria-label="Javaä¸­çš„å¹¶å‘å®¹å™¨"><!---->Javaä¸­çš„å¹¶å‘å®¹å™¨<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/JUC/%E8%B0%88%E8%B0%88ThreadLocal.html" aria-label="è°ˆè°ˆThreadLocal"><!---->è°ˆè°ˆThreadLocal<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/JUC/synchronized%E7%9A%84%E4%BC%98%E5%8C%96.html" aria-label="synchronizedçš„ä¼˜åŒ–"><!---->synchronizedçš„ä¼˜åŒ–<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/JUC/CAS%E5%92%8C%E5%8E%9F%E5%AD%90%E7%B1%BB.html" aria-label="CASå’ŒåŸå­ç±»"><!---->CASå’ŒåŸå­ç±»<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/JUC/volatile%E5%92%8CCAS%E7%9A%84%E5%BC%8A%E7%AB%AF.html" aria-label="volatileå’ŒCASçš„å¼Šç«¯"><!---->volatileå’ŒCASçš„å¼Šç«¯<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/JUC/CompletableFuture%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8.html" aria-label="CompletableFutureç®€å•ä½¿ç”¨"><!---->CompletableFutureç®€å•ä½¿ç”¨<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/JUC/AQS%E7%AE%80%E8%BF%B0.html" aria-label="AQSç®€è¿°"><!---->AQSç®€è¿°<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/JUC/JUC%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB.html" aria-label="JUCå¸¸ç”¨å·¥å…·ç±»"><!---->JUCå¸¸ç”¨å·¥å…·ç±»<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="MySQL"><!--[--><!---->MySQL<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/MySQL/MySQL%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5.html" aria-label="MySQLå¸¸ç”¨è¯­å¥"><!---->MySQLå¸¸ç”¨è¯­å¥<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/MySQL/MySQL%E4%B8%AD%E7%9A%84%E4%BA%8B%E5%8A%A1.html" aria-label="MySQLä¸­çš„äº‹åŠ¡"><!---->MySQLä¸­çš„äº‹åŠ¡<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/MySQL/%E4%B8%80%E6%9D%A1SQL%E7%9A%84%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B.html" aria-label="ä¸€æ¡SQLçš„æ‰§è¡Œè¿‡ç¨‹"><!---->ä¸€æ¡SQLçš„æ‰§è¡Œè¿‡ç¨‹<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/MySQL/MySQL%E4%B8%ADdatetime%E5%92%8Ctimestamp%E7%9A%84%E5%8C%BA%E5%88%AB%E4%B8%8E%E9%80%89%E6%8B%A9.html" aria-label="MySQLä¸­datetimeå’Œtimestampçš„åŒºåˆ«ä¸é€‰æ‹©"><!---->MySQLä¸­datetimeå’Œtimestampçš„åŒºåˆ«ä¸é€‰æ‹©<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/MySQL/%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95%E5%92%8C%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95%E7%9A%84%E5%8C%BA%E5%88%AB.html" aria-label="æ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•çš„åŒºåˆ«"><!---->æ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•çš„åŒºåˆ«<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/MySQL/Explain%E8%AF%AD%E5%8F%A5.html" aria-label="Explainè¯­å¥"><!---->Explainè¯­å¥<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/MySQL/MySQL%E7%9A%84%E6%89%A7%E8%A1%8C%E6%88%90%E6%9C%AC%E6%80%8E%E4%B9%88%E7%AE%97.html" aria-label="MySQLçš„æ‰§è¡Œæˆæœ¬æ€ä¹ˆç®—"><!---->MySQLçš„æ‰§è¡Œæˆæœ¬æ€ä¹ˆç®—<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/MySQL/MVCC%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86.html" aria-label="MVCCå®ç°åŸç†"><!---->MVCCå®ç°åŸç†<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Redis"><!--[--><!---->Redis<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Redis/Redis%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.html" aria-label="Redisçš„å®‰è£…ä¸åŸºæœ¬æ“ä½œ"><!---->Redisçš„å®‰è£…ä¸åŸºæœ¬æ“ä½œ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Redis/Redis%E7%9A%843%E7%A7%8D%E7%89%B9%E6%AE%8A%E7%B1%BB%E5%9E%8B.html" aria-label="Redisçš„3ç§ç‰¹æ®Šç±»å‹"><!---->Redisçš„3ç§ç‰¹æ®Šç±»å‹<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Redis/Redis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D.html" aria-label="Redisé…ç½®æ–‡ä»¶ä»‹ç»"><!---->Redisé…ç½®æ–‡ä»¶ä»‹ç»<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Redis/Redis%E7%9A%84Java%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%A4%BA%E4%BE%8B.html" aria-label="Redisçš„Javaå®¢æˆ·ç«¯ç¤ºä¾‹"><!---->Redisçš„Javaå®¢æˆ·ç«¯ç¤ºä¾‹<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Redis/Redis%E4%BA%8B%E5%8A%A1.html" aria-label="Redisäº‹åŠ¡"><!---->Redisäº‹åŠ¡<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Redis/RDB%E7%AE%80%E4%BB%8B.html" aria-label="RDBç®€ä»‹"><!---->RDBç®€ä»‹<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Redis/AOF%E7%AE%80%E4%BB%8B.html" aria-label="AOFç®€ä»‹"><!---->AOFç®€ä»‹<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/Redis/%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%8F%8A%E5%93%A8%E5%85%B5.html" aria-label="ä¸»ä»å¤åˆ¶åŠå“¨å…µ"><!---->ä¸»ä»å¤åˆ¶åŠå“¨å…µ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Redis/Redis%E9%9B%86%E7%BE%A4.html" aria-label="Redisé›†ç¾¤"><!---->Redisé›†ç¾¤<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Redis/%E4%BD%BF%E7%94%A8%E7%BC%93%E5%AD%98%E4%BC%9A%E5%AD%98%E5%9C%A8%E5%93%AA%E4%BA%9B%E9%97%AE%E9%A2%98.html" aria-label="ä½¿ç”¨ç¼“å­˜ä¼šå­˜åœ¨å“ªäº›é—®é¢˜"><!---->ä½¿ç”¨ç¼“å­˜ä¼šå­˜åœ¨å“ªäº›é—®é¢˜<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="å·¥å…·"><!--[--><!---->å·¥å…·<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Git</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E5%B7%A5%E5%85%B7/Git/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" aria-label="Gitå¸¸ç”¨å‘½ä»¤"><!---->Gitå¸¸ç”¨å‘½ä»¤<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E5%B7%A5%E5%85%B7/Git/Git%20%E6%8F%90%E4%BA%A4%E8%A7%84%E7%BA%A6.html" aria-label="Git æäº¤è§„çº¦"><!---->Git æäº¤è§„çº¦<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Linux</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E5%B7%A5%E5%85%B7/Linux/Linux%E7%9A%84%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84.html" aria-label="Linuxçš„æ–‡ä»¶ç»“æ„"><!---->Linuxçš„æ–‡ä»¶ç»“æ„<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E5%B7%A5%E5%85%B7/Linux/Linux%E7%9A%84%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86.html" aria-label="Linuxçš„è¿›ç¨‹ç®¡ç†"><!---->Linuxçš„è¿›ç¨‹ç®¡ç†<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E5%B7%A5%E5%85%B7/Linux/Linux%E5%B8%B8%E7%94%A8%E7%BD%91%E7%BB%9C%E5%91%BD%E4%BB%A4.html" aria-label="Linuxå¸¸ç”¨ç½‘ç»œå‘½ä»¤"><!---->Linuxå¸¸ç”¨ç½‘ç»œå‘½ä»¤<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Docker</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E5%B7%A5%E5%85%B7/Docker/Docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html" aria-label="Dockerå¸¸ç”¨å‘½ä»¤"><!---->Dockerå¸¸ç”¨å‘½ä»¤<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E5%B7%A5%E5%85%B7/Docker/DokcerCompose%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8.html" aria-label="DokcerComposeç®€å•ä½¿ç”¨"><!---->DokcerComposeç®€å•ä½¿ç”¨<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Nginx</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E5%B7%A5%E5%85%B7/Nginx/Nginx%E7%9A%84%E5%AE%89%E8%A3%85.html" aria-label="Nginxçš„å®‰è£…"><!---->Nginxçš„å®‰è£…<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E5%B7%A5%E5%85%B7/Nginx/Nginx%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8.html" aria-label="NginxåŸºç¡€å…¥é—¨"><!---->NginxåŸºç¡€å…¥é—¨<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">å…¶ä»–</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E5%B7%A5%E5%85%B7/%E5%85%B6%E4%BB%96/Arthas%E4%BD%BF%E7%94%A8%E5%B0%8F%E7%BB%93.html" aria-label="Arthasä½¿ç”¨å°ç»“"><!---->Arthasä½¿ç”¨å°ç»“<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/å·¥å…·/å…¶ä»–/åŸºäºGiteeå®ç°Jenkinsè‡ªåŠ¨åŒ–éƒ¨ç½²SpringBooté¡¹ç›®/" aria-label="åŸºäºGiteeå®ç°Jenkinsè‡ªåŠ¨åŒ–éƒ¨ç½²SpringBooté¡¹ç›®"><!---->åŸºäºGiteeå®ç°Jenkinsè‡ªåŠ¨åŒ–éƒ¨ç½²SpringBooté¡¹ç›®<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E5%B7%A5%E5%85%B7/%E5%85%B6%E4%BB%96/%E5%9F%BA%E4%BA%8Ejmeter%E5%AE%8C%E6%88%90%E5%8E%8B%E6%B5%8B.html" aria-label="åŸºäºjmeterå®Œæˆå‹æµ‹"><!---->åŸºäºjmeterå®Œæˆå‹æµ‹<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="åˆ†å¸ƒå¼"><!--[--><!---->åˆ†å¸ƒå¼<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E5%88%86%E5%B8%83%E5%BC%8F/CAP%E5%92%8CBASE%E7%90%86%E8%AE%BA.html" aria-label="CAPå’ŒBASEç†è®º"><!---->CAPå’ŒBASEç†è®º<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html" aria-label="åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆ"><!---->åˆ†å¸ƒå¼äº‹åŠ¡çš„è§£å†³æ–¹æ¡ˆ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E7%9A%84%E5%87%A0%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F.html" aria-label="åˆ†å¸ƒå¼é”çš„å‡ ç§å®ç°æ–¹å¼"><!---->åˆ†å¸ƒå¼é”çš„å‡ ç§å®ç°æ–¹å¼<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E5%88%86%E5%B8%83%E5%BC%8F/%E4%BB%80%E4%B9%88%E6%98%AFxxl-job%EF%BC%8C%E5%AE%83%E8%A7%A3%E5%86%B3%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98.html" aria-label="ä»€ä¹ˆæ˜¯xxl-jobï¼Œå®ƒè§£å†³ä»€ä¹ˆé—®é¢˜"><!---->ä»€ä¹ˆæ˜¯xxl-jobï¼Œå®ƒè§£å†³ä»€ä¹ˆé—®é¢˜<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æ¡†æ¶"><!--[--><!---->æ¡†æ¶<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Spring</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E6%A1%86%E6%9E%B6/Spring/Spring%E7%9A%84%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3.html" aria-label="Springçš„å¸¸ç”¨æ³¨è§£"><!---->Springçš„å¸¸ç”¨æ³¨è§£<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E6%A1%86%E6%9E%B6/Spring/@Autowired%E6%B3%A8%E8%A7%A3%E8%AF%A6%E8%A7%A3.html" aria-label="@Autowiredæ³¨è§£è¯¦è§£"><!---->@Autowiredæ³¨è§£è¯¦è§£<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/æ¡†æ¶/Spring/SpringBeançš„ä½œç”¨åŸŸ.html" aria-label="SpringBeançš„ä½œç”¨åŸŸ"><!---->SpringBeançš„ä½œç”¨åŸŸ<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E6%A1%86%E6%9E%B6/Spring/Spring%E4%B8%89%E7%BA%A7%E7%BC%93%E5%AD%98%E4%B8%8E%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96.html" aria-label="Springä¸‰çº§ç¼“å­˜ä¸å¾ªç¯ä¾èµ–"><!---->Springä¸‰çº§ç¼“å­˜ä¸å¾ªç¯ä¾èµ–<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E6%A1%86%E6%9E%B6/Spring/JDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E5%92%8CCGlib%E4%BB%A3%E7%90%86.html" aria-label="JDKåŠ¨æ€ä»£ç†å’ŒCGlibä»£ç†"><!---->JDKåŠ¨æ€ä»£ç†å’ŒCGlibä»£ç†<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Netty</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E6%A1%86%E6%9E%B6/Netty/Netty%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5%E5%85%A5%E9%97%A8%E5%B0%8F%E7%BB%93.html" aria-label="NettyåŸºç¡€æ¦‚å¿µå…¥é—¨å°ç»“"><!---->NettyåŸºç¡€æ¦‚å¿µå…¥é—¨å°ç»“<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="ä¸­é—´ä»¶"><!--[--><!---->ä¸­é—´ä»¶<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">æ¶ˆæ¯é˜Ÿåˆ—</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/RabbitMQ/RabbitMQ%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8.html" aria-label="RabbitMQç®€å•ä½¿ç”¨"><!---->RabbitMQç®€å•ä½¿ç”¨<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Canal</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/%E4%B8%AD%E9%97%B4%E4%BB%B6/Canal/Canal%E7%9A%84%E4%BD%BF%E7%94%A8.html" aria-label="Canalçš„ä½¿ç”¨"><!---->Canalçš„ä½¿ç”¨<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Sharding-JDBC</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/ä¸­é—´ä»¶/Canal/Canalçš„ä½¿ç”¨/Sharding-JDBCçš„ç®€å•ä½¿ç”¨.html" aria-label="Sharding-JDBCçš„ç®€å•ä½¿ç”¨"><!---->Sharding-JDBCçš„ç®€å•ä½¿ç”¨<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="ä¸šåŠ¡ç†è§£"><!--[--><!---->ä¸šåŠ¡ç†è§£<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/%E4%B8%9A%E5%8A%A1%E7%90%86%E8%A7%A3/%E5%AF%B9%E6%94%AF%E4%BB%98%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%B8%AA%E4%BA%BA%E7%90%86%E8%A7%A3.html" aria-label="å¯¹æ”¯ä»˜ç³»ç»Ÿçš„ä¸ªäººç†è§£"><!---->å¯¹æ”¯ä»˜ç³»ç»Ÿçš„ä¸ªäººç†è§£<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!----><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><!----><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->ä¸»ä»å¤åˆ¶å’Œå“¨å…µæœºåˆ¶</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">maijunxuan</span></span><span property="author" content="maijunxuan"></span></span><!----><!----><!----><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon" name="word"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 3164 å­—</span><meta property="wordCount" content="3164"></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 11 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT11M"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="ä¸»ä»å¤åˆ¶å’Œå“¨å…µæœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#ä¸»ä»å¤åˆ¶å’Œå“¨å…µæœºåˆ¶"><span>ä¸»ä»å¤åˆ¶å’Œå“¨å…µæœºåˆ¶</span></a></h1><h2 id="ä¸»ä»å¤åˆ¶æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#ä¸»ä»å¤åˆ¶æ¦‚è¿°"><span>ä¸»ä»å¤åˆ¶æ¦‚è¿°</span></a></h2><p>ä¸»ä»å¤åˆ¶å°±æ˜¯å°†ä¸»èŠ‚ç‚¹(master)çš„æ•°æ®å¤åˆ¶åˆ°ä»èŠ‚ç‚¹(slave)ï¼Œè®©å¤šä¸ªèŠ‚ç‚¹æ‰¿è½½ç”¨æˆ·çš„è¯·æ±‚ã€‚</p><p>ä¸»ä»å¤åˆ¶å…·å¤‡ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>    1. æ•°æ®å†—ä½™:ä¸»èŠ‚ç‚¹çš„æ•°æ®éƒ½ä¼šåŒæ­¥åˆ°ä»èŠ‚ç‚¹ä¸Šï¼Œæ‰€ä»¥å¤šä¸ªèŠ‚ç‚¹éƒ½ä¼šæœ‰ç›¸åŒæ•°æ®ï¼Œä»è€Œå®ç°æ•°æ®å†—ä½™ã€‚</span></span>
<span class="line"><span>    2. æ•…éšœæ¢å¤:ä¸»èŠ‚ç‚¹å‡ºç°æ•…éšœåï¼Œä»èŠ‚ç‚¹å¯ä»¥ç»§ç»­æ‰¿è½½ç”¨æˆ·çš„è¯·æ±‚ï¼Œåšåˆ°æœåŠ¡ä¸Šçš„å†—ä½™ã€‚</span></span>
<span class="line"><span>    3. è´Ÿè½½å‡è¡¡:ä¸»ä»å¤åˆ¶æœºåˆ¶å®ç°ä¸»èŠ‚ç‚¹æ¥æ”¶ç”¨æˆ·å†™è¯·æ±‚ï¼Œä»èŠ‚ç‚¹æ‰¿è½½ç”¨æˆ·è¯»è¯·æ±‚ï¼Œå¯¹äºè¯»å¤šå†™å°‘çš„åœºæ™¯ï¼Œè¿™ç§æœºåˆ¶å¯ä»¥å¤§å¤§æé«˜redisçš„å¹¶å‘é‡ã€‚</span></span>
<span class="line"><span>    4. é«˜è´Ÿè½½:ä¸»ä»å¤åˆ¶+å“¨å…µæœºåˆ¶å¯ä»¥å®ç°é«˜è´Ÿè½½ï¼Œè¿™ç‚¹åæ–‡ä¼šä»‹ç»åˆ°ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸»ä»å¤åˆ¶é…ç½®ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ä¸»ä»å¤åˆ¶é…ç½®ç¤ºä¾‹"><span>ä¸»ä»å¤åˆ¶é…ç½®ç¤ºä¾‹</span></a></h2><h3 id="ä¸€ä¸»äºŒä»†é…ç½®" tabindex="-1"><a class="header-anchor" href="#ä¸€ä¸»äºŒä»†é…ç½®"><span>ä¸€ä¸»äºŒä»†é…ç½®</span></a></h3><h4 id="åˆ›å»º3ä¸ªredisé…ç½®æ–‡ä»¶-ä»¥ç¬”è€…ä¸ºä¾‹-åå­—åˆ†åˆ«ä¸ºredis6379-confã€redis6380-confã€redis6381-conf" tabindex="-1"><a class="header-anchor" href="#åˆ›å»º3ä¸ªredisé…ç½®æ–‡ä»¶-ä»¥ç¬”è€…ä¸ºä¾‹-åå­—åˆ†åˆ«ä¸ºredis6379-confã€redis6380-confã€redis6381-conf"><span>åˆ›å»º3ä¸ªredisé…ç½®æ–‡ä»¶ï¼Œä»¥ç¬”è€…ä¸ºä¾‹ï¼Œåå­—åˆ†åˆ«ä¸º<code>redis6379.conf</code>ã€<code>redis6380.conf</code>ã€<code>redis6381.conf</code></span></a></h4><p>ä¸»èŠ‚ç‚¹ä¸º6379ï¼Œé…ç½®å†…å®¹ä¸º:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># å¼•å…¥redisåŸºæœ¬é…ç½®ï¼Œæ³¨æ„è¿™ä¸ªé…ç½®åªæ”¯æŒRDB</span></span>
<span class="line"><span>include /root/redis/redis.conf</span></span>
<span class="line"><span>pidfile /var/run/redis_6379.pid</span></span>
<span class="line"><span>port 6379</span></span>
<span class="line"><span># è®¾ç½®RDBæ–‡ä»¶å</span></span>
<span class="line"><span>dbfilename dump6379.rdb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä»èŠ‚ç‚¹ä»¥6380-é…ç½®å¦‚ä¸‹" tabindex="-1"><a class="header-anchor" href="#ä»èŠ‚ç‚¹ä»¥6380-é…ç½®å¦‚ä¸‹"><span>ä»èŠ‚ç‚¹ä»¥6380ï¼Œé…ç½®å¦‚ä¸‹</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># å¼•å…¥redisåŸºæœ¬é…ç½®ï¼Œæ³¨æ„è¿™ä¸ªé…ç½®åªæ”¯æŒRDB</span></span>
<span class="line"><span>include /root/redis/redis.conf</span></span>
<span class="line"><span>pidfile /var/run/redis_6380.pid</span></span>
<span class="line"><span>port 6380</span></span>
<span class="line"><span>dbfilename dump6380.rdb</span></span>
<span class="line"><span># ä½œä¸º6379çš„ä¸»èŠ‚ç‚¹</span></span>
<span class="line"><span>slaveof 127.0.0.1 6379</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åˆ†åˆ«å¯åŠ¨è¿™å‡ ä¸ªredis" tabindex="-1"><a class="header-anchor" href="#åˆ†åˆ«å¯åŠ¨è¿™å‡ ä¸ªredis"><span>åˆ†åˆ«å¯åŠ¨è¿™å‡ ä¸ªredis</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span> redis-server /root/redis/conf/redis6379.conf</span></span>
<span class="line"><span> redis-server /root/redis/conf/redis6380.conf</span></span>
<span class="line"><span> redis-server /root/redis/conf/redis6381.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å®Œæˆé…ç½®å-æˆ‘ä»¬å°±å¯ä»¥å¼€å§‹æµ‹è¯•äº†" tabindex="-1"><a class="header-anchor" href="#å®Œæˆé…ç½®å-æˆ‘ä»¬å°±å¯ä»¥å¼€å§‹æµ‹è¯•äº†"><span>å®Œæˆé…ç½®åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹æµ‹è¯•äº†</span></a></h4><p>é¦–å…ˆå¯¹æ¸…ç©ºä¸»èŠ‚ç‚¹æ•°æ®ï¼Œå¹¶è®¾ç½®ä¸€äº›å€¼è¿›å»</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>127.0.0.1:6379&gt; flushdb</span></span>
<span class="line"><span>OK</span></span>
<span class="line"><span>127.0.0.1:6379&gt; set master_key value</span></span>
<span class="line"><span>OK</span></span>
<span class="line"><span>127.0.0.1:6379&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å†æ¥çœ‹çœ‹ä»èŠ‚ç‚¹" tabindex="-1"><a class="header-anchor" href="#å†æ¥çœ‹çœ‹ä»èŠ‚ç‚¹"><span>å†æ¥çœ‹çœ‹ä»èŠ‚ç‚¹</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># å¯ä»¥çœ‹åˆ°ä¸»èŠ‚ç‚¹çš„keyæ¥äº†</span></span>
<span class="line"><span>[root@iZ8vb7bhe4b8nhhhpavhwpZ sbin]# redis-cli -p 6380</span></span>
<span class="line"><span>127.0.0.1:6380&gt; keys *</span></span>
<span class="line"><span>1) &quot;master_key&quot;</span></span>
<span class="line"><span>127.0.0.1:6380&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># æŸ¥çœ‹6380æœåŠ¡ç«¯çš„è§’è‰²ï¼Œç¡®å®æ˜¯slave</span></span>
<span class="line"><span>127.0.0.1:6380&gt; info replication</span></span>
<span class="line"><span># Replication</span></span>
<span class="line"><span>role:slave</span></span>
<span class="line"><span>master_host:127.0.0.1</span></span>
<span class="line"><span>master_port:6379</span></span>
<span class="line"><span>master_link_status:up</span></span>
<span class="line"><span>master_last_io_seconds_ago:8</span></span>
<span class="line"><span>master_sync_in_progress:0</span></span>
<span class="line"><span>slave_read_repl_offset:463</span></span>
<span class="line"><span>slave_repl_offset:463</span></span>
<span class="line"><span>slave_priority:100</span></span>
<span class="line"><span>slave_read_only:1</span></span>
<span class="line"><span>replica_announced:1</span></span>
<span class="line"><span>connected_slaves:0</span></span>
<span class="line"><span>master_failover_state:no-failover</span></span>
<span class="line"><span>master_replid:6b1f1afb6d0c0807d6f3f7b6e4118e892aba4fd2</span></span>
<span class="line"><span>master_replid2:0000000000000000000000000000000000000000</span></span>
<span class="line"><span>master_repl_offset:463</span></span>
<span class="line"><span>second_repl_offset:-1</span></span>
<span class="line"><span>repl_backlog_active:1</span></span>
<span class="line"><span>repl_backlog_size:1048576</span></span>
<span class="line"><span>repl_backlog_first_byte_offset:1</span></span>
<span class="line"><span>repl_backlog_histlen:463</span></span>
<span class="line"><span>127.0.0.1:6380&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¸»ä»å¤åˆ¶å‡ ä¸ªç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#ä¸»ä»å¤åˆ¶å‡ ä¸ªç‰¹ç‚¹"><span>ä¸»ä»å¤åˆ¶å‡ ä¸ªç‰¹ç‚¹</span></a></h4><ol><li>ä»èŠ‚ç‚¹æŒ‚æ‰ï¼Œåœ¨å¯åŠ¨ï¼Œæ•°æ®ä¸ä¼šä¸¢å¤±ï¼Œç…§æ ·æ˜¯ä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># å¼ºåˆ¶æŒ‚æ‰ä»èŠ‚ç‚¹</span></span>
<span class="line"><span>[root@iZ8vb7bhe4b8nhhhpavhwpZ sbin]# redis-cli -p 6380</span></span>
<span class="line"><span>127.0.0.1:6380&gt; SHUTDOWN</span></span>
<span class="line"><span>not connected&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># å¯åŠ¨ å‘ç°æ•°æ®éƒ½åœ¨ï¼Œå¹¶ä¸”è§’è‰²ä¹Ÿæ˜¯slave</span></span>
<span class="line"><span>[root@iZ8vb7bhe4b8nhhhpavhwpZ sbin]# redis-server /root/redis/conf/redis6380.conf</span></span>
<span class="line"><span>[root@iZ8vb7bhe4b8nhhhpavhwpZ sbin]# redis-cli -p 6380</span></span>
<span class="line"><span>127.0.0.1:6380&gt; info replication</span></span>
<span class="line"><span># Replication</span></span>
<span class="line"><span>role:slave</span></span>
<span class="line"><span>master_host:127.0.0.1</span></span>
<span class="line"><span>master_port:6379</span></span>
<span class="line"><span>master_link_status:up</span></span>
<span class="line"><span>master_last_io_seconds_ago:2</span></span>
<span class="line"><span>master_sync_in_progress:0</span></span>
<span class="line"><span>slave_read_repl_offset:1191</span></span>
<span class="line"><span>slave_repl_offset:1191</span></span>
<span class="line"><span>slave_priority:100</span></span>
<span class="line"><span>slave_read_only:1</span></span>
<span class="line"><span>replica_announced:1</span></span>
<span class="line"><span>connected_slaves:0</span></span>
<span class="line"><span>master_failover_state:no-failover</span></span>
<span class="line"><span>master_replid:6b1f1afb6d0c0807d6f3f7b6e4118e892aba4fd2</span></span>
<span class="line"><span>master_replid2:0000000000000000000000000000000000000000</span></span>
<span class="line"><span>master_repl_offset:1191</span></span>
<span class="line"><span>second_repl_offset:-1</span></span>
<span class="line"><span>repl_backlog_active:1</span></span>
<span class="line"><span>repl_backlog_size:1048576</span></span>
<span class="line"><span>repl_backlog_first_byte_offset:1164</span></span>
<span class="line"><span>repl_backlog_histlen:28</span></span>
<span class="line"><span>127.0.0.1:6380&gt; keys *</span></span>
<span class="line"><span>1) &quot;master_key&quot;</span></span>
<span class="line"><span>127.0.0.1:6380&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>ä¸»èŠ‚ç‚¹æŒ‚äº†ï¼Œä»èŠ‚ç‚¹ä»ç„¶æ˜¯ä»èŠ‚ç‚¹ï¼Œä¸»èŠ‚ç‚¹æ¢å¤åä»ç„¶æ˜¯ä¸»èŠ‚ç‚¹</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># å¼ºåˆ¶æŒ‚æ‰ä¸»èŠ‚ç‚¹</span></span>
<span class="line"><span>[root@iZ8vb7bhe4b8nhhhpavhwpZ sbin]# redis-cli</span></span>
<span class="line"><span>127.0.0.1:6379&gt; SHUTDOWN</span></span>
<span class="line"><span>not connected&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># ç¡®å®šä¸»èŠ‚ç‚¹ä¸‹çº¿</span></span>
<span class="line"><span>[root@iZ8vb7bhe4b8nhhhpavhwpZ sbin]# ps -ef |grep redis</span></span>
<span class="line"><span>root      5572     1  0 00:16 ?        00:00:01 redis-server 127.0.0.1:6381</span></span>
<span class="line"><span>root      6273     1  0 00:29 ?        00:00:00 redis-server 127.0.0.1:6380</span></span>
<span class="line"><span>root      6348  4680  0 00:30 pts/0    00:00:00 grep --color=auto redis</span></span>
<span class="line"><span></span></span>
<span class="line"><span># å†æ¬¡å¯åŠ¨ä¸»èŠ‚ç‚¹ï¼Œå‘ç°keyéƒ½åœ¨å¹¶ä¸”è§’è‰²ä»ç„¶æ˜¯masterï¼Œè®¾ç½®ä¸€ä¸ªk2å€¼</span></span>
<span class="line"><span>[root@iZ8vb7bhe4b8nhhhpavhwpZ sbin]# redis-server /root/redis/conf/redis6379.conf</span></span>
<span class="line"><span>[root@iZ8vb7bhe4b8nhhhpavhwpZ sbin]# redis-cli</span></span>
<span class="line"><span>127.0.0.1:6379&gt; set key2 v2</span></span>
<span class="line"><span>OK</span></span>
<span class="line"><span>127.0.0.1:6379&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># ä»èŠ‚ç‚¹ä»ç„¶å¯ä»¥æ”¶åˆ°ï¼Œè¯´æ˜ä¸»èŠ‚ç‚¹ä»ç„¶æ˜¯6379</span></span>
<span class="line"><span>[root@iZ8vb7bhe4b8nhhhpavhwpZ sbin]# redis-cli -p 6380</span></span>
<span class="line"><span>127.0.0.1:6380&gt; keys *</span></span>
<span class="line"><span>1) &quot;key2&quot;</span></span>
<span class="line"><span>2) &quot;master_key&quot;</span></span>
<span class="line"><span>127.0.0.1:6380&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è–ªç«ç›¸ä¼ é…ç½®" tabindex="-1"><a class="header-anchor" href="#è–ªç«ç›¸ä¼ é…ç½®"><span>è–ªç«ç›¸ä¼ é…ç½®</span></a></h3><p>å¦‚æœå¤§é‡ä¸»èŠ‚ç‚¹é…åˆå¤§é‡ä»èŠ‚ç‚¹ï¼Œä¼šå¯¼è‡´ä¸»èŠ‚ç‚¹ä¸ºäº†åŒæ­¥forkå¤§é‡å­è¿›ç¨‹åŒæ­¥æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†æŸäº›ä»èŠ‚ç‚¹ä½œä¸ºæŸä¸ªä»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹</p><p>ä»¥ç¬”è€…æœ¬æ¬¡ç¤ºä¾‹ä¸ºä¾‹ï¼Œæˆ‘ä»¬å°†81ä½œä¸º80çš„ä»èŠ‚ç‚¹</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span># ä¸ºäº†æ–¹ä¾¿ï¼Œç¬”è€…ä½¿ç”¨å‘½ä»¤çš„å½¢å¼ï¼Œè¯»è€…ä¹Ÿå¯ä»¥ä½¿ç”¨confæ–‡ä»¶é…ç½®</span></span>
<span class="line"><span>127.0.0.1:6381&gt; SLAVEOF 127.0.0.1 6380</span></span>
<span class="line"><span>OK</span></span>
<span class="line"><span>127.0.0.1:6381&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æ¬¡æŸ¥çœ‹80èŠ‚ç‚¹ï¼Œå¯ä»¥çœ‹åˆ°<code>slave0:ip=127.0.0.1,port=6381,state=online,offset=810,lag=1</code>ï¼Œç”±æ­¤å¯çŸ¥ä»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹é…ç½®å®Œæˆ</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>[root@iZ8vb7bhe4b8nhhhpavhwpZ sbin]# redis-cli -p 6380</span></span>
<span class="line"><span>127.0.0.1:6380&gt; info replication</span></span>
<span class="line"><span># Replication</span></span>
<span class="line"><span>role:slave</span></span>
<span class="line"><span>master_host:127.0.0.1</span></span>
<span class="line"><span>master_port:6379</span></span>
<span class="line"><span>master_link_status:up</span></span>
<span class="line"><span>master_last_io_seconds_ago:8</span></span>
<span class="line"><span>master_sync_in_progress:0</span></span>
<span class="line"><span>slave_read_repl_offset:810</span></span>
<span class="line"><span>slave_repl_offset:810</span></span>
<span class="line"><span>slave_priority:100</span></span>
<span class="line"><span>slave_read_only:1</span></span>
<span class="line"><span>replica_announced:1</span></span>
<span class="line"><span>connected_slaves:1</span></span>
<span class="line"><span>slave0:ip=127.0.0.1,port=6381,state=online,offset=810,lag=1</span></span>
<span class="line"><span>master_failover_state:no-failover</span></span>
<span class="line"><span>master_replid:a0d1449bc956d9ef57489f7820340c542d0ac066</span></span>
<span class="line"><span>master_replid2:0000000000000000000000000000000000000000</span></span>
<span class="line"><span>master_repl_offset:810</span></span>
<span class="line"><span>second_repl_offset:-1</span></span>
<span class="line"><span>repl_backlog_active:1</span></span>
<span class="line"><span>repl_backlog_size:1048576</span></span>
<span class="line"><span>repl_backlog_first_byte_offset:1</span></span>
<span class="line"><span>repl_backlog_histlen:810</span></span>
<span class="line"><span>127.0.0.1:6380&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åå®¢ä¸ºä¸»é…ç½®" tabindex="-1"><a class="header-anchor" href="#åå®¢ä¸ºä¸»é…ç½®"><span>åå®¢ä¸ºä¸»é…ç½®</span></a></h3><p>å¯¹ç€ä»èŠ‚ç‚¹é”®å…¥å¦‚ä¸‹å‘½ä»¤å³å¯å®ç°åå®¢ä¸ºä¸»ï¼Œè¿™é‡Œç”±äºé…ç½®å¾ˆç®€å•ï¼Œä¸”ç”Ÿäº§ç¯å¢ƒå°‘ç”¨ï¼Œç¬”è€…å°±ä¸åšè¿‡å¤šæ¼”ç¤ºäº†</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>slaveof  no one</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="ä¸»ä»å¤åˆ¶åŸç†è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#ä¸»ä»å¤åˆ¶åŸç†è¯¦è§£"><span>ä¸»ä»å¤åˆ¶åŸç†è¯¦è§£</span></a></h2><h3 id="å…¨é‡å¤åˆ¶" tabindex="-1"><a class="header-anchor" href="#å…¨é‡å¤åˆ¶"><span>å…¨é‡å¤åˆ¶</span></a></h3><p>å¦‚ä¸‹å›¾,æ•´ä½“æ­¥éª¤ä¸º:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>    1. ä»èŠ‚ç‚¹å‘ä¸»èŠ‚ç‚¹å‘é€åŒæ­¥è¯·æ±‚ï¼Œå› ä¸ºä¸çŸ¥é“ä¸»åº“çš„runIDï¼Œå¹¶ä¸”ä¸çŸ¥é“åŒæ­¥çš„åç§»é‡æ˜¯å¤šå°‘ï¼Œæ‰€ä»¥å‚æ•°åˆ†åˆ«ä¸º? -1,åŒæ­¥è¯·æ±‚çš„æŒ‡ä»¤ä¸ºpsync</span></span>
<span class="line"><span>    2. ä¸»åº“æ‰§è¡ŒbgsaveæŒ‡ä»¤ç”ŸæˆrdbæŒ‡ä»¤ï¼Œå°†æ•°æ®å‘é€ç»™ä»åº“ï¼Œä»åº“ä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œä¼šå°†æ•°æ®æ¸…ç©ºï¼Œç„¶ååŠ è½½rdbæ–‡ä»¶ï¼Œå®Œæˆæ•°æ®åŒæ­¥ã€‚åœ¨æ­¤æœŸé—´ï¼Œä¸»åº“æ”¶åˆ°çš„æ–°æ•°æ®éƒ½ä¼šè¢«å­˜å…¥replication bufferä¸­ã€‚</span></span>
<span class="line"><span>    3. ä¸»åº“ä¼šå°†replication bufferå‘é€ç»™ä»åº“ï¼Œå®Œæˆæœ€æ–°æ•°æ®çš„åŒæ­¥ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://s2.loli.net/2023/06/14/Zsi4Ljf6Hho8mB7.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="å¢é‡å¤åˆ¶" tabindex="-1"><a class="header-anchor" href="#å¢é‡å¤åˆ¶"><span>å¢é‡å¤åˆ¶</span></a></h3><p>ä» Redis 2.8 å¼€å§‹ï¼Œå› ä¸ºç½‘ç»œæ–­å¼€å¯¼è‡´æ•°æ®åŒæ­¥ä¸­æ–­çš„æƒ…å†µï¼Œä¼šé‡‡ç”¨å¢é‡å¤åˆ¶çš„æ–¹å¼å®Œæˆæ•°æ®è¡¥å……ã€‚</p><p>éœ€è¦äº†è§£çš„æ˜¯ï¼Œå½“ä¸»ä»åŒæ­¥è¿‡ç¨‹ä¸­å› ä¸ºç½‘ç»œç­‰é—®é¢˜å‘ç”Ÿä¸­æ–­ï¼Œ<code>repl_backlog_buffer</code>ä¼šä¿å­˜ä¸¤è€…ä¹‹é—´å·®å¼‚çš„æ•°æ®ï¼Œå¦‚æœä»åº“é•¿æ—¶é—´æ²¡æœ‰æ¢å¤ï¼Œå¾ˆå¯èƒ½å‡ºç°è¯¥ç¯å½¢ç¼“å†²åŒºæ•°æ®è¢«è¦†ç›–è¿›è€Œå‡ºç°å¢é‡å¤åˆ¶å¤±è´¥ï¼Œåªèƒ½é€šè¿‡å…¨é‡å¤åˆ¶çš„æ–¹å¼å®ç°æ•°æ®åŒæ­¥ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å†è¡¥å……ä¸€ä¸ªæ¦‚å¿µreplication bufferï¼Œè¿™ä¸ªç¼“å†²åŒºç”¨äºå­˜æ”¾ç”¨æˆ·å†™å…¥çš„æ–°æŒ‡ä»¤ï¼Œå®Œæˆå…¨é‡å¤åˆ¶ä¹‹åçš„æ•°æ®éƒ½æ˜¯é€šè¿‡è¿™ä¸ªbufferçš„æ•°æ®ä¼ è¾“å®ç°æ•°æ®å¢é‡åŒæ­¥ã€‚</p><h2 id="ä¸»ä»å¤åˆ¶ç›¸å…³é¢è¯•é¢˜" tabindex="-1"><a class="header-anchor" href="#ä¸»ä»å¤åˆ¶ç›¸å…³é¢è¯•é¢˜"><span>ä¸»ä»å¤åˆ¶ç›¸å…³é¢è¯•é¢˜</span></a></h2><ol><li>ä¸»æœåŠ¡å™¨ä¸è¿›è¡ŒæŒä¹…åŒ–å¤åˆ¶æ˜¯å¦ä¼šæœ‰å®‰å…¨æ€§é—®é¢˜?</li></ol><blockquote><p>æœ‰ï¼Œå‡å¦‚ä¸»èŠ‚ç‚¹æ²¡æœ‰ä½¿ç”¨RDBæŒä¹…åŒ–ï¼Œæ•°æ®æ²¡æœ‰æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œå‡å¦‚ä¸»èŠ‚ç‚¹æŒ‚æ‰å°±å…‰é€Ÿæ¢å¤ï¼Œä»èŠ‚ç‚¹å¾ˆå¯èƒ½ä¼šå› æ­¤æ¸…ç©ºåŸæœ¬æ•°æ®è¿›è€Œå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</p></blockquote><ol><li>ä¸ºä»€ä¹ˆä¸»ä»å¤åˆ¶ä½¿ç”¨RDBè€Œä¸æ˜¯AOF</li></ol><blockquote><p>RDBæ˜¯äºŒè¿›åˆ¶ä¸”å‹ç¼©è¿‡çš„æ–‡ä»¶ï¼Œä¼ è¾“é€Ÿåº¦ä»¥åŠåŠ è½½é€Ÿåº¦éƒ½è¿œè¿œå¿«é€ŸAOFã€‚ä¸”AOFå­˜çš„éƒ½æ˜¯æŒ‡ä»¤éå¸¸è€—è´¹ç£ç›˜ç©ºé—´ï¼ŒåŠ è½½æ—¶éƒ½æ˜¯é‡æ”¾æ¯ä¸ªå†™å‘½ä»¤ï¼Œéå¸¸è€—æ—¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯RDBæ˜¯æŒ‰ç…§æ—¶é—´é—´éš”è¿›è¡ŒæŒä¹…åŒ–ï¼Œå¯¹äºæ•°æ®ä¸æ•æ„Ÿçš„åœºæ™¯æˆ‘ä»¬è¿˜æ˜¯å»ºè®®ä½¿ç”¨RDBã€‚</p></blockquote><ol><li>ä»€ä¹ˆæ˜¯æ— ç£ç›˜å¤åˆ¶æ¨¡å¼</li></ol><blockquote><p>æ•°æ®åŒæ­¥ä¸ç»è¿‡ä¸»è¿›ç¨‹ä»¥åŠç¡¬ç›˜ï¼Œç›´æ¥åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹dump RDBæ•°æ®åˆ°ä»èŠ‚ç‚¹ã€‚å¯¹äºç£ç›˜æ€§èƒ½è¾ƒå·®çš„æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚é…ç½®å‚æ•°ä¸º: repl-diskless-sync no # å†³å®šæ˜¯å¦å¼€å¯æ— ç£ç›˜å¤åˆ¶æ¨¡å¼ repl-diskless-sync-delay 5 # å†³å®šåŒæ­¥çš„æ—¶é—´é—´éš”</p></blockquote><ol><li>ä¸ºä»€ä¹ˆä¼šæœ‰ä»åº“çš„ä»åº“è®¾è®¡</li></ol><blockquote><p>é¿å…ä¸ºäº†åŒæ­¥æ•°æ®ç»™å¤§é‡ä»åº“ï¼Œforkå¤§é‡çš„å­è¿›ç¨‹ç”Ÿæˆrdbæ–‡ä»¶è¿›è¡Œå…¨é‡å¤åˆ¶å¯¼è‡´ä¸»è¿›ç¨‹é˜»å¡ã€‚</p></blockquote><ol><li>è¯»å†™åˆ†ç¦»åŠå…¶ä¸­çš„é—®é¢˜</li></ol><blockquote><ol><li>å»¶è¿Ÿä¸ä¸ä¸€è‡´é—®é¢˜:å¦‚æœå¯¹æ•°æ®ä¸€è‡´æ€§å®¹å¿åº¦è¾ƒä½ï¼Œç½‘ç»œå»¶è¿Ÿå¯¼è‡´æ•°æ®ä¸ä¸€è‡´é—®é¢˜åªèƒ½é€šè¿‡æé«˜ç½‘ç»œå¸¦å®½ï¼Œæˆ–è€…é€šçŸ¥åº”ç”¨ä¸åœ¨é€šè¿‡è¯¥èŠ‚ç‚¹è·å–æ•°æ®</li><li>æ•°æ®è¿‡æœŸé—®é¢˜:</li><li>æ•…éšœåˆ‡æ¢é—®é¢˜</li></ol></blockquote><ol><li>å¦‚æœåœ¨ç½‘ç»œæ–­å¼€æœŸé—´ï¼Œrepl_backlog_sizeç¯å½¢ç¼“å†²åŒºå†™æ»¡ä¹‹åï¼Œæ˜¯è¿›è¡Œå¢é‡å¤åˆ¶è¿˜æ˜¯å…¨é‡å¤åˆ¶ï¼Ÿ</li></ol><blockquote><ol><li>è‹¥ä¸»åº“çš„ä¸»åº“repl_backlog_bufferçš„slave_repl_offsetå·²ç»è¢«è¦†ç›–ï¼Œé‚£ä¹ˆåŒæ­¥å°±éœ€è¦å…¨é‡å¤åˆ¶äº†</li><li>ä»åº“ä¼šé€šè¿‡psyncå‘½ä»¤æŠŠè‡ªå·±è®°å½•çš„slave_repl_offsetå‘ç»™ä¸»åº“ï¼Œä¸»åº“æ ¹æ®å¤åˆ¶è¿›åº¦å†³å®šæ˜¯å¢é‡å¤åˆ¶è¿˜æ˜¯å…¨é‡å¤åˆ¶ã€‚</li></ol></blockquote><h1 id="å“¨å…µæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å“¨å…µæ¨¡å¼"><span>å“¨å…µæ¨¡å¼</span></a></h1><h2 id="å“¨å…µæ¨¡å¼ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#å“¨å…µæ¨¡å¼ç®€ä»‹"><span>å“¨å…µæ¨¡å¼ç®€ä»‹</span></a></h2><p>å“¨å…µæä¾›ä»¥ä¸‹å‡ ç§åŠŸèƒ½</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>    1. ç›‘æ§ï¼ˆMonitoringï¼‰:å“¨å…µä¼šç›‘æ§ä¸»èŠ‚ç‚¹å’Œä»èŠ‚ç‚¹æ˜¯å¦æ­£å¸¸è¿ä½œã€‚</span></span>
<span class="line"><span>    2. è‡ªåŠ¨æ•…éšœè½¬ç§»ï¼ˆAutomatic failoverï¼‰:å½“ä¸»èŠ‚ç‚¹å› ä¸ºä»¥å¤–ä¸‹çº¿äº†ï¼Œå“¨å…µå°±ä¼šä»ä»èŠ‚ç‚¹ä¸­é€‰å‡ºæ–°çš„ä¸»èŠ‚ç‚¹ï¼Œå¹¶è®©å…¶ä»–ä»èŠ‚ç‚¹å¤åˆ¶æ–°çš„ä¸»èŠ‚ç‚¹çš„æ•°æ®ã€‚</span></span>
<span class="line"><span>    3. é€šçŸ¥ï¼ˆNotificationï¼‰ï¼šå“¨å…µä¼šå°†æ•…éšœè½¬ç§»ç»“æœé€šçŸ¥ç»™å®¢æˆ·ç«¯ã€‚</span></span>
<span class="line"><span>    4. é…ç½®æä¾›è€…ï¼ˆConfiguration providerï¼‰:å®¢æˆ·ç«¯è¿æ¥redisæ—¶ï¼Œä¼šé€šè¿‡å“¨å…µè·å–æœåŠ¡æä¾›è€…ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å“¨å…µæ¨¡å¼é…ç½®ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#å“¨å…µæ¨¡å¼é…ç½®ç¤ºä¾‹"><span>å“¨å…µæ¨¡å¼é…ç½®ç¤ºä¾‹</span></a></h2><h3 id="ç¼–è¾‘ä¸€ä¸ªå“¨å…µçš„é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#ç¼–è¾‘ä¸€ä¸ªå“¨å…µçš„é…ç½®æ–‡ä»¶"><span>ç¼–è¾‘ä¸€ä¸ªå“¨å…µçš„é…ç½®æ–‡ä»¶</span></a></h3><p>ä»¥ç¬”è€…çš„ä¸ºä¾‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º<code>sentinel.conf</code>ï¼Œå†…å®¹ä¸ºå¦‚ä¸‹æ‰€ç¤ºï¼Œä¸»ä»èŠ‚ç‚¹ä»ç„¶ä»¥ä¸Šæ–‡çš„6179ä½œä¸ºä¸»ï¼Œå…¶ä½™ä½œä¸ºä»</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>sentinel monitor master_redis 127.0.0.1 6379 1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>é€šè¿‡å®¢æˆ·ç«¯æŸ¥çœ‹6379çš„æœåŠ¡ç«¯ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰6379èº«ä»½ä¸ºmasterï¼Œå¹¶ä¸”æœ‰ä¸¤ä¸ªä»èŠ‚ç‚¹6380å’Œ6381</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>127.0.0.1:6379&gt; info replication</span></span>
<span class="line"><span># Replication</span></span>
<span class="line"><span>role:master</span></span>
<span class="line"><span>connected_slaves:2</span></span>
<span class="line"><span>slave0:ip=127.0.0.1,port=6380,state=online,offset=3082,lag=1</span></span>
<span class="line"><span>slave1:ip=127.0.0.1,port=6381,state=online,offset=3082,lag=0</span></span>
<span class="line"><span>master_failover_state:no-failover</span></span>
<span class="line"><span>master_replid:3c8c2a4815e310bcc68b4e25705002a52be66658</span></span>
<span class="line"><span>master_replid2:0000000000000000000000000000000000000000</span></span>
<span class="line"><span>master_repl_offset:3233</span></span>
<span class="line"><span>second_repl_offset:-1</span></span>
<span class="line"><span>repl_backlog_active:1</span></span>
<span class="line"><span>repl_backlog_size:1048576</span></span>
<span class="line"><span>repl_backlog_first_byte_offset:1</span></span>
<span class="line"><span>repl_backlog_histlen:3233</span></span>
<span class="line"><span>127.0.0.1:6379&gt; SHUTDOWN</span></span>
<span class="line"><span>not connected&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åæˆ‘ä»¬å¯åŠ¨å“¨å…µï¼Œç„¶åæˆ‘ä»¬å°†6379å¼ºåˆ¶ä¸‹çº¿</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>redis-sentinel /root/redis/conf/sentinel.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åæˆ‘ä»¬å°±ä¼šçœ‹åˆ°ä¸»èŠ‚ç‚¹åˆ‡æ¢çš„æ—¥å¿—ä¿¡æ¯äº†</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>8210:X 29 Aug 2022 01:01:59.772 # +failover-end master master_redis 127.0.0.1 6379</span></span>
<span class="line"><span>8210:X 29 Aug 2022 01:01:59.772 # +switch-master master_redis 127.0.0.1 6379 127.0.0.1 6380</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å“¨å…µæ¨¡å¼å·¥ä½œåŸç†è§£æ" tabindex="-1"><a class="header-anchor" href="#å“¨å…µæ¨¡å¼å·¥ä½œåŸç†è§£æ"><span>å“¨å…µæ¨¡å¼å·¥ä½œåŸç†è§£æ</span></a></h2><h3 id="å“¨å…µé›†ç¾¤çš„ç»„å»º" tabindex="-1"><a class="header-anchor" href="#å“¨å…µé›†ç¾¤çš„ç»„å»º"><span>å“¨å…µé›†ç¾¤çš„ç»„å»º</span></a></h3><p>å¦‚ä¸‹å›¾å“¨å…µ1åœ¨ä¸»åº“çš„<code>__sentinel__:hello</code>é¢‘é“å‘é€æ¶ˆæ¯å‘ŠçŸ¥å…¶ä»–å“¨å…µèŠ‚ç‚¹ï¼Œè€Œå…¶ä»–å“¨å…µä¹Ÿæ˜¯é€šè¿‡è®¢é˜…è¯¥èŠ‚ç‚¹ä»è€Œä½¿å¾—å½¼æ­¤æ„æˆä¸€å¼ è”ç³»ç½‘ã€‚ <img src="https://s2.loli.net/2023/06/14/ZRTEuoHWa4gYGO8.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="å“¨å…µç›‘æ§redisåº“" tabindex="-1"><a class="header-anchor" href="#å“¨å…µç›‘æ§redisåº“"><span>å“¨å…µç›‘æ§redisåº“</span></a></h3><p>å¦‚ä¸‹å›¾å“¨å…µé€šè¿‡infoå‘½ä»¤ä»ä¸»åº“ä¸­è·å–ä»åº“çš„ä¿¡æ¯ï¼Œä»è€Œå®ç°ä¸å…¶ä»–ä»åº“å»ºç«‹è¿æ¥ï¼Œå…¶ä»–èŠ‚ç‚¹åŒç†ã€‚</p><p><img src="https://s2.loli.net/2023/06/14/8z1ETMeRfVLh9l6.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="ä¸»åº“ä¸‹çº¿çš„åˆ¤å®š" tabindex="-1"><a class="header-anchor" href="#ä¸»åº“ä¸‹çº¿çš„åˆ¤å®š"><span>ä¸»åº“ä¸‹çº¿çš„åˆ¤å®š</span></a></h3><h4 id="ä¸»è§‚ä¸‹çº¿" tabindex="-1"><a class="header-anchor" href="#ä¸»è§‚ä¸‹çº¿"><span>ä¸»è§‚ä¸‹çº¿</span></a></h4><p>ä»»æ„ä¸€ä¸ªå“¨å…µå¯¹ä¸»èŠ‚ç‚¹è¿›è¡Œæ£€æµ‹åˆ¤æ–­ï¼Œä¸»èŠ‚ç‚¹æ˜¯å¦ä¸‹çº¿ã€‚</p><h4 id="å®¢è§‚ä¸‹çº¿" tabindex="-1"><a class="header-anchor" href="#å®¢è§‚ä¸‹çº¿"><span>å®¢è§‚ä¸‹çº¿</span></a></h4><p>å“¨å…µé›†ç¾¤é€šè¿‡æŠ•ç¥¨åˆ¤å®šå½“å‰ä¸»èŠ‚ç‚¹æ˜¯å¦ä¸‹çº¿ï¼Œå…¶å·¥ä½œè¿‡ç¨‹å¦‚ä¸‹:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>1. æŸä¸ªå“¨å…µä¸»è§‚åˆ¤å®šä¸»èŠ‚ç‚¹ä¸‹çº¿ï¼Œå‘å…¶ä»–å“¨å…µå‘å‡ºis-master-down-by-addrï¼Œå¼€å§‹å¯¹æ˜¯å¦ä¸‹çº¿åˆ¤å®šè¿›è¡ŒæŠ•ç¥¨</span></span>
<span class="line"><span>2. æ¯ä¸ªå“¨å…µå‘å‡ºè‡ªå·±çš„çœ‹æ³•</span></span>
<span class="line"><span>3. æ ¹æ®sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;redis-port&gt; &lt;quorum&gt;è®¾ç½®quorumï¼Œè‹¥åŒæ„æ•°å¤§äºç­‰äºquorumåˆ™åˆ¤å®šä¸»èŠ‚ç‚¹ä¸‹çº¿ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://s2.loli.net/2023/06/14/GaXSYFCxBnqQNye.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="å“¨å…µé›†ç¾¤çš„é€‰ä¸¾" tabindex="-1"><a class="header-anchor" href="#å“¨å…µé›†ç¾¤çš„é€‰ä¸¾"><span>å“¨å…µé›†ç¾¤çš„é€‰ä¸¾</span></a></h3><p>åˆ¤å®šä¸»åº“ä¸‹çº¿åæˆ‘ä»¬å°±å¿…é¡»é€‰å‡ºå“¨å…µä¸­çš„leaderæ‰¾ä¸‹ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»å»ºç«‹ä¸€ä¸ªå“¨å…µé›†ç¾¤ï¼Œæœ‰äº†é›†ç¾¤æˆ‘ä»¬å¿…é¡»ä»ä¸­é€‰ä¸¾å‡ºleaderï¼Œè€Œå“¨å…µé€‰ä¸¾å‡ºçš„leaderå¿…é¡»ç¬¦åˆä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶:</p><blockquote><ol><li>num(total_sentinels)/2+1 //å³åŠæ•°(æ‰€æœ‰å“¨å…µæ•°çš„åŠæ•°ï¼Œæ— è®ºå“¨å…µæ­»æ´»)ä»¥ä¸Šçš„é€‰ç¥¨å³å¯æˆä¸ºå“¨å…µä¸­çš„leaderï¼Œè¿™å°±æ˜¯è‘—åçš„Raftç®—æ³•</li><li>é€‰ç¥¨æ•°è¿˜å¿…é¡»å¤§äºç­‰äºquorum</li></ol></blockquote><p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚æˆ‘ä»¬å½“å‰æœ‰5ä¸ªå“¨å…µï¼Œ1ä¸ªä¸»èŠ‚ç‚¹ï¼Œ3ä¸ªä»èŠ‚ç‚¹ï¼Œquorumè®¾ç½®ä¸º2ã€‚å‡å¦‚æ­¤æ—¶æœ‰3ä¸ªå“¨å…µæŒ‚æ‰ï¼Œè¯·é—®æˆ‘ä»¬å¯ä»¥åˆ¤å®šä¸»èŠ‚ç‚¹ä¸‹çº¿ä»¥åŠé€‰ä¸¾æ–°çš„ä¸»èŠ‚ç‚¹å˜›ï¼Ÿ</p><blockquote><p>é¦–å…ˆè§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œç”±äºå“¨å…µæŒ‚äº†3ä¸ªæ‰€ä»¥è¿˜å‰©ä¸¤ä¸ªï¼Œå‡å¦‚ä¸»èŠ‚ç‚¹æŒ‚äº†ï¼Œç”±äºquorumç­‰äº2ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰ä¸€å®šæ¦‚ç‡(ä¸¤ä¸ªå“¨å…µéƒ½è®¤ä¸ºä¸»èŠ‚ç‚¹æŒ‚äº†)åˆ¤å®šä¸»èŠ‚ç‚¹ä¸‹çº¿ã€‚ å†æ¥2ä¸ªé—®é¢˜ï¼Œä¸Šæ–‡å·²ç»ç»™å‡ºäº†é€‰ä¸¾æ–°çš„å“¨å…µlederçš„ä¸¤ä¸ªæ¡ä»¶ï¼Œæœ¬é¢˜ç›®æ˜æ˜¾ä¸ç¬¦åˆæ¡ä»¶1ï¼Œå› ä¸º(5/2)+1=3ï¼Œè€Œå“¨å…µåªå‰©ä¸¤ä¸ªäº†ï¼Œæ‰€ä»¥é€‰ä¸å‡ºå“¨å…µçš„leaderï¼Œä¹Ÿå°±æ²¡åŠæ³•æŒ‡å®šæ–°çš„leaderäº†ã€‚</p></blockquote><h3 id="ä¸»èŠ‚ç‚¹é€‰å‡º" tabindex="-1"><a class="header-anchor" href="#ä¸»èŠ‚ç‚¹é€‰å‡º"><span>ä¸»èŠ‚ç‚¹é€‰å‡º</span></a></h3><p>å®Œæˆå“¨å…µleaderé€‰ä¸¾ï¼Œå°±å¼€å§‹æŒ‡å®šä¸»èŠ‚ç‚¹äº†ï¼Œä¸»èŠ‚ç‚¹çš„é€‰å®šè§„åˆ™å¦‚ä¸‹:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>1. è¿‡æ»¤æ‰ä¸å¥åº·çš„å³å“¨å…µpingä¸åŒçš„ä»èŠ‚ç‚¹</span></span>
<span class="line"><span>2. é€‰æ‹©slave-priorityä»èŠ‚ç‚¹ä¼˜å…ˆçº§é«˜çš„</span></span>
<span class="line"><span>3. å¦‚æœä¸å­˜åœ¨slave-priorityé…ç½®ï¼Œåˆ™é€‰æ‹©å¤åˆ¶åç§»é‡(å³æ°¸è¿œåŸæ¥masteræœ€å¤šæ•°æ®çš„èŠ‚ç‚¹)æœ€å¤§ï¼Œä½œä¸ºä¸»èŠ‚ç‚¹</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://s2.loli.net/2023/06/14/4k7jFqvTzVcKU9x.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="æ•…éšœçš„è½¬ç§»" tabindex="-1"><a class="header-anchor" href="#æ•…éšœçš„è½¬ç§»"><span>æ•…éšœçš„è½¬ç§»</span></a></h3><ol><li>é€‰ä¸¾å‡ºå“¨å…µleader</li><li>å“¨å…µleaderæ ¹æ®ä¸Šæ–‡è§„åˆ™é€‰å‡ºæ–°çš„master</li><li>ä»èŠ‚ç‚¹å¤åˆ¶æ–°leaderçš„æ•°æ®</li><li>é€šçŸ¥å®¢æˆ·ç«¯ä¸»èŠ‚ç‚¹æ›´æ¢</li><li>è‹¥åŸæ¥çš„ä¸»èŠ‚ç‚¹å¤æ´»ï¼Œåˆ™ä½œä¸ºæ–°ä¸»èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹</li></ol></div><!----><!----><!----></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">æœ€è¿‘æ›´æ–°</span><time class="vp-meta-info" datetime="2023-08-28T00:49:57.000Z" data-allow-mismatch>2023/8/28 00:49</time></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 1585225345@qq.com">MJX</span><!--]--><!--]--></div></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><!----><div class="vp-copyright">Copyright Â© 2025 maijunxuan </div></footer></div><!--]--><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DDXXRmhs.js" defer></script>
  </body>
</html>
